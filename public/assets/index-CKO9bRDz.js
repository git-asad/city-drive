(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var Zh={exports:{}},al={},em={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function Ub(){if(f0)return Ae;f0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function b($){return $===null||typeof $!="object"?null:($=_&&$[_]||$["@@iterator"],typeof $=="function"?$:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function A($,Z,ye){this.props=$,this.context=Z,this.refs=D,this.updater=ye||O}A.prototype.isReactComponent={},A.prototype.setState=function($,Z){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Z,"setState")},A.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function q(){}q.prototype=A.prototype;function I($,Z,ye){this.props=$,this.context=Z,this.refs=D,this.updater=ye||O}var R=I.prototype=new q;R.constructor=I,k(R,A.prototype),R.isPureReactComponent=!0;var K=Array.isArray,X=Object.prototype.hasOwnProperty,re={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C($,Z,ye){var Se,xe={},Ee=null,Be=null;if(Z!=null)for(Se in Z.ref!==void 0&&(Be=Z.ref),Z.key!==void 0&&(Ee=""+Z.key),Z)X.call(Z,Se)&&!E.hasOwnProperty(Se)&&(xe[Se]=Z[Se]);var $e=arguments.length-2;if($e===1)xe.children=ye;else if(1<$e){for(var Ge=Array($e),bt=0;bt<$e;bt++)Ge[bt]=arguments[bt+2];xe.children=Ge}if($&&$.defaultProps)for(Se in $e=$.defaultProps,$e)xe[Se]===void 0&&(xe[Se]=$e[Se]);return{$$typeof:n,type:$,key:Ee,ref:Be,props:xe,_owner:re.current}}function S($,Z){return{$$typeof:n,type:$.type,key:Z,ref:$.ref,props:$.props,_owner:$._owner}}function M($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function L($){var Z={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ye){return Z[ye]})}var U=/\/+/g;function P($,Z){return typeof $=="object"&&$!==null&&$.key!=null?L(""+$.key):Z.toString(36)}function Ie($,Z,ye,Se,xe){var Ee=typeof $;(Ee==="undefined"||Ee==="boolean")&&($=null);var Be=!1;if($===null)Be=!0;else switch(Ee){case"string":case"number":Be=!0;break;case"object":switch($.$$typeof){case n:case e:Be=!0}}if(Be)return Be=$,xe=xe(Be),$=Se===""?"."+P(Be,0):Se,K(xe)?(ye="",$!=null&&(ye=$.replace(U,"$&/")+"/"),Ie(xe,Z,ye,"",function(bt){return bt})):xe!=null&&(M(xe)&&(xe=S(xe,ye+(!xe.key||Be&&Be.key===xe.key?"":(""+xe.key).replace(U,"$&/")+"/")+$)),Z.push(xe)),1;if(Be=0,Se=Se===""?".":Se+":",K($))for(var $e=0;$e<$.length;$e++){Ee=$[$e];var Ge=Se+P(Ee,$e);Be+=Ie(Ee,Z,ye,Ge,xe)}else if(Ge=b($),typeof Ge=="function")for($=Ge.call($),$e=0;!(Ee=$.next()).done;)Ee=Ee.value,Ge=Se+P(Ee,$e++),Be+=Ie(Ee,Z,ye,Ge,xe);else if(Ee==="object")throw Z=String($),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Be}function Me($,Z,ye){if($==null)return $;var Se=[],xe=0;return Ie($,Se,"","",function(Ee){return Z.call(ye,Ee,xe++)}),Se}function et($){if($._status===-1){var Z=$._result;Z=Z(),Z.then(function(ye){($._status===0||$._status===-1)&&($._status=1,$._result=ye)},function(ye){($._status===0||$._status===-1)&&($._status=2,$._result=ye)}),$._status===-1&&($._status=0,$._result=Z)}if($._status===1)return $._result.default;throw $._result}var Re={current:null},oe={transition:null},Q={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:oe,ReactCurrentOwner:re};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:Me,forEach:function($,Z,ye){Me($,function(){Z.apply(this,arguments)},ye)},count:function($){var Z=0;return Me($,function(){Z++}),Z},toArray:function($){return Me($,function(Z){return Z})||[]},only:function($){if(!M($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ae.Component=A,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=I,Ae.StrictMode=i,Ae.Suspense=p,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ae.act=ce,Ae.cloneElement=function($,Z,ye){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Se=k({},$.props),xe=$.key,Ee=$.ref,Be=$._owner;if(Z!=null){if(Z.ref!==void 0&&(Ee=Z.ref,Be=re.current),Z.key!==void 0&&(xe=""+Z.key),$.type&&$.type.defaultProps)var $e=$.type.defaultProps;for(Ge in Z)X.call(Z,Ge)&&!E.hasOwnProperty(Ge)&&(Se[Ge]=Z[Ge]===void 0&&$e!==void 0?$e[Ge]:Z[Ge])}var Ge=arguments.length-2;if(Ge===1)Se.children=ye;else if(1<Ge){$e=Array(Ge);for(var bt=0;bt<Ge;bt++)$e[bt]=arguments[bt+2];Se.children=$e}return{$$typeof:n,type:$.type,key:xe,ref:Ee,props:Se,_owner:Be}},Ae.createContext=function($){return $={$$typeof:d,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:c,_context:$},$.Consumer=$},Ae.createElement=C,Ae.createFactory=function($){var Z=C.bind(null,$);return Z.type=$,Z},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function($){return{$$typeof:m,render:$}},Ae.isValidElement=M,Ae.lazy=function($){return{$$typeof:v,_payload:{_status:-1,_result:$},_init:et}},Ae.memo=function($,Z){return{$$typeof:g,type:$,compare:Z===void 0?null:Z}},Ae.startTransition=function($){var Z=oe.transition;oe.transition={};try{$()}finally{oe.transition=Z}},Ae.unstable_act=ce,Ae.useCallback=function($,Z){return Re.current.useCallback($,Z)},Ae.useContext=function($){return Re.current.useContext($)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function($){return Re.current.useDeferredValue($)},Ae.useEffect=function($,Z){return Re.current.useEffect($,Z)},Ae.useId=function(){return Re.current.useId()},Ae.useImperativeHandle=function($,Z,ye){return Re.current.useImperativeHandle($,Z,ye)},Ae.useInsertionEffect=function($,Z){return Re.current.useInsertionEffect($,Z)},Ae.useLayoutEffect=function($,Z){return Re.current.useLayoutEffect($,Z)},Ae.useMemo=function($,Z){return Re.current.useMemo($,Z)},Ae.useReducer=function($,Z,ye){return Re.current.useReducer($,Z,ye)},Ae.useRef=function($){return Re.current.useRef($)},Ae.useState=function($){return Re.current.useState($)},Ae.useSyncExternalStore=function($,Z,ye){return Re.current.useSyncExternalStore($,Z,ye)},Ae.useTransition=function(){return Re.current.useTransition()},Ae.version="18.3.1",Ae}var p0;function ef(){return p0||(p0=1,em.exports=Ub()),em.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function Bb(){if(g0)return al;g0=1;var n=ef(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,g){var v,_={},b=null,O=null;g!==void 0&&(b=""+g),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(O=p.ref);for(v in p)i.call(p,v)&&!c.hasOwnProperty(v)&&(_[v]=p[v]);if(m&&m.defaultProps)for(v in p=m.defaultProps,p)_[v]===void 0&&(_[v]=p[v]);return{$$typeof:e,type:m,key:b,ref:O,props:_,_owner:o.current}}return al.Fragment=t,al.jsx=d,al.jsxs=d,al}var y0;function $b(){return y0||(y0=1,Zh.exports=Bb()),Zh.exports}var s=$b(),ou={},tm={exports:{}},cn={},nm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function zb(){return x0||(x0=1,(function(n){function e(oe,Q){var ce=oe.length;oe.push(Q);e:for(;0<ce;){var $=ce-1>>>1,Z=oe[$];if(0<o(Z,Q))oe[$]=Q,oe[ce]=Z,ce=$;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var Q=oe[0],ce=oe.pop();if(ce!==Q){oe[0]=ce;e:for(var $=0,Z=oe.length,ye=Z>>>1;$<ye;){var Se=2*($+1)-1,xe=oe[Se],Ee=Se+1,Be=oe[Ee];if(0>o(xe,ce))Ee<Z&&0>o(Be,xe)?(oe[$]=Be,oe[Ee]=ce,$=Ee):(oe[$]=xe,oe[Se]=ce,$=Se);else if(Ee<Z&&0>o(Be,ce))oe[$]=Be,oe[Ee]=ce,$=Ee;else break e}}return Q}function o(oe,Q){var ce=oe.sortIndex-Q.sortIndex;return ce!==0?ce:oe.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var p=[],g=[],v=1,_=null,b=3,O=!1,k=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(oe){for(var Q=t(g);Q!==null;){if(Q.callback===null)i(g);else if(Q.startTime<=oe)i(g),Q.sortIndex=Q.expirationTime,e(p,Q);else break;Q=t(g)}}function K(oe){if(D=!1,R(oe),!k)if(t(p)!==null)k=!0,et(X);else{var Q=t(g);Q!==null&&Re(K,Q.startTime-oe)}}function X(oe,Q){k=!1,D&&(D=!1,q(C),C=-1),O=!0;var ce=b;try{for(R(Q),_=t(p);_!==null&&(!(_.expirationTime>Q)||oe&&!L());){var $=_.callback;if(typeof $=="function"){_.callback=null,b=_.priorityLevel;var Z=$(_.expirationTime<=Q);Q=n.unstable_now(),typeof Z=="function"?_.callback=Z:_===t(p)&&i(p),R(Q)}else i(p);_=t(p)}if(_!==null)var ye=!0;else{var Se=t(g);Se!==null&&Re(K,Se.startTime-Q),ye=!1}return ye}finally{_=null,b=ce,O=!1}}var re=!1,E=null,C=-1,S=5,M=-1;function L(){return!(n.unstable_now()-M<S)}function U(){if(E!==null){var oe=n.unstable_now();M=oe;var Q=!0;try{Q=E(!0,oe)}finally{Q?P():(re=!1,E=null)}}else re=!1}var P;if(typeof I=="function")P=function(){I(U)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Me=Ie.port2;Ie.port1.onmessage=U,P=function(){Me.postMessage(null)}}else P=function(){A(U,0)};function et(oe){E=oe,re||(re=!0,P())}function Re(oe,Q){C=A(function(){oe(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){k||O||(k=!0,et(X))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var ce=b;b=Q;try{return oe()}finally{b=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,Q){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ce=b;b=oe;try{return Q()}finally{b=ce}},n.unstable_scheduleCallback=function(oe,Q,ce){var $=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?$+ce:$):ce=$,oe){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ce+Z,oe={id:v++,callback:Q,priorityLevel:oe,startTime:ce,expirationTime:Z,sortIndex:-1},ce>$?(oe.sortIndex=ce,e(g,oe),t(p)===null&&oe===t(g)&&(D?(q(C),C=-1):D=!0,Re(K,ce-$))):(oe.sortIndex=Z,e(p,oe),k||O||(k=!0,et(X))),oe},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(oe){var Q=b;return function(){var ce=b;b=Q;try{return oe.apply(this,arguments)}finally{b=ce}}}})(rm)),rm}var v0;function Hb(){return v0||(v0=1,nm.exports=zb()),nm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function qb(){if(w0)return cn;w0=1;var n=ef(),e=Hb();function t(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function c(r,a){d(r,a),d(r+"Capture",a)}function d(r,a){for(o[r]=a,r=0;r<a.length;r++)i.add(a[r])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function b(r){return p.call(_,r)?!0:p.call(v,r)?!1:g.test(r)?_[r]=!0:(v[r]=!0,!1)}function O(r,a,l,h){if(l!==null&&l.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function k(r,a,l,h){if(a===null||typeof a>"u"||O(r,a,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function D(r,a,l,h,f,x,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=a,this.sanitizeURL=x,this.removeEmptyString=N}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){A[r]=new D(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];A[a]=new D(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){A[r]=new D(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){A[r]=new D(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){A[r]=new D(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){A[r]=new D(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){A[r]=new D(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){A[r]=new D(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){A[r]=new D(r,5,!1,r.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function I(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(q,I);A[a]=new D(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(q,I);A[a]=new D(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(q,I);A[a]=new D(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){A[r]=new D(r,1,!1,r.toLowerCase(),null,!1,!1)}),A.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){A[r]=new D(r,1,!1,r.toLowerCase(),null,!0,!0)});function R(r,a,l,h){var f=A.hasOwnProperty(a)?A[a]:null;(f!==null?f.type!==0:h||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,l,f,h)&&(l=null),h||f===null?b(a)&&(l===null?r.removeAttribute(a):r.setAttribute(a,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(a=f.attributeName,h=f.attributeNamespace,l===null?r.removeAttribute(a):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?r.setAttributeNS(h,a,l):r.setAttribute(a,l))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),re=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var ce=Object.assign,$;function Z(r){if($===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+r}var ye=!1;function Se(r,a){if(!r||ye)return"";ye=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(G){var h=G}Reflect.construct(r,[],a)}else{try{a.call()}catch(G){h=G}r.call(a.prototype)}else{try{throw Error()}catch(G){h=G}r()}}catch(G){if(G&&h&&typeof G.stack=="string"){for(var f=G.stack.split(`
`),x=h.stack.split(`
`),N=f.length-1,T=x.length-1;1<=N&&0<=T&&f[N]!==x[T];)T--;for(;1<=N&&0<=T;N--,T--)if(f[N]!==x[T]){if(N!==1||T!==1)do if(N--,T--,0>T||f[N]!==x[T]){var F=`
`+f[N].replace(" at new "," at ");return r.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",r.displayName)),F}while(1<=N&&0<=T);break}}}finally{ye=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?Z(r):""}function xe(r){switch(r.tag){case 5:return Z(r.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return r=Se(r.type,!1),r;case 11:return r=Se(r.type.render,!1),r;case 1:return r=Se(r.type,!0),r;default:return""}}function Ee(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case re:return"Portal";case S:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case Ie:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case M:return(r._context.displayName||"Context")+".Provider";case U:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Me:return a=r.displayName||null,a!==null?a:Ee(r.type)||"Memo";case et:a=r._payload,r=r._init;try{return Ee(r(a))}catch{}}return null}function Be(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(a);case 8:return a===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function $e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bt(r){var a=Ge(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),h=""+r[a];if(!r.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,x=l.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return f.call(this)},set:function(N){h=""+N,x.call(this,N)}}),Object.defineProperty(r,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(N){h=""+N},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Tt(r){r._valueTracker||(r._valueTracker=bt(r))}function rs(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return r&&(h=Ge(r)?r.checked?"true":"false":r.value),r=h,r!==l?(a.setValue(r),!0):!1}function lr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ys(r,a){var l=a.checked;return ce({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function zi(r,a){var l=a.defaultValue==null?"":a.defaultValue,h=a.checked!=null?a.checked:a.defaultChecked;l=$e(a.value!=null?a.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ho(r,a){a=a.checked,a!=null&&R(r,"checked",a,!1)}function mo(r,a){ho(r,a);var l=$e(a.value),h=a.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?Hi(r,a.type,l):a.hasOwnProperty("defaultValue")&&Hi(r,a.type,$e(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Wl(r,a,l){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var h=a.type;if(!(h!=="submit"&&h!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,l||a===r.value||(r.value=a),r.defaultValue=a}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Hi(r,a,l){(a!=="number"||lr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Sr=Array.isArray;function Ar(r,a,l,h){if(r=r.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=a.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&h&&(r[l].defaultSelected=!0)}else{for(l=""+$e(l),a=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}a!==null||r[f].disabled||(a=r[f])}a!==null&&(a.selected=!0)}}function fo(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function qi(r,a){var l=a.value;if(l==null){if(l=a.children,a=a.defaultValue,l!=null){if(a!=null)throw Error(t(92));if(Sr(l)){if(1<l.length)throw Error(t(93));l=l[0]}a=l}a==null&&(a=""),l=a}r._wrapperState={initialValue:$e(l)}}function Wi(r,a){var l=$e(a.value),h=$e(a.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),a.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function po(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Pr,go=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,l,h,f){MSApp.execUnsafeLocalFunction(function(){return r(a,l,h,f)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Pr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function ss(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var Js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xs=["Webkit","ms","Moz","O"];Object.keys(Js).forEach(function(r){Xs.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),Js[a]=Js[r]})});function yo(r,a,l){return a==null||typeof a=="boolean"||a===""?"":l||typeof a!="number"||a===0||Js.hasOwnProperty(r)&&Js[r]?(""+a).trim():a+"px"}function xo(r,a){r=r.style;for(var l in a)if(a.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=yo(l,a[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,f):r[l]=f}}var vo=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wo(r,a){if(a){if(vo[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function bo(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zs=null;function Gi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ki=null,Nn=null,cr=null;function Qi(r){if(r=qo(r)){if(typeof Ki!="function")throw Error(t(280));var a=r.stateNode;a&&(a=_c(a),Ki(r.stateNode,r.type,a))}}function ur(r){Nn?cr?cr.push(r):cr=[r]:Nn=r}function _o(){if(Nn){var r=Nn,a=cr;if(cr=Nn=null,Qi(r),a)for(r=0;r<a.length;r++)Qi(a[r])}}function ei(r,a){return r(a)}function No(){}var Rr=!1;function jo(r,a,l){if(Rr)return r(a,l);Rr=!0;try{return ei(r,a,l)}finally{Rr=!1,(Nn!==null||cr!==null)&&(No(),_o())}}function dt(r,a){var l=r.stateNode;if(l===null)return null;var h=_c(l);if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,a,typeof l));return l}var Yi=!1;if(m)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Yi=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Yi=!1}function ti(r,a,l,h,f,x,N,T,F){var G=Array.prototype.slice.call(arguments,3);try{a.apply(l,G)}catch(ne){this.onError(ne)}}var ni=!1,Ji=null,On=!1,Eo=null,Id={onError:function(r){ni=!0,Ji=r}};function Xi(r,a,l,h,f,x,N,T,F){ni=!1,Ji=null,ti.apply(Id,arguments)}function Gl(r,a,l,h,f,x,N,T,F){if(Xi.apply(this,arguments),ni){if(ni){var G=Ji;ni=!1,Ji=null}else throw Error(t(198));On||(On=!0,Eo=G)}}function Fn(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function ri(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function Un(r){if(Fn(r)!==r)throw Error(t(188))}function Kl(r){var a=r.alternate;if(!a){if(a=Fn(r),a===null)throw Error(t(188));return a!==r?null:r}for(var l=r,h=a;;){var f=l.return;if(f===null)break;var x=f.alternate;if(x===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===x.child){for(x=f.child;x;){if(x===l)return Un(f),r;if(x===h)return Un(f),a;x=x.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=x;else{for(var N=!1,T=f.child;T;){if(T===l){N=!0,l=f,h=x;break}if(T===h){N=!0,h=f,l=x;break}T=T.sibling}if(!N){for(T=x.child;T;){if(T===l){N=!0,l=x,h=f;break}if(T===h){N=!0,h=x,l=f;break}T=T.sibling}if(!N)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:a}function Co(r){return r=Kl(r),r!==null?Zi(r):null}function Zi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=Zi(r);if(a!==null)return a;r=r.sibling}return null}var ea=e.unstable_scheduleCallback,Io=e.unstable_cancelCallback,Ql=e.unstable_shouldYield,Td=e.unstable_requestPaint,Qe=e.unstable_now,Yl=e.unstable_getCurrentPriorityLevel,si=e.unstable_ImmediatePriority,is=e.unstable_UserBlockingPriority,jn=e.unstable_NormalPriority,To=e.unstable_LowPriority,Jl=e.unstable_IdlePriority,ii=null,mn=null;function Xl(r){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(ii,r,void 0,(r.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:ec,ko=Math.log,Zl=Math.LN2;function ec(r){return r>>>=0,r===0?32:31-(ko(r)/Zl|0)|0}var ta=64,na=4194304;function as(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ai(r,a){var l=r.pendingLanes;if(l===0)return 0;var h=0,f=r.suspendedLanes,x=r.pingedLanes,N=l&268435455;if(N!==0){var T=N&~f;T!==0?h=as(T):(x&=N,x!==0&&(h=as(x)))}else N=l&~f,N!==0?h=as(N):x!==0&&(h=as(x));if(h===0)return 0;if(a!==0&&a!==h&&(a&f)===0&&(f=h&-h,x=a&-a,f>=x||f===16&&(x&4194240)!==0))return a;if((h&4)!==0&&(h|=l&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=h;0<a;)l=31-Yt(a),f=1<<l,h|=r[l],a&=~f;return h}function kd(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(r,a){for(var l=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,x=r.pendingLanes;0<x;){var N=31-Yt(x),T=1<<N,F=f[N];F===-1?((T&l)===0||(T&h)!==0)&&(f[N]=kd(T,a)):F<=a&&(r.expiredLanes|=T),x&=~T}}function fn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function oi(){var r=ta;return ta<<=1,(ta&4194240)===0&&(ta=64),r}function os(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function ls(r,a,l){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-Yt(a),r[a]=l}function Ke(r,a){var l=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Yt(l),x=1<<f;a[f]=0,h[f]=-1,r[f]=-1,l&=~x}}function cs(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var h=31-Yt(l),f=1<<h;f&a|r[h]&a&&(r[h]|=a),l&=~f}}var Oe=0;function us(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var tc,ra,nc,rc,sc,So=!1,dr=[],Dt=null,Bn=null,$n=null,ds=new Map,En=new Map,hr=[],Sd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ic(r,a){switch(r){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":ds.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(a.pointerId)}}function tn(r,a,l,h,f,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:x,targetContainers:[f]},a!==null&&(a=qo(a),a!==null&&ra(a)),r):(r.eventSystemFlags|=h,a=r.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),r)}function Ad(r,a,l,h,f){switch(a){case"focusin":return Dt=tn(Dt,r,a,l,h,f),!0;case"dragenter":return Bn=tn(Bn,r,a,l,h,f),!0;case"mouseover":return $n=tn($n,r,a,l,h,f),!0;case"pointerover":var x=f.pointerId;return ds.set(x,tn(ds.get(x)||null,r,a,l,h,f)),!0;case"gotpointercapture":return x=f.pointerId,En.set(x,tn(En.get(x)||null,r,a,l,h,f)),!0}return!1}function ac(r){var a=hi(r.target);if(a!==null){var l=Fn(a);if(l!==null){if(a=l.tag,a===13){if(a=ri(l),a!==null){r.blockedOn=a,sc(r.priority,function(){nc(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Lr(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=sa(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Zs=h,l.target.dispatchEvent(h),Zs=null}else return a=qo(l),a!==null&&ra(a),r.blockedOn=l,!1;a.shift()}return!0}function li(r,a,l){Lr(r)&&l.delete(a)}function oc(){So=!1,Dt!==null&&Lr(Dt)&&(Dt=null),Bn!==null&&Lr(Bn)&&(Bn=null),$n!==null&&Lr($n)&&($n=null),ds.forEach(li),En.forEach(li)}function zn(r,a){r.blockedOn===a&&(r.blockedOn=null,So||(So=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oc)))}function Hn(r){function a(f){return zn(f,r)}if(0<dr.length){zn(dr[0],r);for(var l=1;l<dr.length;l++){var h=dr[l];h.blockedOn===r&&(h.blockedOn=null)}}for(Dt!==null&&zn(Dt,r),Bn!==null&&zn(Bn,r),$n!==null&&zn($n,r),ds.forEach(a),En.forEach(a),l=0;l<hr.length;l++)h=hr[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<hr.length&&(l=hr[0],l.blockedOn===null);)ac(l),l.blockedOn===null&&hr.shift()}var Vr=K.ReactCurrentBatchConfig,hs=!0;function tt(r,a,l,h){var f=Oe,x=Vr.transition;Vr.transition=null;try{Oe=1,Ao(r,a,l,h)}finally{Oe=f,Vr.transition=x}}function Pd(r,a,l,h){var f=Oe,x=Vr.transition;Vr.transition=null;try{Oe=4,Ao(r,a,l,h)}finally{Oe=f,Vr.transition=x}}function Ao(r,a,l,h){if(hs){var f=sa(r,a,l,h);if(f===null)zd(r,a,h,ci,l),ic(r,h);else if(Ad(f,r,a,l,h))h.stopPropagation();else if(ic(r,h),a&4&&-1<Sd.indexOf(r)){for(;f!==null;){var x=qo(f);if(x!==null&&tc(x),x=sa(r,a,l,h),x===null&&zd(r,a,h,ci,l),x===f)break;f=x}f!==null&&h.stopPropagation()}else zd(r,a,h,null,l)}}var ci=null;function sa(r,a,l,h){if(ci=null,r=Gi(h),r=hi(r),r!==null)if(a=Fn(r),a===null)r=null;else if(l=a.tag,l===13){if(r=ri(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return ci=r,null}function Po(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yl()){case si:return 1;case is:return 4;case jn:case To:return 16;case Jl:return 536870912;default:return 16}default:return 16}}var pn=null,ia=null,nn=null;function Ro(){if(nn)return nn;var r,a=ia,l=a.length,h,f="value"in pn?pn.value:pn.textContent,x=f.length;for(r=0;r<l&&a[r]===f[r];r++);var N=l-r;for(h=1;h<=N&&a[l-h]===f[x-h];h++);return nn=f.slice(r,1<h?1-h:void 0)}function aa(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function mr(){return!0}function Do(){return!1}function Lt(r){function a(l,h,f,x,N){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=x,this.target=N,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(l=r[T],this[T]=l?l(x):x[T]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?mr:Do,this.isPropagationStopped=Do,this}return ce(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),a}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=Lt(qn),fr=ce({},qn,{view:0,detail:0}),Rd=Lt(fr),la,Mr,ms,ui=ce({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ms&&(ms&&r.type==="mousemove"?(la=r.screenX-ms.screenX,Mr=r.screenY-ms.screenY):Mr=la=0,ms=r),la)},movementY:function(r){return"movementY"in r?r.movementY:Mr}}),ca=Lt(ui),Lo=ce({},ui,{dataTransfer:0}),lc=Lt(Lo),ua=ce({},fr,{relatedTarget:0}),da=Lt(ua),cc=ce({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Or=Lt(cc),uc=ce({},qn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),dc=Lt(uc),hc=ce({},qn,{data:0}),Vo=Lt(hc),ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=mc[r])?!!a[r]:!1}function pr(){return fc}var u=ce({},fr,{key:function(r){if(r.key){var a=ha[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=aa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(r){return r.type==="keypress"?aa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?aa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),y=Lt(u),w=ce({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j=Lt(w),z=ce({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),Y=Lt(z),le=ce({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Lt(le),jt=ce({},ui,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Lt(jt),kt=[9,13,27,32],pt=m&&"CompositionEvent"in window,Cn=null;m&&"documentMode"in document&&(Cn=document.documentMode);var gn=m&&"TextEvent"in window&&!Cn,di=m&&(!pt||Cn&&8<Cn&&11>=Cn),ma=" ",lp=!1;function cp(r,a){switch(r){case"keyup":return kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fa=!1;function Mw(r,a){switch(r){case"compositionend":return up(a);case"keypress":return a.which!==32?null:(lp=!0,ma);case"textInput":return r=a.data,r===ma&&lp?null:r;default:return null}}function Ow(r,a){if(fa)return r==="compositionend"||!pt&&cp(r,a)?(r=Ro(),nn=ia=pn=null,fa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return di&&a.locale!=="ko"?null:a.data;default:return null}}var Fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Fw[r.type]:a==="textarea"}function hp(r,a,l,h){ur(h),a=vc(a,"onChange"),0<a.length&&(l=new oa("onChange","change",null,l,h),r.push({event:l,listeners:a}))}var Mo=null,Oo=null;function Uw(r){Sp(r,0)}function pc(r){var a=va(r);if(rs(a))return r}function Bw(r,a){if(r==="change")return a}var mp=!1;if(m){var Dd;if(m){var Ld="oninput"in document;if(!Ld){var fp=document.createElement("div");fp.setAttribute("oninput","return;"),Ld=typeof fp.oninput=="function"}Dd=Ld}else Dd=!1;mp=Dd&&(!document.documentMode||9<document.documentMode)}function pp(){Mo&&(Mo.detachEvent("onpropertychange",gp),Oo=Mo=null)}function gp(r){if(r.propertyName==="value"&&pc(Oo)){var a=[];hp(a,Oo,r,Gi(r)),jo(Uw,a)}}function $w(r,a,l){r==="focusin"?(pp(),Mo=a,Oo=l,Mo.attachEvent("onpropertychange",gp)):r==="focusout"&&pp()}function zw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pc(Oo)}function Hw(r,a){if(r==="click")return pc(a)}function qw(r,a){if(r==="input"||r==="change")return pc(a)}function Ww(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Wn=typeof Object.is=="function"?Object.is:Ww;function Fo(r,a){if(Wn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(a,f)||!Wn(r[f],a[f]))return!1}return!0}function yp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xp(r,a){var l=yp(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=a&&h>=a)return{node:l,offset:a-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yp(l)}}function vp(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?vp(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function wp(){for(var r=window,a=lr();a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=lr(r.document)}return a}function Vd(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function Gw(r){var a=wp(),l=r.focusedElem,h=r.selectionRange;if(a!==l&&l&&l.ownerDocument&&vp(l.ownerDocument.documentElement,l)){if(h!==null&&Vd(l)){if(a=h.start,r=h.end,r===void 0&&(r=a),"selectionStart"in l)l.selectionStart=a,l.selectionEnd=Math.min(r,l.value.length);else if(r=(a=l.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,x=Math.min(h.start,f);h=h.end===void 0?x:Math.min(h.end,f),!r.extend&&x>h&&(f=h,h=x,x=f),f=xp(l,x);var N=xp(l,h);f&&N&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==N.node||r.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(f.node,f.offset),r.removeAllRanges(),x>h?(r.addRange(a),r.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),r.addRange(a)))}}for(a=[],r=l;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<a.length;l++)r=a[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Kw=m&&"documentMode"in document&&11>=document.documentMode,pa=null,Md=null,Uo=null,Od=!1;function bp(r,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Od||pa==null||pa!==lr(h)||(h=pa,"selectionStart"in h&&Vd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Uo&&Fo(Uo,h)||(Uo=h,h=vc(Md,"onSelect"),0<h.length&&(a=new oa("onSelect","select",null,a,l),r.push({event:a,listeners:h}),a.target=pa)))}function gc(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var ga={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},Fd={},_p={};m&&(_p=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function yc(r){if(Fd[r])return Fd[r];if(!ga[r])return r;var a=ga[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in _p)return Fd[r]=a[l];return r}var Np=yc("animationend"),jp=yc("animationiteration"),Ep=yc("animationstart"),Cp=yc("transitionend"),Ip=new Map,Tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(r,a){Ip.set(r,a),c(a,[r])}for(var Ud=0;Ud<Tp.length;Ud++){var Bd=Tp[Ud],Qw=Bd.toLowerCase(),Yw=Bd[0].toUpperCase()+Bd.slice(1);fs(Qw,"on"+Yw)}fs(Np,"onAnimationEnd"),fs(jp,"onAnimationIteration"),fs(Ep,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(Cp,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function kp(r,a,l){var h=r.type||"unknown-event";r.currentTarget=l,Gl(h,a,void 0,r),r.currentTarget=null}function Sp(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],f=h.event;h=h.listeners;e:{var x=void 0;if(a)for(var N=h.length-1;0<=N;N--){var T=h[N],F=T.instance,G=T.currentTarget;if(T=T.listener,F!==x&&f.isPropagationStopped())break e;kp(f,T,G),x=F}else for(N=0;N<h.length;N++){if(T=h[N],F=T.instance,G=T.currentTarget,T=T.listener,F!==x&&f.isPropagationStopped())break e;kp(f,T,G),x=F}}}if(On)throw r=Eo,On=!1,Eo=null,r}function Xe(r,a){var l=a[Qd];l===void 0&&(l=a[Qd]=new Set);var h=r+"__bubble";l.has(h)||(Ap(a,r,2,!1),l.add(h))}function $d(r,a,l){var h=0;a&&(h|=4),Ap(l,r,h,a)}var xc="_reactListening"+Math.random().toString(36).slice(2);function $o(r){if(!r[xc]){r[xc]=!0,i.forEach(function(l){l!=="selectionchange"&&(Jw.has(l)||$d(l,!1,r),$d(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[xc]||(a[xc]=!0,$d("selectionchange",!1,a))}}function Ap(r,a,l,h){switch(Po(a)){case 1:var f=tt;break;case 4:f=Pd;break;default:f=Ao}l=f.bind(null,a,l,r),f=void 0,!Yi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(a,l,{capture:!0,passive:f}):r.addEventListener(a,l,!0):f!==void 0?r.addEventListener(a,l,{passive:f}):r.addEventListener(a,l,!1)}function zd(r,a,l,h,f){var x=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var N=h.tag;if(N===3||N===4){var T=h.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(N===4)for(N=h.return;N!==null;){var F=N.tag;if((F===3||F===4)&&(F=N.stateNode.containerInfo,F===f||F.nodeType===8&&F.parentNode===f))return;N=N.return}for(;T!==null;){if(N=hi(T),N===null)return;if(F=N.tag,F===5||F===6){h=x=N;continue e}T=T.parentNode}}h=h.return}jo(function(){var G=x,ne=Gi(l),se=[];e:{var te=Ip.get(r);if(te!==void 0){var de=oa,fe=r;switch(r){case"keypress":if(aa(l)===0)break e;case"keydown":case"keyup":de=y;break;case"focusin":fe="focus",de=da;break;case"focusout":fe="blur",de=da;break;case"beforeblur":case"afterblur":de=da;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Y;break;case Np:case jp:case Ep:de=Or;break;case Cp:de=We;break;case"scroll":de=Rd;break;case"wheel":de=Fe;break;case"copy":case"cut":case"paste":de=dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=j}var pe=(a&4)!==0,ht=!pe&&r==="scroll",H=pe?te!==null?te+"Capture":null:te;pe=[];for(var B=G,W;B!==null;){W=B;var ae=W.stateNode;if(W.tag===5&&ae!==null&&(W=ae,H!==null&&(ae=dt(B,H),ae!=null&&pe.push(zo(B,ae,W)))),ht)break;B=B.return}0<pe.length&&(te=new de(te,fe,null,l,ne),se.push({event:te,listeners:pe}))}}if((a&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",de=r==="mouseout"||r==="pointerout",te&&l!==Zs&&(fe=l.relatedTarget||l.fromElement)&&(hi(fe)||fe[Fr]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(fe=l.relatedTarget||l.toElement,de=G,fe=fe?hi(fe):null,fe!==null&&(ht=Fn(fe),fe!==ht||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(de=null,fe=G),de!==fe)){if(pe=ca,ae="onMouseLeave",H="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(pe=j,ae="onPointerLeave",H="onPointerEnter",B="pointer"),ht=de==null?te:va(de),W=fe==null?te:va(fe),te=new pe(ae,B+"leave",de,l,ne),te.target=ht,te.relatedTarget=W,ae=null,hi(ne)===G&&(pe=new pe(H,B+"enter",fe,l,ne),pe.target=W,pe.relatedTarget=ht,ae=pe),ht=ae,de&&fe)t:{for(pe=de,H=fe,B=0,W=pe;W;W=ya(W))B++;for(W=0,ae=H;ae;ae=ya(ae))W++;for(;0<B-W;)pe=ya(pe),B--;for(;0<W-B;)H=ya(H),W--;for(;B--;){if(pe===H||H!==null&&pe===H.alternate)break t;pe=ya(pe),H=ya(H)}pe=null}else pe=null;de!==null&&Pp(se,te,de,pe,!1),fe!==null&&ht!==null&&Pp(se,ht,fe,pe,!0)}}e:{if(te=G?va(G):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var ge=Bw;else if(dp(te))if(mp)ge=qw;else{ge=zw;var we=$w}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ge=Hw);if(ge&&(ge=ge(r,G))){hp(se,ge,l,ne);break e}we&&we(r,te,G),r==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&Hi(te,"number",te.value)}switch(we=G?va(G):window,r){case"focusin":(dp(we)||we.contentEditable==="true")&&(pa=we,Md=G,Uo=null);break;case"focusout":Uo=Md=pa=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,bp(se,l,ne);break;case"selectionchange":if(Kw)break;case"keydown":case"keyup":bp(se,l,ne)}var be;if(pt)e:{switch(r){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else fa?cp(r,l)&&(Ce="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(di&&l.locale!=="ko"&&(fa||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&fa&&(be=Ro()):(pn=ne,ia="value"in pn?pn.value:pn.textContent,fa=!0)),we=vc(G,Ce),0<we.length&&(Ce=new Vo(Ce,r,null,l,ne),se.push({event:Ce,listeners:we}),be?Ce.data=be:(be=up(l),be!==null&&(Ce.data=be)))),(be=gn?Mw(r,l):Ow(r,l))&&(G=vc(G,"onBeforeInput"),0<G.length&&(ne=new Vo("onBeforeInput","beforeinput",null,l,ne),se.push({event:ne,listeners:G}),ne.data=be))}Sp(se,a)})}function zo(r,a,l){return{instance:r,listener:a,currentTarget:l}}function vc(r,a){for(var l=a+"Capture",h=[];r!==null;){var f=r,x=f.stateNode;f.tag===5&&x!==null&&(f=x,x=dt(r,l),x!=null&&h.unshift(zo(r,x,f)),x=dt(r,a),x!=null&&h.push(zo(r,x,f))),r=r.return}return h}function ya(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Pp(r,a,l,h,f){for(var x=a._reactName,N=[];l!==null&&l!==h;){var T=l,F=T.alternate,G=T.stateNode;if(F!==null&&F===h)break;T.tag===5&&G!==null&&(T=G,f?(F=dt(l,x),F!=null&&N.unshift(zo(l,F,T))):f||(F=dt(l,x),F!=null&&N.push(zo(l,F,T)))),l=l.return}N.length!==0&&r.push({event:a,listeners:N})}var Xw=/\r\n?/g,Zw=/\u0000|\uFFFD/g;function Rp(r){return(typeof r=="string"?r:""+r).replace(Xw,`
`).replace(Zw,"")}function wc(r,a,l){if(a=Rp(a),Rp(r)!==a&&l)throw Error(t(425))}function bc(){}var Hd=null,qd=null;function Wd(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Gd=typeof setTimeout=="function"?setTimeout:void 0,eb=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,tb=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(r){return Dp.resolve(null).then(r).catch(nb)}:Gd;function nb(r){setTimeout(function(){throw r})}function Kd(r,a){var l=a,h=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){r.removeChild(f),Hn(a);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Hn(a)}function ps(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function Lp(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}var xa=Math.random().toString(36).slice(2),gr="__reactFiber$"+xa,Ho="__reactProps$"+xa,Fr="__reactContainer$"+xa,Qd="__reactEvents$"+xa,rb="__reactListeners$"+xa,sb="__reactHandles$"+xa;function hi(r){var a=r[gr];if(a)return a;for(var l=r.parentNode;l;){if(a=l[Fr]||l[gr]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=Lp(r);r!==null;){if(l=r[gr])return l;r=Lp(r)}return a}r=l,l=r.parentNode}return null}function qo(r){return r=r[gr]||r[Fr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function va(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function _c(r){return r[Ho]||null}var Yd=[],wa=-1;function gs(r){return{current:r}}function Ze(r){0>wa||(r.current=Yd[wa],Yd[wa]=null,wa--)}function Ye(r,a){wa++,Yd[wa]=r.current,r.current=a}var ys={},Bt=gs(ys),rn=gs(!1),mi=ys;function ba(r,a){var l=r.type.contextTypes;if(!l)return ys;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===a)return h.__reactInternalMemoizedMaskedChildContext;var f={},x;for(x in l)f[x]=a[x];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=f),f}function sn(r){return r=r.childContextTypes,r!=null}function Nc(){Ze(rn),Ze(Bt)}function Vp(r,a,l){if(Bt.current!==ys)throw Error(t(168));Ye(Bt,a),Ye(rn,l)}function Mp(r,a,l){var h=r.stateNode;if(a=a.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in a))throw Error(t(108,Be(r)||"Unknown",f));return ce({},l,h)}function jc(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ys,mi=Bt.current,Ye(Bt,r),Ye(rn,rn.current),!0}function Op(r,a,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=Mp(r,a,mi),h.__reactInternalMemoizedMergedChildContext=r,Ze(rn),Ze(Bt),Ye(Bt,r)):Ze(rn),Ye(rn,l)}var Ur=null,Ec=!1,Jd=!1;function Fp(r){Ur===null?Ur=[r]:Ur.push(r)}function ib(r){Ec=!0,Fp(r)}function xs(){if(!Jd&&Ur!==null){Jd=!0;var r=0,a=Oe;try{var l=Ur;for(Oe=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}Ur=null,Ec=!1}catch(f){throw Ur!==null&&(Ur=Ur.slice(r+1)),ea(si,xs),f}finally{Oe=a,Jd=!1}}return null}var _a=[],Na=0,Cc=null,Ic=0,In=[],Tn=0,fi=null,Br=1,$r="";function pi(r,a){_a[Na++]=Ic,_a[Na++]=Cc,Cc=r,Ic=a}function Up(r,a,l){In[Tn++]=Br,In[Tn++]=$r,In[Tn++]=fi,fi=r;var h=Br;r=$r;var f=32-Yt(h)-1;h&=~(1<<f),l+=1;var x=32-Yt(a)+f;if(30<x){var N=f-f%5;x=(h&(1<<N)-1).toString(32),h>>=N,f-=N,Br=1<<32-Yt(a)+f|l<<f|h,$r=x+r}else Br=1<<x|l<<f|h,$r=r}function Xd(r){r.return!==null&&(pi(r,1),Up(r,1,0))}function Zd(r){for(;r===Cc;)Cc=_a[--Na],_a[Na]=null,Ic=_a[--Na],_a[Na]=null;for(;r===fi;)fi=In[--Tn],In[Tn]=null,$r=In[--Tn],In[Tn]=null,Br=In[--Tn],In[Tn]=null}var yn=null,xn=null,nt=!1,Gn=null;function Bp(r,a){var l=Pn(5,null,null,0);l.elementType="DELETED",l.stateNode=a,l.return=r,a=r.deletions,a===null?(r.deletions=[l],r.flags|=16):a.push(l)}function $p(r,a){switch(r.tag){case 5:var l=r.type;return a=a.nodeType!==1||l.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,yn=r,xn=ps(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,yn=r,xn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(l=fi!==null?{id:Br,overflow:$r}:null,r.memoizedState={dehydrated:a,treeContext:l,retryLane:1073741824},l=Pn(18,null,null,0),l.stateNode=a,l.return=r,r.child=l,yn=r,xn=null,!0):!1;default:return!1}}function eh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function th(r){if(nt){var a=xn;if(a){var l=a;if(!$p(r,a)){if(eh(r))throw Error(t(418));a=ps(l.nextSibling);var h=yn;a&&$p(r,a)?Bp(h,l):(r.flags=r.flags&-4097|2,nt=!1,yn=r)}}else{if(eh(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,yn=r}}}function zp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yn=r}function Tc(r){if(r!==yn)return!1;if(!nt)return zp(r),nt=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!Wd(r.type,r.memoizedProps)),a&&(a=xn)){if(eh(r))throw Hp(),Error(t(418));for(;a;)Bp(r,a),a=ps(a.nextSibling)}if(zp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(a===0){xn=ps(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++}r=r.nextSibling}xn=null}}else xn=yn?ps(r.stateNode.nextSibling):null;return!0}function Hp(){for(var r=xn;r;)r=ps(r.nextSibling)}function ja(){xn=yn=null,nt=!1}function nh(r){Gn===null?Gn=[r]:Gn.push(r)}var ab=K.ReactCurrentBatchConfig;function Wo(r,a,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var f=h,x=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(N){var T=f.refs;N===null?delete T[x]:T[x]=N},a._stringRef=x,a)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function kc(r,a){throw r=Object.prototype.toString.call(a),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function qp(r){var a=r._init;return a(r._payload)}function Wp(r){function a(H,B){if(r){var W=H.deletions;W===null?(H.deletions=[B],H.flags|=16):W.push(B)}}function l(H,B){if(!r)return null;for(;B!==null;)a(H,B),B=B.sibling;return null}function h(H,B){for(H=new Map;B!==null;)B.key!==null?H.set(B.key,B):H.set(B.index,B),B=B.sibling;return H}function f(H,B){return H=Cs(H,B),H.index=0,H.sibling=null,H}function x(H,B,W){return H.index=W,r?(W=H.alternate,W!==null?(W=W.index,W<B?(H.flags|=2,B):W):(H.flags|=2,B)):(H.flags|=1048576,B)}function N(H){return r&&H.alternate===null&&(H.flags|=2),H}function T(H,B,W,ae){return B===null||B.tag!==6?(B=Gh(W,H.mode,ae),B.return=H,B):(B=f(B,W),B.return=H,B)}function F(H,B,W,ae){var ge=W.type;return ge===E?ne(H,B,W.props.children,ae,W.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===et&&qp(ge)===B.type)?(ae=f(B,W.props),ae.ref=Wo(H,B,W),ae.return=H,ae):(ae=Zc(W.type,W.key,W.props,null,H.mode,ae),ae.ref=Wo(H,B,W),ae.return=H,ae)}function G(H,B,W,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=Kh(W,H.mode,ae),B.return=H,B):(B=f(B,W.children||[]),B.return=H,B)}function ne(H,B,W,ae,ge){return B===null||B.tag!==7?(B=Ni(W,H.mode,ae,ge),B.return=H,B):(B=f(B,W),B.return=H,B)}function se(H,B,W){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Gh(""+B,H.mode,W),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case X:return W=Zc(B.type,B.key,B.props,null,H.mode,W),W.ref=Wo(H,null,B),W.return=H,W;case re:return B=Kh(B,H.mode,W),B.return=H,B;case et:var ae=B._init;return se(H,ae(B._payload),W)}if(Sr(B)||Q(B))return B=Ni(B,H.mode,W,null),B.return=H,B;kc(H,B)}return null}function te(H,B,W,ae){var ge=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ge!==null?null:T(H,B,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case X:return W.key===ge?F(H,B,W,ae):null;case re:return W.key===ge?G(H,B,W,ae):null;case et:return ge=W._init,te(H,B,ge(W._payload),ae)}if(Sr(W)||Q(W))return ge!==null?null:ne(H,B,W,ae,null);kc(H,W)}return null}function de(H,B,W,ae,ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return H=H.get(W)||null,T(B,H,""+ae,ge);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case X:return H=H.get(ae.key===null?W:ae.key)||null,F(B,H,ae,ge);case re:return H=H.get(ae.key===null?W:ae.key)||null,G(B,H,ae,ge);case et:var we=ae._init;return de(H,B,W,we(ae._payload),ge)}if(Sr(ae)||Q(ae))return H=H.get(W)||null,ne(B,H,ae,ge,null);kc(B,ae)}return null}function fe(H,B,W,ae){for(var ge=null,we=null,be=B,Ce=B=0,Pt=null;be!==null&&Ce<W.length;Ce++){be.index>Ce?(Pt=be,be=null):Pt=be.sibling;var He=te(H,be,W[Ce],ae);if(He===null){be===null&&(be=Pt);break}r&&be&&He.alternate===null&&a(H,be),B=x(He,B,Ce),we===null?ge=He:we.sibling=He,we=He,be=Pt}if(Ce===W.length)return l(H,be),nt&&pi(H,Ce),ge;if(be===null){for(;Ce<W.length;Ce++)be=se(H,W[Ce],ae),be!==null&&(B=x(be,B,Ce),we===null?ge=be:we.sibling=be,we=be);return nt&&pi(H,Ce),ge}for(be=h(H,be);Ce<W.length;Ce++)Pt=de(be,H,Ce,W[Ce],ae),Pt!==null&&(r&&Pt.alternate!==null&&be.delete(Pt.key===null?Ce:Pt.key),B=x(Pt,B,Ce),we===null?ge=Pt:we.sibling=Pt,we=Pt);return r&&be.forEach(function(Is){return a(H,Is)}),nt&&pi(H,Ce),ge}function pe(H,B,W,ae){var ge=Q(W);if(typeof ge!="function")throw Error(t(150));if(W=ge.call(W),W==null)throw Error(t(151));for(var we=ge=null,be=B,Ce=B=0,Pt=null,He=W.next();be!==null&&!He.done;Ce++,He=W.next()){be.index>Ce?(Pt=be,be=null):Pt=be.sibling;var Is=te(H,be,He.value,ae);if(Is===null){be===null&&(be=Pt);break}r&&be&&Is.alternate===null&&a(H,be),B=x(Is,B,Ce),we===null?ge=Is:we.sibling=Is,we=Is,be=Pt}if(He.done)return l(H,be),nt&&pi(H,Ce),ge;if(be===null){for(;!He.done;Ce++,He=W.next())He=se(H,He.value,ae),He!==null&&(B=x(He,B,Ce),we===null?ge=He:we.sibling=He,we=He);return nt&&pi(H,Ce),ge}for(be=h(H,be);!He.done;Ce++,He=W.next())He=de(be,H,Ce,He.value,ae),He!==null&&(r&&He.alternate!==null&&be.delete(He.key===null?Ce:He.key),B=x(He,B,Ce),we===null?ge=He:we.sibling=He,we=He);return r&&be.forEach(function(Fb){return a(H,Fb)}),nt&&pi(H,Ce),ge}function ht(H,B,W,ae){if(typeof W=="object"&&W!==null&&W.type===E&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case X:e:{for(var ge=W.key,we=B;we!==null;){if(we.key===ge){if(ge=W.type,ge===E){if(we.tag===7){l(H,we.sibling),B=f(we,W.props.children),B.return=H,H=B;break e}}else if(we.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===et&&qp(ge)===we.type){l(H,we.sibling),B=f(we,W.props),B.ref=Wo(H,we,W),B.return=H,H=B;break e}l(H,we);break}else a(H,we);we=we.sibling}W.type===E?(B=Ni(W.props.children,H.mode,ae,W.key),B.return=H,H=B):(ae=Zc(W.type,W.key,W.props,null,H.mode,ae),ae.ref=Wo(H,B,W),ae.return=H,H=ae)}return N(H);case re:e:{for(we=W.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){l(H,B.sibling),B=f(B,W.children||[]),B.return=H,H=B;break e}else{l(H,B);break}else a(H,B);B=B.sibling}B=Kh(W,H.mode,ae),B.return=H,H=B}return N(H);case et:return we=W._init,ht(H,B,we(W._payload),ae)}if(Sr(W))return fe(H,B,W,ae);if(Q(W))return pe(H,B,W,ae);kc(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,B!==null&&B.tag===6?(l(H,B.sibling),B=f(B,W),B.return=H,H=B):(l(H,B),B=Gh(W,H.mode,ae),B.return=H,H=B),N(H)):l(H,B)}return ht}var Ea=Wp(!0),Gp=Wp(!1),Sc=gs(null),Ac=null,Ca=null,rh=null;function sh(){rh=Ca=Ac=null}function ih(r){var a=Sc.current;Ze(Sc),r._currentValue=a}function ah(r,a,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),r===l)break;r=r.return}}function Ia(r,a){Ac=r,rh=Ca=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(an=!0),r.firstContext=null)}function kn(r){var a=r._currentValue;if(rh!==r)if(r={context:r,memoizedValue:a,next:null},Ca===null){if(Ac===null)throw Error(t(308));Ca=r,Ac.dependencies={lanes:0,firstContext:r}}else Ca=Ca.next=r;return a}var gi=null;function oh(r){gi===null?gi=[r]:gi.push(r)}function Kp(r,a,l,h){var f=a.interleaved;return f===null?(l.next=l,oh(a)):(l.next=f.next,f.next=l),a.interleaved=l,zr(r,h)}function zr(r,a){r.lanes|=a;var l=r.alternate;for(l!==null&&(l.lanes|=a),l=r,r=r.return;r!==null;)r.childLanes|=a,l=r.alternate,l!==null&&(l.childLanes|=a),l=r,r=r.return;return l.tag===3?l.stateNode:null}var vs=!1;function lh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Hr(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function ws(r,a,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(ze&2)!==0){var f=h.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),h.pending=a,zr(r,l)}return f=h.interleaved,f===null?(a.next=a,oh(h)):(a.next=f.next,f.next=a),h.interleaved=a,zr(r,l)}function Pc(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194240)!==0)){var h=a.lanes;h&=r.pendingLanes,l|=h,a.lanes=l,cs(r,l)}}function Yp(r,a){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var N={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};x===null?f=x=N:x=x.next=N,l=l.next}while(l!==null);x===null?f=x=a:x=x.next=a}else f=x=a;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:x,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}function Rc(r,a,l,h){var f=r.updateQueue;vs=!1;var x=f.firstBaseUpdate,N=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var F=T,G=F.next;F.next=null,N===null?x=G:N.next=G,N=F;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==N&&(T===null?ne.firstBaseUpdate=G:T.next=G,ne.lastBaseUpdate=F))}if(x!==null){var se=f.baseState;N=0,ne=G=F=null,T=x;do{var te=T.lane,de=T.eventTime;if((h&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var fe=r,pe=T;switch(te=a,de=l,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){se=fe.call(de,se,te);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,te=typeof fe=="function"?fe.call(de,se,te):fe,te==null)break e;se=ce({},se,te);break e;case 2:vs=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,te=f.effects,te===null?f.effects=[T]:te.push(T))}else de={eventTime:de,lane:te,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(G=ne=de,F=se):ne=ne.next=de,N|=te;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;te=T,T=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);if(ne===null&&(F=se),f.baseState=F,f.firstBaseUpdate=G,f.lastBaseUpdate=ne,a=f.shared.interleaved,a!==null){f=a;do N|=f.lane,f=f.next;while(f!==a)}else x===null&&(f.shared.lanes=0);vi|=N,r.lanes=N,r.memoizedState=se}}function Jp(r,a,l){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var h=r[a],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Go={},yr=gs(Go),Ko=gs(Go),Qo=gs(Go);function yi(r){if(r===Go)throw Error(t(174));return r}function ch(r,a){switch(Ye(Qo,a),Ye(Ko,r),Ye(yr,Go),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Nt(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=Nt(a,r)}Ze(yr),Ye(yr,a)}function Ta(){Ze(yr),Ze(Ko),Ze(Qo)}function Xp(r){yi(Qo.current);var a=yi(yr.current),l=Nt(a,r.type);a!==l&&(Ye(Ko,r),Ye(yr,l))}function uh(r){Ko.current===r&&(Ze(yr),Ze(Ko))}var st=gs(0);function Dc(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var dh=[];function hh(){for(var r=0;r<dh.length;r++)dh[r]._workInProgressVersionPrimary=null;dh.length=0}var Lc=K.ReactCurrentDispatcher,mh=K.ReactCurrentBatchConfig,xi=0,it=null,Et=null,St=null,Vc=!1,Yo=!1,Jo=0,ob=0;function $t(){throw Error(t(321))}function fh(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Wn(r[l],a[l]))return!1;return!0}function ph(r,a,l,h,f,x){if(xi=x,it=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Lc.current=r===null||r.memoizedState===null?db:hb,r=l(h,f),Yo){x=0;do{if(Yo=!1,Jo=0,25<=x)throw Error(t(301));x+=1,St=Et=null,a.updateQueue=null,Lc.current=mb,r=l(h,f)}while(Yo)}if(Lc.current=Fc,a=Et!==null&&Et.next!==null,xi=0,St=Et=it=null,Vc=!1,a)throw Error(t(300));return r}function gh(){var r=Jo!==0;return Jo=0,r}function xr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?it.memoizedState=St=r:St=St.next=r,St}function Sn(){if(Et===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var a=St===null?it.memoizedState:St.next;if(a!==null)St=a,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},St===null?it.memoizedState=St=r:St=St.next=r}return St}function Xo(r,a){return typeof a=="function"?a(r):a}function yh(r){var a=Sn(),l=a.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=Et,f=h.baseQueue,x=l.pending;if(x!==null){if(f!==null){var N=f.next;f.next=x.next,x.next=N}h.baseQueue=f=x,l.pending=null}if(f!==null){x=f.next,h=h.baseState;var T=N=null,F=null,G=x;do{var ne=G.lane;if((xi&ne)===ne)F!==null&&(F=F.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),h=G.hasEagerState?G.eagerState:r(h,G.action);else{var se={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};F===null?(T=F=se,N=h):F=F.next=se,it.lanes|=ne,vi|=ne}G=G.next}while(G!==null&&G!==x);F===null?N=h:F.next=T,Wn(h,a.memoizedState)||(an=!0),a.memoizedState=h,a.baseState=N,a.baseQueue=F,l.lastRenderedState=h}if(r=l.interleaved,r!==null){f=r;do x=f.lane,it.lanes|=x,vi|=x,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[a.memoizedState,l.dispatch]}function xh(r){var a=Sn(),l=a.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,f=l.pending,x=a.memoizedState;if(f!==null){l.pending=null;var N=f=f.next;do x=r(x,N.action),N=N.next;while(N!==f);Wn(x,a.memoizedState)||(an=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),l.lastRenderedState=x}return[x,h]}function Zp(){}function eg(r,a){var l=it,h=Sn(),f=a(),x=!Wn(h.memoizedState,f);if(x&&(h.memoizedState=f,an=!0),h=h.queue,vh(rg.bind(null,l,h,r),[r]),h.getSnapshot!==a||x||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Zo(9,ng.bind(null,l,h,f,a),void 0,null),At===null)throw Error(t(349));(xi&30)!==0||tg(l,a,f)}return f}function tg(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=it.updateQueue,a===null?(a={lastEffect:null,stores:null},it.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function ng(r,a,l,h){a.value=l,a.getSnapshot=h,sg(a)&&ig(r)}function rg(r,a,l){return l(function(){sg(a)&&ig(r)})}function sg(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Wn(r,l)}catch{return!0}}function ig(r){var a=zr(r,1);a!==null&&Jn(a,r,1,-1)}function ag(r){var a=xr();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:r},a.queue=r,r=r.dispatch=ub.bind(null,it,r),[a.memoizedState,r]}function Zo(r,a,l,h){return r={tag:r,create:a,destroy:l,deps:h,next:null},a=it.updateQueue,a===null?(a={lastEffect:null,stores:null},it.updateQueue=a,a.lastEffect=r.next=r):(l=a.lastEffect,l===null?a.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,a.lastEffect=r)),r}function og(){return Sn().memoizedState}function Mc(r,a,l,h){var f=xr();it.flags|=r,f.memoizedState=Zo(1|a,l,void 0,h===void 0?null:h)}function Oc(r,a,l,h){var f=Sn();h=h===void 0?null:h;var x=void 0;if(Et!==null){var N=Et.memoizedState;if(x=N.destroy,h!==null&&fh(h,N.deps)){f.memoizedState=Zo(a,l,x,h);return}}it.flags|=r,f.memoizedState=Zo(1|a,l,x,h)}function lg(r,a){return Mc(8390656,8,r,a)}function vh(r,a){return Oc(2048,8,r,a)}function cg(r,a){return Oc(4,2,r,a)}function ug(r,a){return Oc(4,4,r,a)}function dg(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function hg(r,a,l){return l=l!=null?l.concat([r]):null,Oc(4,4,dg.bind(null,a,r),l)}function wh(){}function mg(r,a){var l=Sn();a=a===void 0?null:a;var h=l.memoizedState;return h!==null&&a!==null&&fh(a,h[1])?h[0]:(l.memoizedState=[r,a],r)}function fg(r,a){var l=Sn();a=a===void 0?null:a;var h=l.memoizedState;return h!==null&&a!==null&&fh(a,h[1])?h[0]:(r=r(),l.memoizedState=[r,a],r)}function pg(r,a,l){return(xi&21)===0?(r.baseState&&(r.baseState=!1,an=!0),r.memoizedState=l):(Wn(l,a)||(l=oi(),it.lanes|=l,vi|=l,r.baseState=!0),a)}function lb(r,a){var l=Oe;Oe=l!==0&&4>l?l:4,r(!0);var h=mh.transition;mh.transition={};try{r(!1),a()}finally{Oe=l,mh.transition=h}}function gg(){return Sn().memoizedState}function cb(r,a,l){var h=js(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},yg(r))xg(a,l);else if(l=Kp(r,a,l,h),l!==null){var f=Zt();Jn(l,r,h,f),vg(l,a,h)}}function ub(r,a,l){var h=js(r),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(yg(r))xg(a,f);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var N=a.lastRenderedState,T=x(N,l);if(f.hasEagerState=!0,f.eagerState=T,Wn(T,N)){var F=a.interleaved;F===null?(f.next=f,oh(a)):(f.next=F.next,F.next=f),a.interleaved=f;return}}catch{}finally{}l=Kp(r,a,f,h),l!==null&&(f=Zt(),Jn(l,r,h,f),vg(l,a,h))}}function yg(r){var a=r.alternate;return r===it||a!==null&&a===it}function xg(r,a){Yo=Vc=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function vg(r,a,l){if((l&4194240)!==0){var h=a.lanes;h&=r.pendingLanes,l|=h,a.lanes=l,cs(r,l)}}var Fc={readContext:kn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},db={readContext:kn,useCallback:function(r,a){return xr().memoizedState=[r,a===void 0?null:a],r},useContext:kn,useEffect:lg,useImperativeHandle:function(r,a,l){return l=l!=null?l.concat([r]):null,Mc(4194308,4,dg.bind(null,a,r),l)},useLayoutEffect:function(r,a){return Mc(4194308,4,r,a)},useInsertionEffect:function(r,a){return Mc(4,2,r,a)},useMemo:function(r,a){var l=xr();return a=a===void 0?null:a,r=r(),l.memoizedState=[r,a],r},useReducer:function(r,a,l){var h=xr();return a=l!==void 0?l(a):a,h.memoizedState=h.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},h.queue=r,r=r.dispatch=cb.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var a=xr();return r={current:r},a.memoizedState=r},useState:ag,useDebugValue:wh,useDeferredValue:function(r){return xr().memoizedState=r},useTransition:function(){var r=ag(!1),a=r[0];return r=lb.bind(null,r[1]),xr().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,l){var h=it,f=xr();if(nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=a(),At===null)throw Error(t(349));(xi&30)!==0||tg(h,a,l)}f.memoizedState=l;var x={value:l,getSnapshot:a};return f.queue=x,lg(rg.bind(null,h,x,r),[r]),h.flags|=2048,Zo(9,ng.bind(null,h,x,l,a),void 0,null),l},useId:function(){var r=xr(),a=At.identifierPrefix;if(nt){var l=$r,h=Br;l=(h&~(1<<32-Yt(h)-1)).toString(32)+l,a=":"+a+"R"+l,l=Jo++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=ob++,a=":"+a+"r"+l.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},hb={readContext:kn,useCallback:mg,useContext:kn,useEffect:vh,useImperativeHandle:hg,useInsertionEffect:cg,useLayoutEffect:ug,useMemo:fg,useReducer:yh,useRef:og,useState:function(){return yh(Xo)},useDebugValue:wh,useDeferredValue:function(r){var a=Sn();return pg(a,Et.memoizedState,r)},useTransition:function(){var r=yh(Xo)[0],a=Sn().memoizedState;return[r,a]},useMutableSource:Zp,useSyncExternalStore:eg,useId:gg,unstable_isNewReconciler:!1},mb={readContext:kn,useCallback:mg,useContext:kn,useEffect:vh,useImperativeHandle:hg,useInsertionEffect:cg,useLayoutEffect:ug,useMemo:fg,useReducer:xh,useRef:og,useState:function(){return xh(Xo)},useDebugValue:wh,useDeferredValue:function(r){var a=Sn();return Et===null?a.memoizedState=r:pg(a,Et.memoizedState,r)},useTransition:function(){var r=xh(Xo)[0],a=Sn().memoizedState;return[r,a]},useMutableSource:Zp,useSyncExternalStore:eg,useId:gg,unstable_isNewReconciler:!1};function Kn(r,a){if(r&&r.defaultProps){a=ce({},a),r=r.defaultProps;for(var l in r)a[l]===void 0&&(a[l]=r[l]);return a}return a}function bh(r,a,l,h){a=r.memoizedState,l=l(h,a),l=l==null?a:ce({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Uc={isMounted:function(r){return(r=r._reactInternals)?Fn(r)===r:!1},enqueueSetState:function(r,a,l){r=r._reactInternals;var h=Zt(),f=js(r),x=Hr(h,f);x.payload=a,l!=null&&(x.callback=l),a=ws(r,x,f),a!==null&&(Jn(a,r,f,h),Pc(a,r,f))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var h=Zt(),f=js(r),x=Hr(h,f);x.tag=1,x.payload=a,l!=null&&(x.callback=l),a=ws(r,x,f),a!==null&&(Jn(a,r,f,h),Pc(a,r,f))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Zt(),h=js(r),f=Hr(l,h);f.tag=2,a!=null&&(f.callback=a),a=ws(r,f,h),a!==null&&(Jn(a,r,h,l),Pc(a,r,h))}};function wg(r,a,l,h,f,x,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,x,N):a.prototype&&a.prototype.isPureReactComponent?!Fo(l,h)||!Fo(f,x):!0}function bg(r,a,l){var h=!1,f=ys,x=a.contextType;return typeof x=="object"&&x!==null?x=kn(x):(f=sn(a)?mi:Bt.current,h=a.contextTypes,x=(h=h!=null)?ba(r,f):ys),a=new a(l,x),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Uc,r.stateNode=a,a._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=x),a}function _g(r,a,l,h){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==r&&Uc.enqueueReplaceState(a,a.state,null)}function _h(r,a,l,h){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},lh(r);var x=a.contextType;typeof x=="object"&&x!==null?f.context=kn(x):(x=sn(a)?mi:Bt.current,f.context=ba(r,x)),f.state=r.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(bh(r,a,x,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(a=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),a!==f.state&&Uc.enqueueReplaceState(f,f.state,null),Rc(r,l,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ka(r,a){try{var l="",h=a;do l+=xe(h),h=h.return;while(h);var f=l}catch(x){f=`
Error generating stack: `+x.message+`
`+x.stack}return{value:r,source:a,stack:f,digest:null}}function Nh(r,a,l){return{value:r,source:null,stack:l??null,digest:a??null}}function jh(r,a){try{console.error(a.value)}catch(l){setTimeout(function(){throw l})}}var fb=typeof WeakMap=="function"?WeakMap:Map;function Ng(r,a,l){l=Hr(-1,l),l.tag=3,l.payload={element:null};var h=a.value;return l.callback=function(){Gc||(Gc=!0,Fh=h),jh(r,a)},l}function jg(r,a,l){l=Hr(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=a.value;l.payload=function(){return h(f)},l.callback=function(){jh(r,a)}}var x=r.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){jh(r,a),typeof h!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),l}function Eg(r,a,l){var h=r.pingCache;if(h===null){h=r.pingCache=new fb;var f=new Set;h.set(a,f)}else f=h.get(a),f===void 0&&(f=new Set,h.set(a,f));f.has(l)||(f.add(l),r=Tb.bind(null,r,a,l),a.then(r,r))}function Cg(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function Ig(r,a,l,h,f){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(a=Hr(-1,1),a.tag=2,ws(l,a,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var pb=K.ReactCurrentOwner,an=!1;function Xt(r,a,l,h){a.child=r===null?Gp(a,null,l,h):Ea(a,r.child,l,h)}function Tg(r,a,l,h,f){l=l.render;var x=a.ref;return Ia(a,f),h=ph(r,a,l,h,x,f),l=gh(),r!==null&&!an?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~f,qr(r,a,f)):(nt&&l&&Xd(a),a.flags|=1,Xt(r,a,h,f),a.child)}function kg(r,a,l,h,f){if(r===null){var x=l.type;return typeof x=="function"&&!Wh(x)&&x.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(a.tag=15,a.type=x,Sg(r,a,x,h,f)):(r=Zc(l.type,null,h,a,a.mode,f),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,(r.lanes&f)===0){var N=x.memoizedProps;if(l=l.compare,l=l!==null?l:Fo,l(N,h)&&r.ref===a.ref)return qr(r,a,f)}return a.flags|=1,r=Cs(x,h),r.ref=a.ref,r.return=a,a.child=r}function Sg(r,a,l,h,f){if(r!==null){var x=r.memoizedProps;if(Fo(x,h)&&r.ref===a.ref)if(an=!1,a.pendingProps=h=x,(r.lanes&f)!==0)(r.flags&131072)!==0&&(an=!0);else return a.lanes=r.lanes,qr(r,a,f)}return Eh(r,a,l,h,f)}function Ag(r,a,l){var h=a.pendingProps,f=h.children,x=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Aa,vn),vn|=l;else{if((l&1073741824)===0)return r=x!==null?x.baseLanes|l:l,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,Ye(Aa,vn),vn|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=x!==null?x.baseLanes:l,Ye(Aa,vn),vn|=h}else x!==null?(h=x.baseLanes|l,a.memoizedState=null):h=l,Ye(Aa,vn),vn|=h;return Xt(r,a,f,l),a.child}function Pg(r,a){var l=a.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(a.flags|=512,a.flags|=2097152)}function Eh(r,a,l,h,f){var x=sn(l)?mi:Bt.current;return x=ba(a,x),Ia(a,f),l=ph(r,a,l,h,x,f),h=gh(),r!==null&&!an?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~f,qr(r,a,f)):(nt&&h&&Xd(a),a.flags|=1,Xt(r,a,l,f),a.child)}function Rg(r,a,l,h,f){if(sn(l)){var x=!0;jc(a)}else x=!1;if(Ia(a,f),a.stateNode===null)$c(r,a),bg(a,l,h),_h(a,l,h,f),h=!0;else if(r===null){var N=a.stateNode,T=a.memoizedProps;N.props=T;var F=N.context,G=l.contextType;typeof G=="object"&&G!==null?G=kn(G):(G=sn(l)?mi:Bt.current,G=ba(a,G));var ne=l.getDerivedStateFromProps,se=typeof ne=="function"||typeof N.getSnapshotBeforeUpdate=="function";se||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(T!==h||F!==G)&&_g(a,N,h,G),vs=!1;var te=a.memoizedState;N.state=te,Rc(a,h,N,f),F=a.memoizedState,T!==h||te!==F||rn.current||vs?(typeof ne=="function"&&(bh(a,l,ne,h),F=a.memoizedState),(T=vs||wg(a,l,T,h,te,F,G))?(se||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=F),N.props=h,N.state=F,N.context=G,h=T):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{N=a.stateNode,Qp(r,a),T=a.memoizedProps,G=a.type===a.elementType?T:Kn(a.type,T),N.props=G,se=a.pendingProps,te=N.context,F=l.contextType,typeof F=="object"&&F!==null?F=kn(F):(F=sn(l)?mi:Bt.current,F=ba(a,F));var de=l.getDerivedStateFromProps;(ne=typeof de=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(T!==se||te!==F)&&_g(a,N,h,F),vs=!1,te=a.memoizedState,N.state=te,Rc(a,h,N,f);var fe=a.memoizedState;T!==se||te!==fe||rn.current||vs?(typeof de=="function"&&(bh(a,l,de,h),fe=a.memoizedState),(G=vs||wg(a,l,G,h,te,fe,F)||!1)?(ne||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(h,fe,F),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(h,fe,F)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=fe),N.props=h,N.state=fe,N.context=F,h=G):(typeof N.componentDidUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(a.flags|=1024),h=!1)}return Ch(r,a,l,h,x,f)}function Ch(r,a,l,h,f,x){Pg(r,a);var N=(a.flags&128)!==0;if(!h&&!N)return f&&Op(a,l,!1),qr(r,a,x);h=a.stateNode,pb.current=a;var T=N&&typeof l.getDerivedStateFromError!="function"?null:h.render();return a.flags|=1,r!==null&&N?(a.child=Ea(a,r.child,null,x),a.child=Ea(a,null,T,x)):Xt(r,a,T,x),a.memoizedState=h.state,f&&Op(a,l,!0),a.child}function Dg(r){var a=r.stateNode;a.pendingContext?Vp(r,a.pendingContext,a.pendingContext!==a.context):a.context&&Vp(r,a.context,!1),ch(r,a.containerInfo)}function Lg(r,a,l,h,f){return ja(),nh(f),a.flags|=256,Xt(r,a,l,h),a.child}var Ih={dehydrated:null,treeContext:null,retryLane:0};function Th(r){return{baseLanes:r,cachePool:null,transitions:null}}function Vg(r,a,l){var h=a.pendingProps,f=st.current,x=!1,N=(a.flags&128)!==0,T;if((T=N)||(T=r!==null&&r.memoizedState===null?!1:(f&2)!==0),T?(x=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ye(st,f&1),r===null)return th(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=h.children,r=h.fallback,x?(h=a.mode,x=a.child,N={mode:"hidden",children:N},(h&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=N):x=eu(N,h,0,null),r=Ni(r,h,l,null),x.return=a,r.return=a,x.sibling=r,a.child=x,a.child.memoizedState=Th(l),a.memoizedState=Ih,r):kh(a,N));if(f=r.memoizedState,f!==null&&(T=f.dehydrated,T!==null))return gb(r,a,N,h,T,f,l);if(x){x=h.fallback,N=a.mode,f=r.child,T=f.sibling;var F={mode:"hidden",children:h.children};return(N&1)===0&&a.child!==f?(h=a.child,h.childLanes=0,h.pendingProps=F,a.deletions=null):(h=Cs(f,F),h.subtreeFlags=f.subtreeFlags&14680064),T!==null?x=Cs(T,x):(x=Ni(x,N,l,null),x.flags|=2),x.return=a,h.return=a,h.sibling=x,a.child=h,h=x,x=a.child,N=r.child.memoizedState,N=N===null?Th(l):{baseLanes:N.baseLanes|l,cachePool:null,transitions:N.transitions},x.memoizedState=N,x.childLanes=r.childLanes&~l,a.memoizedState=Ih,h}return x=r.child,r=x.sibling,h=Cs(x,{mode:"visible",children:h.children}),(a.mode&1)===0&&(h.lanes=l),h.return=a,h.sibling=null,r!==null&&(l=a.deletions,l===null?(a.deletions=[r],a.flags|=16):l.push(r)),a.child=h,a.memoizedState=null,h}function kh(r,a){return a=eu({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function Bc(r,a,l,h){return h!==null&&nh(h),Ea(a,r.child,null,l),r=kh(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function gb(r,a,l,h,f,x,N){if(l)return a.flags&256?(a.flags&=-257,h=Nh(Error(t(422))),Bc(r,a,N,h)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(x=h.fallback,f=a.mode,h=eu({mode:"visible",children:h.children},f,0,null),x=Ni(x,f,N,null),x.flags|=2,h.return=a,x.return=a,h.sibling=x,a.child=h,(a.mode&1)!==0&&Ea(a,r.child,null,N),a.child.memoizedState=Th(N),a.memoizedState=Ih,x);if((a.mode&1)===0)return Bc(r,a,N,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var T=h.dgst;return h=T,x=Error(t(419)),h=Nh(x,h,void 0),Bc(r,a,N,h)}if(T=(N&r.childLanes)!==0,an||T){if(h=At,h!==null){switch(N&-N){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|N))!==0?0:f,f!==0&&f!==x.retryLane&&(x.retryLane=f,zr(r,f),Jn(h,r,f,-1))}return qh(),h=Nh(Error(t(421))),Bc(r,a,N,h)}return f.data==="$?"?(a.flags|=128,a.child=r.child,a=kb.bind(null,r),f._reactRetry=a,null):(r=x.treeContext,xn=ps(f.nextSibling),yn=a,nt=!0,Gn=null,r!==null&&(In[Tn++]=Br,In[Tn++]=$r,In[Tn++]=fi,Br=r.id,$r=r.overflow,fi=a),a=kh(a,h.children),a.flags|=4096,a)}function Mg(r,a,l){r.lanes|=a;var h=r.alternate;h!==null&&(h.lanes|=a),ah(r.return,a,l)}function Sh(r,a,l,h,f){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=l,x.tailMode=f)}function Og(r,a,l){var h=a.pendingProps,f=h.revealOrder,x=h.tail;if(Xt(r,a,h.children,l),h=st.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Mg(r,l,a);else if(r.tag===19)Mg(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ye(st,h),(a.mode&1)===0)a.memoizedState=null;else switch(f){case"forwards":for(l=a.child,f=null;l!==null;)r=l.alternate,r!==null&&Dc(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Sh(a,!1,f,l,x);break;case"backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(r=f.alternate,r!==null&&Dc(r)===null){a.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Sh(a,!0,l,null,x);break;case"together":Sh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function $c(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function qr(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),vi|=a.lanes,(l&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(t(153));if(a.child!==null){for(r=a.child,l=Cs(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Cs(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function yb(r,a,l){switch(a.tag){case 3:Dg(a),ja();break;case 5:Xp(a);break;case 1:sn(a.type)&&jc(a);break;case 4:ch(a,a.stateNode.containerInfo);break;case 10:var h=a.type._context,f=a.memoizedProps.value;Ye(Sc,h._currentValue),h._currentValue=f;break;case 13:if(h=a.memoizedState,h!==null)return h.dehydrated!==null?(Ye(st,st.current&1),a.flags|=128,null):(l&a.child.childLanes)!==0?Vg(r,a,l):(Ye(st,st.current&1),r=qr(r,a,l),r!==null?r.sibling:null);Ye(st,st.current&1);break;case 19:if(h=(l&a.childLanes)!==0,(r.flags&128)!==0){if(h)return Og(r,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ye(st,st.current),h)break;return null;case 22:case 23:return a.lanes=0,Ag(r,a,l)}return qr(r,a,l)}var Fg,Ah,Ug,Bg;Fg=function(r,a){for(var l=a.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ah=function(){},Ug=function(r,a,l,h){var f=r.memoizedProps;if(f!==h){r=a.stateNode,yi(yr.current);var x=null;switch(l){case"input":f=Ys(r,f),h=Ys(r,h),x=[];break;case"select":f=ce({},f,{value:void 0}),h=ce({},h,{value:void 0}),x=[];break;case"textarea":f=fo(r,f),h=fo(r,h),x=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=bc)}wo(l,h);var N;l=null;for(G in f)if(!h.hasOwnProperty(G)&&f.hasOwnProperty(G)&&f[G]!=null)if(G==="style"){var T=f[G];for(N in T)T.hasOwnProperty(N)&&(l||(l={}),l[N]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(o.hasOwnProperty(G)?x||(x=[]):(x=x||[]).push(G,null));for(G in h){var F=h[G];if(T=f?.[G],h.hasOwnProperty(G)&&F!==T&&(F!=null||T!=null))if(G==="style")if(T){for(N in T)!T.hasOwnProperty(N)||F&&F.hasOwnProperty(N)||(l||(l={}),l[N]="");for(N in F)F.hasOwnProperty(N)&&T[N]!==F[N]&&(l||(l={}),l[N]=F[N])}else l||(x||(x=[]),x.push(G,l)),l=F;else G==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,T=T?T.__html:void 0,F!=null&&T!==F&&(x=x||[]).push(G,F)):G==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(G,""+F):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(o.hasOwnProperty(G)?(F!=null&&G==="onScroll"&&Xe("scroll",r),x||T===F||(x=[])):(x=x||[]).push(G,F))}l&&(x=x||[]).push("style",l);var G=x;(a.updateQueue=G)&&(a.flags|=4)}},Bg=function(r,a,l,h){l!==h&&(a.flags|=4)};function el(r,a){if(!nt)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function zt(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(a)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=l,a}function xb(r,a,l){var h=a.pendingProps;switch(Zd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(a),null;case 1:return sn(a.type)&&Nc(),zt(a),null;case 3:return h=a.stateNode,Ta(),Ze(rn),Ze(Bt),hh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Tc(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gn!==null&&($h(Gn),Gn=null))),Ah(r,a),zt(a),null;case 5:uh(a);var f=yi(Qo.current);if(l=a.type,r!==null&&a.stateNode!=null)Ug(r,a,l,h,f),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!h){if(a.stateNode===null)throw Error(t(166));return zt(a),null}if(r=yi(yr.current),Tc(a)){h=a.stateNode,l=a.type;var x=a.memoizedProps;switch(h[gr]=a,h[Ho]=x,r=(a.mode&1)!==0,l){case"dialog":Xe("cancel",h),Xe("close",h);break;case"iframe":case"object":case"embed":Xe("load",h);break;case"video":case"audio":for(f=0;f<Bo.length;f++)Xe(Bo[f],h);break;case"source":Xe("error",h);break;case"img":case"image":case"link":Xe("error",h),Xe("load",h);break;case"details":Xe("toggle",h);break;case"input":zi(h,x),Xe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!x.multiple},Xe("invalid",h);break;case"textarea":qi(h,x),Xe("invalid",h)}wo(l,x),f=null;for(var N in x)if(x.hasOwnProperty(N)){var T=x[N];N==="children"?typeof T=="string"?h.textContent!==T&&(x.suppressHydrationWarning!==!0&&wc(h.textContent,T,r),f=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(x.suppressHydrationWarning!==!0&&wc(h.textContent,T,r),f=["children",""+T]):o.hasOwnProperty(N)&&T!=null&&N==="onScroll"&&Xe("scroll",h)}switch(l){case"input":Tt(h),Wl(h,x,!0);break;case"textarea":Tt(h),po(h);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(h.onclick=bc)}h=f,a.updateQueue=h,h!==null&&(a.flags|=4)}else{N=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=N.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=N.createElement(l,{is:h.is}):(r=N.createElement(l),l==="select"&&(N=r,h.multiple?N.multiple=!0:h.size&&(N.size=h.size))):r=N.createElementNS(r,l),r[gr]=a,r[Ho]=h,Fg(r,a,!1,!1),a.stateNode=r;e:{switch(N=bo(l,h),l){case"dialog":Xe("cancel",r),Xe("close",r),f=h;break;case"iframe":case"object":case"embed":Xe("load",r),f=h;break;case"video":case"audio":for(f=0;f<Bo.length;f++)Xe(Bo[f],r);f=h;break;case"source":Xe("error",r),f=h;break;case"img":case"image":case"link":Xe("error",r),Xe("load",r),f=h;break;case"details":Xe("toggle",r),f=h;break;case"input":zi(r,h),f=Ys(r,h),Xe("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=ce({},h,{value:void 0}),Xe("invalid",r);break;case"textarea":qi(r,h),f=fo(r,h),Xe("invalid",r);break;default:f=h}wo(l,f),T=f;for(x in T)if(T.hasOwnProperty(x)){var F=T[x];x==="style"?xo(r,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&go(r,F)):x==="children"?typeof F=="string"?(l!=="textarea"||F!=="")&&ss(r,F):typeof F=="number"&&ss(r,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(o.hasOwnProperty(x)?F!=null&&x==="onScroll"&&Xe("scroll",r):F!=null&&R(r,x,F,N))}switch(l){case"input":Tt(r),Wl(r,h,!1);break;case"textarea":Tt(r),po(r);break;case"option":h.value!=null&&r.setAttribute("value",""+$e(h.value));break;case"select":r.multiple=!!h.multiple,x=h.value,x!=null?Ar(r,!!h.multiple,x,!1):h.defaultValue!=null&&Ar(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=bc)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return zt(a),null;case 6:if(r&&a.stateNode!=null)Bg(r,a,r.memoizedProps,h);else{if(typeof h!="string"&&a.stateNode===null)throw Error(t(166));if(l=yi(Qo.current),yi(yr.current),Tc(a)){if(h=a.stateNode,l=a.memoizedProps,h[gr]=a,(x=h.nodeValue!==l)&&(r=yn,r!==null))switch(r.tag){case 3:wc(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&wc(h.nodeValue,l,(r.mode&1)!==0)}x&&(a.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[gr]=a,a.stateNode=h}return zt(a),null;case 13:if(Ze(st),h=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&xn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Hp(),ja(),a.flags|=98560,x=!1;else if(x=Tc(a),h!==null&&h.dehydrated!==null){if(r===null){if(!x)throw Error(t(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[gr]=a}else ja(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;zt(a),x=!1}else Gn!==null&&($h(Gn),Gn=null),x=!0;if(!x)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=l,a):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(st.current&1)!==0?Ct===0&&(Ct=3):qh())),a.updateQueue!==null&&(a.flags|=4),zt(a),null);case 4:return Ta(),Ah(r,a),r===null&&$o(a.stateNode.containerInfo),zt(a),null;case 10:return ih(a.type._context),zt(a),null;case 17:return sn(a.type)&&Nc(),zt(a),null;case 19:if(Ze(st),x=a.memoizedState,x===null)return zt(a),null;if(h=(a.flags&128)!==0,N=x.rendering,N===null)if(h)el(x,!1);else{if(Ct!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(N=Dc(r),N!==null){for(a.flags|=128,el(x,!1),h=N.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),a.subtreeFlags=0,h=l,l=a.child;l!==null;)x=l,r=h,x.flags&=14680066,N=x.alternate,N===null?(x.childLanes=0,x.lanes=r,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=N.childLanes,x.lanes=N.lanes,x.child=N.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=N.memoizedProps,x.memoizedState=N.memoizedState,x.updateQueue=N.updateQueue,x.type=N.type,r=N.dependencies,x.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ye(st,st.current&1|2),a.child}r=r.sibling}x.tail!==null&&Qe()>Pa&&(a.flags|=128,h=!0,el(x,!1),a.lanes=4194304)}else{if(!h)if(r=Dc(N),r!==null){if(a.flags|=128,h=!0,l=r.updateQueue,l!==null&&(a.updateQueue=l,a.flags|=4),el(x,!0),x.tail===null&&x.tailMode==="hidden"&&!N.alternate&&!nt)return zt(a),null}else 2*Qe()-x.renderingStartTime>Pa&&l!==1073741824&&(a.flags|=128,h=!0,el(x,!1),a.lanes=4194304);x.isBackwards?(N.sibling=a.child,a.child=N):(l=x.last,l!==null?l.sibling=N:a.child=N,x.last=N)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=Qe(),a.sibling=null,l=st.current,Ye(st,h?l&1|2:l&1),a):(zt(a),null);case 22:case 23:return Hh(),h=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(a.flags|=8192),h&&(a.mode&1)!==0?(vn&1073741824)!==0&&(zt(a),a.subtreeFlags&6&&(a.flags|=8192)):zt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function vb(r,a){switch(Zd(a),a.tag){case 1:return sn(a.type)&&Nc(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ta(),Ze(rn),Ze(Bt),hh(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return uh(a),null;case 13:if(Ze(st),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ja()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Ze(st),null;case 4:return Ta(),null;case 10:return ih(a.type._context),null;case 22:case 23:return Hh(),null;case 24:return null;default:return null}}var zc=!1,Ht=!1,wb=typeof WeakSet=="function"?WeakSet:Set,me=null;function Sa(r,a){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ot(r,a,h)}else l.current=null}function Ph(r,a,l){try{l()}catch(h){ot(r,a,h)}}var $g=!1;function bb(r,a){if(Hd=hs,r=wp(),Vd(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var N=0,T=-1,F=-1,G=0,ne=0,se=r,te=null;t:for(;;){for(var de;se!==l||f!==0&&se.nodeType!==3||(T=N+f),se!==x||h!==0&&se.nodeType!==3||(F=N+h),se.nodeType===3&&(N+=se.nodeValue.length),(de=se.firstChild)!==null;)te=se,se=de;for(;;){if(se===r)break t;if(te===l&&++G===f&&(T=N),te===x&&++ne===h&&(F=N),(de=se.nextSibling)!==null)break;se=te,te=se.parentNode}se=de}l=T===-1||F===-1?null:{start:T,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(qd={focusedElem:r,selectionRange:l},hs=!1,me=a;me!==null;)if(a=me,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,me=r;else for(;me!==null;){a=me;try{var fe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,ht=fe.memoizedState,H=a.stateNode,B=H.getSnapshotBeforeUpdate(a.elementType===a.type?pe:Kn(a.type,pe),ht);H.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var W=a.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ot(a,a.return,ae)}if(r=a.sibling,r!==null){r.return=a.return,me=r;break}me=a.return}return fe=$g,$g=!1,fe}function tl(r,a,l){var h=a.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var x=f.destroy;f.destroy=void 0,x!==void 0&&Ph(a,l,x)}f=f.next}while(f!==h)}}function Hc(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==a)}}function Rh(r){var a=r.ref;if(a!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof a=="function"?a(r):a.current=r}}function zg(r){var a=r.alternate;a!==null&&(r.alternate=null,zg(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[gr],delete a[Ho],delete a[Qd],delete a[rb],delete a[sb])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Hg(r){return r.tag===5||r.tag===3||r.tag===4}function qg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Hg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Dh(r,a,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(r,a):l.insertBefore(r,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(r,l)):(a=l,a.appendChild(r)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=bc));else if(h!==4&&(r=r.child,r!==null))for(Dh(r,a,l),r=r.sibling;r!==null;)Dh(r,a,l),r=r.sibling}function Lh(r,a,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Lh(r,a,l),r=r.sibling;r!==null;)Lh(r,a,l),r=r.sibling}var Vt=null,Qn=!1;function bs(r,a,l){for(l=l.child;l!==null;)Wg(r,a,l),l=l.sibling}function Wg(r,a,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(ii,l)}catch{}switch(l.tag){case 5:Ht||Sa(l,a);case 6:var h=Vt,f=Qn;Vt=null,bs(r,a,l),Vt=h,Qn=f,Vt!==null&&(Qn?(r=Vt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Vt.removeChild(l.stateNode));break;case 18:Vt!==null&&(Qn?(r=Vt,l=l.stateNode,r.nodeType===8?Kd(r.parentNode,l):r.nodeType===1&&Kd(r,l),Hn(r)):Kd(Vt,l.stateNode));break;case 4:h=Vt,f=Qn,Vt=l.stateNode.containerInfo,Qn=!0,bs(r,a,l),Vt=h,Qn=f;break;case 0:case 11:case 14:case 15:if(!Ht&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var x=f,N=x.destroy;x=x.tag,N!==void 0&&((x&2)!==0||(x&4)!==0)&&Ph(l,a,N),f=f.next}while(f!==h)}bs(r,a,l);break;case 1:if(!Ht&&(Sa(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(T){ot(l,a,T)}bs(r,a,l);break;case 21:bs(r,a,l);break;case 22:l.mode&1?(Ht=(h=Ht)||l.memoizedState!==null,bs(r,a,l),Ht=h):bs(r,a,l);break;default:bs(r,a,l)}}function Gg(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new wb),a.forEach(function(h){var f=Sb.bind(null,r,h);l.has(h)||(l.add(h),h.then(f,f))})}}function Yn(r,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var x=r,N=a,T=N;e:for(;T!==null;){switch(T.tag){case 5:Vt=T.stateNode,Qn=!1;break e;case 3:Vt=T.stateNode.containerInfo,Qn=!0;break e;case 4:Vt=T.stateNode.containerInfo,Qn=!0;break e}T=T.return}if(Vt===null)throw Error(t(160));Wg(x,N,f),Vt=null,Qn=!1;var F=f.alternate;F!==null&&(F.return=null),f.return=null}catch(G){ot(f,a,G)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Kg(a,r),a=a.sibling}function Kg(r,a){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Yn(a,r),vr(r),h&4){try{tl(3,r,r.return),Hc(3,r)}catch(pe){ot(r,r.return,pe)}try{tl(5,r,r.return)}catch(pe){ot(r,r.return,pe)}}break;case 1:Yn(a,r),vr(r),h&512&&l!==null&&Sa(l,l.return);break;case 5:if(Yn(a,r),vr(r),h&512&&l!==null&&Sa(l,l.return),r.flags&32){var f=r.stateNode;try{ss(f,"")}catch(pe){ot(r,r.return,pe)}}if(h&4&&(f=r.stateNode,f!=null)){var x=r.memoizedProps,N=l!==null?l.memoizedProps:x,T=r.type,F=r.updateQueue;if(r.updateQueue=null,F!==null)try{T==="input"&&x.type==="radio"&&x.name!=null&&ho(f,x),bo(T,N);var G=bo(T,x);for(N=0;N<F.length;N+=2){var ne=F[N],se=F[N+1];ne==="style"?xo(f,se):ne==="dangerouslySetInnerHTML"?go(f,se):ne==="children"?ss(f,se):R(f,ne,se,G)}switch(T){case"input":mo(f,x);break;case"textarea":Wi(f,x);break;case"select":var te=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!x.multiple;var de=x.value;de!=null?Ar(f,!!x.multiple,de,!1):te!==!!x.multiple&&(x.defaultValue!=null?Ar(f,!!x.multiple,x.defaultValue,!0):Ar(f,!!x.multiple,x.multiple?[]:"",!1))}f[Ho]=x}catch(pe){ot(r,r.return,pe)}}break;case 6:if(Yn(a,r),vr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,x=r.memoizedProps;try{f.nodeValue=x}catch(pe){ot(r,r.return,pe)}}break;case 3:if(Yn(a,r),vr(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Hn(a.containerInfo)}catch(pe){ot(r,r.return,pe)}break;case 4:Yn(a,r),vr(r);break;case 13:Yn(a,r),vr(r),f=r.child,f.flags&8192&&(x=f.memoizedState!==null,f.stateNode.isHidden=x,!x||f.alternate!==null&&f.alternate.memoizedState!==null||(Oh=Qe())),h&4&&Gg(r);break;case 22:if(ne=l!==null&&l.memoizedState!==null,r.mode&1?(Ht=(G=Ht)||ne,Yn(a,r),Ht=G):Yn(a,r),vr(r),h&8192){if(G=r.memoizedState!==null,(r.stateNode.isHidden=G)&&!ne&&(r.mode&1)!==0)for(me=r,ne=r.child;ne!==null;){for(se=me=ne;me!==null;){switch(te=me,de=te.child,te.tag){case 0:case 11:case 14:case 15:tl(4,te,te.return);break;case 1:Sa(te,te.return);var fe=te.stateNode;if(typeof fe.componentWillUnmount=="function"){h=te,l=te.return;try{a=h,fe.props=a.memoizedProps,fe.state=a.memoizedState,fe.componentWillUnmount()}catch(pe){ot(h,l,pe)}}break;case 5:Sa(te,te.return);break;case 22:if(te.memoizedState!==null){Jg(se);continue}}de!==null?(de.return=te,me=de):Jg(se)}ne=ne.sibling}e:for(ne=null,se=r;;){if(se.tag===5){if(ne===null){ne=se;try{f=se.stateNode,G?(x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(T=se.stateNode,F=se.memoizedProps.style,N=F!=null&&F.hasOwnProperty("display")?F.display:null,T.style.display=yo("display",N))}catch(pe){ot(r,r.return,pe)}}}else if(se.tag===6){if(ne===null)try{se.stateNode.nodeValue=G?"":se.memoizedProps}catch(pe){ot(r,r.return,pe)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===r)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===r)break e;for(;se.sibling===null;){if(se.return===null||se.return===r)break e;ne===se&&(ne=null),se=se.return}ne===se&&(ne=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Yn(a,r),vr(r),h&4&&Gg(r);break;case 21:break;default:Yn(a,r),vr(r)}}function vr(r){var a=r.flags;if(a&2){try{e:{for(var l=r.return;l!==null;){if(Hg(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(ss(f,""),h.flags&=-33);var x=qg(r);Lh(r,x,f);break;case 3:case 4:var N=h.stateNode.containerInfo,T=qg(r);Dh(r,T,N);break;default:throw Error(t(161))}}catch(F){ot(r,r.return,F)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function _b(r,a,l){me=r,Qg(r)}function Qg(r,a,l){for(var h=(r.mode&1)!==0;me!==null;){var f=me,x=f.child;if(f.tag===22&&h){var N=f.memoizedState!==null||zc;if(!N){var T=f.alternate,F=T!==null&&T.memoizedState!==null||Ht;T=zc;var G=Ht;if(zc=N,(Ht=F)&&!G)for(me=f;me!==null;)N=me,F=N.child,N.tag===22&&N.memoizedState!==null?Xg(f):F!==null?(F.return=N,me=F):Xg(f);for(;x!==null;)me=x,Qg(x),x=x.sibling;me=f,zc=T,Ht=G}Yg(r)}else(f.subtreeFlags&8772)!==0&&x!==null?(x.return=f,me=x):Yg(r)}}function Yg(r){for(;me!==null;){var a=me;if((a.flags&8772)!==0){var l=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Ht||Hc(5,a);break;case 1:var h=a.stateNode;if(a.flags&4&&!Ht)if(l===null)h.componentDidMount();else{var f=a.elementType===a.type?l.memoizedProps:Kn(a.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&Jp(a,x,h);break;case 3:var N=a.updateQueue;if(N!==null){if(l=null,a.child!==null)switch(a.child.tag){case 5:l=a.child.stateNode;break;case 1:l=a.child.stateNode}Jp(a,N,l)}break;case 5:var T=a.stateNode;if(l===null&&a.flags&4){l=T;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&l.focus();break;case"img":F.src&&(l.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var G=a.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var se=ne.dehydrated;se!==null&&Hn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||a.flags&512&&Rh(a)}catch(te){ot(a,a.return,te)}}if(a===r){me=null;break}if(l=a.sibling,l!==null){l.return=a.return,me=l;break}me=a.return}}function Jg(r){for(;me!==null;){var a=me;if(a===r){me=null;break}var l=a.sibling;if(l!==null){l.return=a.return,me=l;break}me=a.return}}function Xg(r){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var l=a.return;try{Hc(4,a)}catch(F){ot(a,l,F)}break;case 1:var h=a.stateNode;if(typeof h.componentDidMount=="function"){var f=a.return;try{h.componentDidMount()}catch(F){ot(a,f,F)}}var x=a.return;try{Rh(a)}catch(F){ot(a,x,F)}break;case 5:var N=a.return;try{Rh(a)}catch(F){ot(a,N,F)}}}catch(F){ot(a,a.return,F)}if(a===r){me=null;break}var T=a.sibling;if(T!==null){T.return=a.return,me=T;break}me=a.return}}var Nb=Math.ceil,qc=K.ReactCurrentDispatcher,Vh=K.ReactCurrentOwner,An=K.ReactCurrentBatchConfig,ze=0,At=null,gt=null,Mt=0,vn=0,Aa=gs(0),Ct=0,nl=null,vi=0,Wc=0,Mh=0,rl=null,on=null,Oh=0,Pa=1/0,Wr=null,Gc=!1,Fh=null,_s=null,Kc=!1,Ns=null,Qc=0,sl=0,Uh=null,Yc=-1,Jc=0;function Zt(){return(ze&6)!==0?Qe():Yc!==-1?Yc:Yc=Qe()}function js(r){return(r.mode&1)===0?1:(ze&2)!==0&&Mt!==0?Mt&-Mt:ab.transition!==null?(Jc===0&&(Jc=oi()),Jc):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:Po(r.type)),r)}function Jn(r,a,l,h){if(50<sl)throw sl=0,Uh=null,Error(t(185));ls(r,l,h),((ze&2)===0||r!==At)&&(r===At&&((ze&2)===0&&(Wc|=l),Ct===4&&Es(r,Mt)),ln(r,h),l===1&&ze===0&&(a.mode&1)===0&&(Pa=Qe()+500,Ec&&xs()))}function ln(r,a){var l=r.callbackNode;Dr(r,a);var h=ai(r,r===At?Mt:0);if(h===0)l!==null&&Io(l),r.callbackNode=null,r.callbackPriority=0;else if(a=h&-h,r.callbackPriority!==a){if(l!=null&&Io(l),a===1)r.tag===0?ib(e0.bind(null,r)):Fp(e0.bind(null,r)),tb(function(){(ze&6)===0&&xs()}),l=null;else{switch(us(h)){case 1:l=si;break;case 4:l=is;break;case 16:l=jn;break;case 536870912:l=Jl;break;default:l=jn}l=l0(l,Zg.bind(null,r))}r.callbackPriority=a,r.callbackNode=l}}function Zg(r,a){if(Yc=-1,Jc=0,(ze&6)!==0)throw Error(t(327));var l=r.callbackNode;if(Ra()&&r.callbackNode!==l)return null;var h=ai(r,r===At?Mt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||a)a=Xc(r,h);else{a=h;var f=ze;ze|=2;var x=n0();(At!==r||Mt!==a)&&(Wr=null,Pa=Qe()+500,bi(r,a));do try{Cb();break}catch(T){t0(r,T)}while(!0);sh(),qc.current=x,ze=f,gt!==null?a=0:(At=null,Mt=0,a=Ct)}if(a!==0){if(a===2&&(f=fn(r),f!==0&&(h=f,a=Bh(r,f))),a===1)throw l=nl,bi(r,0),Es(r,h),ln(r,Qe()),l;if(a===6)Es(r,h);else{if(f=r.current.alternate,(h&30)===0&&!jb(f)&&(a=Xc(r,h),a===2&&(x=fn(r),x!==0&&(h=x,a=Bh(r,x))),a===1))throw l=nl,bi(r,0),Es(r,h),ln(r,Qe()),l;switch(r.finishedWork=f,r.finishedLanes=h,a){case 0:case 1:throw Error(t(345));case 2:_i(r,on,Wr);break;case 3:if(Es(r,h),(h&130023424)===h&&(a=Oh+500-Qe(),10<a)){if(ai(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Zt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Gd(_i.bind(null,r,on,Wr),a);break}_i(r,on,Wr);break;case 4:if(Es(r,h),(h&4194240)===h)break;for(a=r.eventTimes,f=-1;0<h;){var N=31-Yt(h);x=1<<N,N=a[N],N>f&&(f=N),h&=~x}if(h=f,h=Qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Nb(h/1960))-h,10<h){r.timeoutHandle=Gd(_i.bind(null,r,on,Wr),h);break}_i(r,on,Wr);break;case 5:_i(r,on,Wr);break;default:throw Error(t(329))}}}return ln(r,Qe()),r.callbackNode===l?Zg.bind(null,r):null}function Bh(r,a){var l=rl;return r.current.memoizedState.isDehydrated&&(bi(r,a).flags|=256),r=Xc(r,a),r!==2&&(a=on,on=l,a!==null&&$h(a)),r}function $h(r){on===null?on=r:on.push.apply(on,r)}function jb(r){for(var a=r;;){if(a.flags&16384){var l=a.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],x=f.getSnapshot;f=f.value;try{if(!Wn(x(),f))return!1}catch{return!1}}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Es(r,a){for(a&=~Mh,a&=~Wc,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var l=31-Yt(a),h=1<<l;r[l]=-1,a&=~h}}function e0(r){if((ze&6)!==0)throw Error(t(327));Ra();var a=ai(r,0);if((a&1)===0)return ln(r,Qe()),null;var l=Xc(r,a);if(r.tag!==0&&l===2){var h=fn(r);h!==0&&(a=h,l=Bh(r,h))}if(l===1)throw l=nl,bi(r,0),Es(r,a),ln(r,Qe()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,_i(r,on,Wr),ln(r,Qe()),null}function zh(r,a){var l=ze;ze|=1;try{return r(a)}finally{ze=l,ze===0&&(Pa=Qe()+500,Ec&&xs())}}function wi(r){Ns!==null&&Ns.tag===0&&(ze&6)===0&&Ra();var a=ze;ze|=1;var l=An.transition,h=Oe;try{if(An.transition=null,Oe=1,r)return r()}finally{Oe=h,An.transition=l,ze=a,(ze&6)===0&&xs()}}function Hh(){vn=Aa.current,Ze(Aa)}function bi(r,a){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,eb(l)),gt!==null)for(l=gt.return;l!==null;){var h=l;switch(Zd(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Nc();break;case 3:Ta(),Ze(rn),Ze(Bt),hh();break;case 5:uh(h);break;case 4:Ta();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:ih(h.type._context);break;case 22:case 23:Hh()}l=l.return}if(At=r,gt=r=Cs(r.current,null),Mt=vn=a,Ct=0,nl=null,Mh=Wc=vi=0,on=rl=null,gi!==null){for(a=0;a<gi.length;a++)if(l=gi[a],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,x=l.pending;if(x!==null){var N=x.next;x.next=f,h.next=N}l.pending=h}gi=null}return r}function t0(r,a){do{var l=gt;try{if(sh(),Lc.current=Fc,Vc){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Vc=!1}if(xi=0,St=Et=it=null,Yo=!1,Jo=0,Vh.current=null,l===null||l.return===null){Ct=1,nl=a,gt=null;break}e:{var x=r,N=l.return,T=l,F=a;if(a=Mt,T.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var G=F,ne=T,se=ne.tag;if((ne.mode&1)===0&&(se===0||se===11||se===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=Cg(N);if(de!==null){de.flags&=-257,Ig(de,N,T,x,a),de.mode&1&&Eg(x,G,a),a=de,F=G;var fe=a.updateQueue;if(fe===null){var pe=new Set;pe.add(F),a.updateQueue=pe}else fe.add(F);break e}else{if((a&1)===0){Eg(x,G,a),qh();break e}F=Error(t(426))}}else if(nt&&T.mode&1){var ht=Cg(N);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Ig(ht,N,T,x,a),nh(ka(F,T));break e}}x=F=ka(F,T),Ct!==4&&(Ct=2),rl===null?rl=[x]:rl.push(x),x=N;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var H=Ng(x,F,a);Yp(x,H);break e;case 1:T=F;var B=x.type,W=x.stateNode;if((x.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(_s===null||!_s.has(W)))){x.flags|=65536,a&=-a,x.lanes|=a;var ae=jg(x,T,a);Yp(x,ae);break e}}x=x.return}while(x!==null)}s0(l)}catch(ge){a=ge,gt===l&&l!==null&&(gt=l=l.return);continue}break}while(!0)}function n0(){var r=qc.current;return qc.current=Fc,r===null?Fc:r}function qh(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),At===null||(vi&268435455)===0&&(Wc&268435455)===0||Es(At,Mt)}function Xc(r,a){var l=ze;ze|=2;var h=n0();(At!==r||Mt!==a)&&(Wr=null,bi(r,a));do try{Eb();break}catch(f){t0(r,f)}while(!0);if(sh(),ze=l,qc.current=h,gt!==null)throw Error(t(261));return At=null,Mt=0,Ct}function Eb(){for(;gt!==null;)r0(gt)}function Cb(){for(;gt!==null&&!Ql();)r0(gt)}function r0(r){var a=o0(r.alternate,r,vn);r.memoizedProps=r.pendingProps,a===null?s0(r):gt=a,Vh.current=null}function s0(r){var a=r;do{var l=a.alternate;if(r=a.return,(a.flags&32768)===0){if(l=xb(l,a,vn),l!==null){gt=l;return}}else{if(l=vb(l,a),l!==null){l.flags&=32767,gt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ct=6,gt=null;return}}if(a=a.sibling,a!==null){gt=a;return}gt=a=r}while(a!==null);Ct===0&&(Ct=5)}function _i(r,a,l){var h=Oe,f=An.transition;try{An.transition=null,Oe=1,Ib(r,a,l,h)}finally{An.transition=f,Oe=h}return null}function Ib(r,a,l,h){do Ra();while(Ns!==null);if((ze&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var x=l.lanes|l.childLanes;if(Ke(r,x),r===At&&(gt=At=null,Mt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Kc||(Kc=!0,l0(jn,function(){return Ra(),null})),x=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||x){x=An.transition,An.transition=null;var N=Oe;Oe=1;var T=ze;ze|=4,Vh.current=null,bb(r,l),Kg(l,r),Gw(qd),hs=!!Hd,qd=Hd=null,r.current=l,_b(l),Td(),ze=T,Oe=N,An.transition=x}else r.current=l;if(Kc&&(Kc=!1,Ns=r,Qc=f),x=r.pendingLanes,x===0&&(_s=null),Xl(l.stateNode),ln(r,Qe()),a!==null)for(h=r.onRecoverableError,l=0;l<a.length;l++)f=a[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(Gc)throw Gc=!1,r=Fh,Fh=null,r;return(Qc&1)!==0&&r.tag!==0&&Ra(),x=r.pendingLanes,(x&1)!==0?r===Uh?sl++:(sl=0,Uh=r):sl=0,xs(),null}function Ra(){if(Ns!==null){var r=us(Qc),a=An.transition,l=Oe;try{if(An.transition=null,Oe=16>r?16:r,Ns===null)var h=!1;else{if(r=Ns,Ns=null,Qc=0,(ze&6)!==0)throw Error(t(331));var f=ze;for(ze|=4,me=r.current;me!==null;){var x=me,N=x.child;if((me.flags&16)!==0){var T=x.deletions;if(T!==null){for(var F=0;F<T.length;F++){var G=T[F];for(me=G;me!==null;){var ne=me;switch(ne.tag){case 0:case 11:case 15:tl(8,ne,x)}var se=ne.child;if(se!==null)se.return=ne,me=se;else for(;me!==null;){ne=me;var te=ne.sibling,de=ne.return;if(zg(ne),ne===G){me=null;break}if(te!==null){te.return=de,me=te;break}me=de}}}var fe=x.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}me=x}}if((x.subtreeFlags&2064)!==0&&N!==null)N.return=x,me=N;else e:for(;me!==null;){if(x=me,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:tl(9,x,x.return)}var H=x.sibling;if(H!==null){H.return=x.return,me=H;break e}me=x.return}}var B=r.current;for(me=B;me!==null;){N=me;var W=N.child;if((N.subtreeFlags&2064)!==0&&W!==null)W.return=N,me=W;else e:for(N=B;me!==null;){if(T=me,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Hc(9,T)}}catch(ge){ot(T,T.return,ge)}if(T===N){me=null;break e}var ae=T.sibling;if(ae!==null){ae.return=T.return,me=ae;break e}me=T.return}}if(ze=f,xs(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(ii,r)}catch{}h=!0}return h}finally{Oe=l,An.transition=a}}return!1}function i0(r,a,l){a=ka(l,a),a=Ng(r,a,1),r=ws(r,a,1),a=Zt(),r!==null&&(ls(r,1,a),ln(r,a))}function ot(r,a,l){if(r.tag===3)i0(r,r,l);else for(;a!==null;){if(a.tag===3){i0(a,r,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_s===null||!_s.has(h))){r=ka(l,r),r=jg(a,r,1),a=ws(a,r,1),r=Zt(),a!==null&&(ls(a,1,r),ln(a,r));break}}a=a.return}}function Tb(r,a,l){var h=r.pingCache;h!==null&&h.delete(a),a=Zt(),r.pingedLanes|=r.suspendedLanes&l,At===r&&(Mt&l)===l&&(Ct===4||Ct===3&&(Mt&130023424)===Mt&&500>Qe()-Oh?bi(r,0):Mh|=l),ln(r,a)}function a0(r,a){a===0&&((r.mode&1)===0?a=1:(a=na,na<<=1,(na&130023424)===0&&(na=4194304)));var l=Zt();r=zr(r,a),r!==null&&(ls(r,a,l),ln(r,l))}function kb(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),a0(r,l)}function Sb(r,a){var l=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(a),a0(r,l)}var o0;o0=function(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps||rn.current)an=!0;else{if((r.lanes&l)===0&&(a.flags&128)===0)return an=!1,yb(r,a,l);an=(r.flags&131072)!==0}else an=!1,nt&&(a.flags&1048576)!==0&&Up(a,Ic,a.index);switch(a.lanes=0,a.tag){case 2:var h=a.type;$c(r,a),r=a.pendingProps;var f=ba(a,Bt.current);Ia(a,l),f=ph(null,a,h,r,f,l);var x=gh();return a.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,sn(h)?(x=!0,jc(a)):x=!1,a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,lh(a),f.updater=Uc,a.stateNode=f,f._reactInternals=a,_h(a,h,r,l),a=Ch(null,a,h,!0,x,l)):(a.tag=0,nt&&x&&Xd(a),Xt(null,a,f,l),a=a.child),a;case 16:h=a.elementType;e:{switch($c(r,a),r=a.pendingProps,f=h._init,h=f(h._payload),a.type=h,f=a.tag=Pb(h),r=Kn(h,r),f){case 0:a=Eh(null,a,h,r,l);break e;case 1:a=Rg(null,a,h,r,l);break e;case 11:a=Tg(null,a,h,r,l);break e;case 14:a=kg(null,a,h,Kn(h.type,r),l);break e}throw Error(t(306,h,""))}return a;case 0:return h=a.type,f=a.pendingProps,f=a.elementType===h?f:Kn(h,f),Eh(r,a,h,f,l);case 1:return h=a.type,f=a.pendingProps,f=a.elementType===h?f:Kn(h,f),Rg(r,a,h,f,l);case 3:e:{if(Dg(a),r===null)throw Error(t(387));h=a.pendingProps,x=a.memoizedState,f=x.element,Qp(r,a),Rc(a,h,null,l);var N=a.memoizedState;if(h=N.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){f=ka(Error(t(423)),a),a=Lg(r,a,h,l,f);break e}else if(h!==f){f=ka(Error(t(424)),a),a=Lg(r,a,h,l,f);break e}else for(xn=ps(a.stateNode.containerInfo.firstChild),yn=a,nt=!0,Gn=null,l=Gp(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ja(),h===f){a=qr(r,a,l);break e}Xt(r,a,h,l)}a=a.child}return a;case 5:return Xp(a),r===null&&th(a),h=a.type,f=a.pendingProps,x=r!==null?r.memoizedProps:null,N=f.children,Wd(h,f)?N=null:x!==null&&Wd(h,x)&&(a.flags|=32),Pg(r,a),Xt(r,a,N,l),a.child;case 6:return r===null&&th(a),null;case 13:return Vg(r,a,l);case 4:return ch(a,a.stateNode.containerInfo),h=a.pendingProps,r===null?a.child=Ea(a,null,h,l):Xt(r,a,h,l),a.child;case 11:return h=a.type,f=a.pendingProps,f=a.elementType===h?f:Kn(h,f),Tg(r,a,h,f,l);case 7:return Xt(r,a,a.pendingProps,l),a.child;case 8:return Xt(r,a,a.pendingProps.children,l),a.child;case 12:return Xt(r,a,a.pendingProps.children,l),a.child;case 10:e:{if(h=a.type._context,f=a.pendingProps,x=a.memoizedProps,N=f.value,Ye(Sc,h._currentValue),h._currentValue=N,x!==null)if(Wn(x.value,N)){if(x.children===f.children&&!rn.current){a=qr(r,a,l);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var T=x.dependencies;if(T!==null){N=x.child;for(var F=T.firstContext;F!==null;){if(F.context===h){if(x.tag===1){F=Hr(-1,l&-l),F.tag=2;var G=x.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),G.pending=F}}x.lanes|=l,F=x.alternate,F!==null&&(F.lanes|=l),ah(x.return,l,a),T.lanes|=l;break}F=F.next}}else if(x.tag===10)N=x.type===a.type?null:x.child;else if(x.tag===18){if(N=x.return,N===null)throw Error(t(341));N.lanes|=l,T=N.alternate,T!==null&&(T.lanes|=l),ah(N,l,a),N=x.sibling}else N=x.child;if(N!==null)N.return=x;else for(N=x;N!==null;){if(N===a){N=null;break}if(x=N.sibling,x!==null){x.return=N.return,N=x;break}N=N.return}x=N}Xt(r,a,f.children,l),a=a.child}return a;case 9:return f=a.type,h=a.pendingProps.children,Ia(a,l),f=kn(f),h=h(f),a.flags|=1,Xt(r,a,h,l),a.child;case 14:return h=a.type,f=Kn(h,a.pendingProps),f=Kn(h.type,f),kg(r,a,h,f,l);case 15:return Sg(r,a,a.type,a.pendingProps,l);case 17:return h=a.type,f=a.pendingProps,f=a.elementType===h?f:Kn(h,f),$c(r,a),a.tag=1,sn(h)?(r=!0,jc(a)):r=!1,Ia(a,l),bg(a,h,f),_h(a,h,f,l),Ch(null,a,h,!0,r,l);case 19:return Og(r,a,l);case 22:return Ag(r,a,l)}throw Error(t(156,a.tag))};function l0(r,a){return ea(r,a)}function Ab(r,a,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(r,a,l,h){return new Ab(r,a,l,h)}function Wh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pb(r){if(typeof r=="function")return Wh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===U)return 11;if(r===Me)return 14}return 2}function Cs(r,a){var l=r.alternate;return l===null?(l=Pn(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Zc(r,a,l,h,f,x){var N=2;if(h=r,typeof r=="function")Wh(r)&&(N=1);else if(typeof r=="string")N=5;else e:switch(r){case E:return Ni(l.children,f,x,a);case C:N=8,f|=8;break;case S:return r=Pn(12,l,a,f|2),r.elementType=S,r.lanes=x,r;case P:return r=Pn(13,l,a,f),r.elementType=P,r.lanes=x,r;case Ie:return r=Pn(19,l,a,f),r.elementType=Ie,r.lanes=x,r;case Re:return eu(l,f,x,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case M:N=10;break e;case L:N=9;break e;case U:N=11;break e;case Me:N=14;break e;case et:N=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return a=Pn(N,l,a,f),a.elementType=r,a.type=h,a.lanes=x,a}function Ni(r,a,l,h){return r=Pn(7,r,h,a),r.lanes=l,r}function eu(r,a,l,h){return r=Pn(22,r,h,a),r.elementType=Re,r.lanes=l,r.stateNode={isHidden:!1},r}function Gh(r,a,l){return r=Pn(6,r,null,a),r.lanes=l,r}function Kh(r,a,l){return a=Pn(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function Rb(r,a,l,h,f){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=os(0),this.expirationTimes=os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Qh(r,a,l,h,f,x,N,T,F){return r=new Rb(r,a,l,T,F),a===1?(a=1,x===!0&&(a|=8)):a=0,x=Pn(3,null,null,a),r.current=x,x.stateNode=r,x.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},lh(x),r}function Db(r,a,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:h==null?null:""+h,children:r,containerInfo:a,implementation:l}}function c0(r){if(!r)return ys;r=r._reactInternals;e:{if(Fn(r)!==r||r.tag!==1)throw Error(t(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(sn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(sn(l))return Mp(r,l,a)}return a}function u0(r,a,l,h,f,x,N,T,F){return r=Qh(l,h,!0,r,f,x,N,T,F),r.context=c0(null),l=r.current,h=Zt(),f=js(l),x=Hr(h,f),x.callback=a??null,ws(l,x,f),r.current.lanes=f,ls(r,f,h),ln(r,h),r}function tu(r,a,l,h){var f=a.current,x=Zt(),N=js(f);return l=c0(l),a.context===null?a.context=l:a.pendingContext=l,a=Hr(x,N),a.payload={element:r},h=h===void 0?null:h,h!==null&&(a.callback=h),r=ws(f,a,N),r!==null&&(Jn(r,f,N,x),Pc(r,f,N)),N}function nu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function d0(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function Yh(r,a){d0(r,a),(r=r.alternate)&&d0(r,a)}function Lb(){return null}var h0=typeof reportError=="function"?reportError:function(r){console.error(r)};function Jh(r){this._internalRoot=r}ru.prototype.render=Jh.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(t(409));tu(r,a,null,null)},ru.prototype.unmount=Jh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;wi(function(){tu(null,r,null,null)}),a[Fr]=null}};function ru(r){this._internalRoot=r}ru.prototype.unstable_scheduleHydration=function(r){if(r){var a=rc();r={blockedOn:null,target:r,priority:a};for(var l=0;l<hr.length&&a!==0&&a<hr[l].priority;l++);hr.splice(l,0,r),l===0&&ac(r)}};function Xh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function su(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function m0(){}function Vb(r,a,l,h,f){if(f){if(typeof h=="function"){var x=h;h=function(){var G=nu(N);x.call(G)}}var N=u0(a,h,r,0,null,!1,!1,"",m0);return r._reactRootContainer=N,r[Fr]=N.current,$o(r.nodeType===8?r.parentNode:r),wi(),N}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var T=h;h=function(){var G=nu(F);T.call(G)}}var F=Qh(r,0,!1,null,null,!1,!1,"",m0);return r._reactRootContainer=F,r[Fr]=F.current,$o(r.nodeType===8?r.parentNode:r),wi(function(){tu(a,F,l,h)}),F}function iu(r,a,l,h,f){var x=l._reactRootContainer;if(x){var N=x;if(typeof f=="function"){var T=f;f=function(){var F=nu(N);T.call(F)}}tu(a,N,r,f)}else N=Vb(l,a,r,f,h);return nu(N)}tc=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var l=as(a.pendingLanes);l!==0&&(cs(a,l|1),ln(a,Qe()),(ze&6)===0&&(Pa=Qe()+500,xs()))}break;case 13:wi(function(){var h=zr(r,1);if(h!==null){var f=Zt();Jn(h,r,1,f)}}),Yh(r,1)}},ra=function(r){if(r.tag===13){var a=zr(r,134217728);if(a!==null){var l=Zt();Jn(a,r,134217728,l)}Yh(r,134217728)}},nc=function(r){if(r.tag===13){var a=js(r),l=zr(r,a);if(l!==null){var h=Zt();Jn(l,r,a,h)}Yh(r,a)}},rc=function(){return Oe},sc=function(r,a){var l=Oe;try{return Oe=r,a()}finally{Oe=l}},Ki=function(r,a,l){switch(a){case"input":if(mo(r,l),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==r&&h.form===r.form){var f=_c(h);if(!f)throw Error(t(90));rs(h),mo(h,f)}}}break;case"textarea":Wi(r,l);break;case"select":a=l.value,a!=null&&Ar(r,!!l.multiple,a,!1)}},ei=zh,No=wi;var Mb={usingClientEntryPoint:!1,Events:[qo,va,_c,ur,_o,zh]},il={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ob={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Co(r),r===null?null:r.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||Lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{ii=au.inject(Ob),mn=au}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mb,cn.createPortal=function(r,a){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(a))throw Error(t(200));return Db(r,a,null,l)},cn.createRoot=function(r,a){if(!Xh(r))throw Error(t(299));var l=!1,h="",f=h0;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onRecoverableError!==void 0&&(f=a.onRecoverableError)),a=Qh(r,1,!1,null,null,l,!1,h,f),r[Fr]=a.current,$o(r.nodeType===8?r.parentNode:r),new Jh(a)},cn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Co(a),r=r===null?null:r.stateNode,r},cn.flushSync=function(r){return wi(r)},cn.hydrate=function(r,a,l){if(!su(a))throw Error(t(200));return iu(null,r,a,!0,l)},cn.hydrateRoot=function(r,a,l){if(!Xh(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,x="",N=h0;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(x=l.identifierPrefix),l.onRecoverableError!==void 0&&(N=l.onRecoverableError)),a=u0(a,null,r,1,l??null,f,!1,x,N),r[Fr]=a.current,$o(r),h)for(r=0;r<h.length;r++)l=h[r],f=l._getVersion,f=f(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,f]:a.mutableSourceEagerHydrationData.push(l,f);return new ru(a)},cn.render=function(r,a,l){if(!su(a))throw Error(t(200));return iu(null,r,a,!1,l)},cn.unmountComponentAtNode=function(r){if(!su(r))throw Error(t(40));return r._reactRootContainer?(wi(function(){iu(null,null,r,!1,function(){r._reactRootContainer=null,r[Fr]=null})}),!0):!1},cn.unstable_batchedUpdates=zh,cn.unstable_renderSubtreeIntoContainer=function(r,a,l,h){if(!su(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return iu(r,a,l,!1,h)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var b0;function Wb(){if(b0)return tm.exports;b0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tm.exports=qb(),tm.exports}var _0;function Gb(){if(_0)return ou;_0=1;var n=Wb();return ou.createRoot=n.createRoot,ou.hydrateRoot=n.hydrateRoot,ou}var Kb=Gb(),V=ef();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var N0="popstate";function Qb(n={}){function e(i,o){let{pathname:c,search:d,hash:m}=i.location;return _m("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:_l(o)}return Jb(e,t,null,n)}function rt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function er(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yb(){return Math.random().toString(36).substring(2,10)}function j0(n,e){return{usr:n.state,key:n.key,idx:e}}function _m(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?eo(e):e,state:t,key:e&&e.key||i||Yb()}}function _l({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function eo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Jb(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:c=!1}=i,d=o.history,m="POP",p=null,g=v();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function v(){return(d.state||{idx:null}).idx}function _(){m="POP";let A=v(),q=A==null?null:A-g;g=A,p&&p({action:m,location:D.location,delta:q})}function b(A,q){m="PUSH";let I=_m(D.location,A,q);g=v()+1;let R=j0(I,g),K=D.createHref(I);try{d.pushState(R,"",K)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;o.location.assign(K)}c&&p&&p({action:m,location:D.location,delta:1})}function O(A,q){m="REPLACE";let I=_m(D.location,A,q);g=v();let R=j0(I,g),K=D.createHref(I);d.replaceState(R,"",K),c&&p&&p({action:m,location:D.location,delta:0})}function k(A){return Xb(A)}let D={get action(){return m},get location(){return n(o,d)},listen(A){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(N0,_),p=A,()=>{o.removeEventListener(N0,_),p=null}},createHref(A){return e(o,A)},createURL:k,encodeLocation(A){let q=k(A);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:b,replace:O,go(A){return d.go(A)}};return D}function Xb(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),rt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:_l(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function fx(n,e,t="/"){return Zb(n,e,t,!1)}function Zb(n,e,t,i){let o=typeof e=="string"?eo(e):e,c=Xr(o.pathname||"/",t);if(c==null)return null;let d=px(n);e1(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=d1(c);m=c1(d[p],g,i)}return m}function px(n,e=[],t=[],i="",o=!1){let c=(d,m,p=o,g)=>{let v={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(i)&&p)return;rt(v.relativePath.startsWith(i),`Absolute route path "${v.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(i.length)}let _=Qr([i,v.relativePath]),b=t.concat(v);d.children&&d.children.length>0&&(rt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),px(d.children,e,b,_,p)),!(d.path==null&&!d.index)&&e.push({path:_,score:o1(_,d.index),routesMeta:b})};return n.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let p of gx(d.path))c(d,m,!0,p)}),e}function gx(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(i.length===0)return o?[c,""]:[c];let d=gx(i.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&m.push(...d),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function e1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:l1(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var t1=/^:[\w-]+$/,n1=3,r1=2,s1=1,i1=10,a1=-2,E0=n=>n==="*";function o1(n,e){let t=n.split("/"),i=t.length;return t.some(E0)&&(i+=a1),e&&(i+=r1),t.filter(o=>!E0(o)).reduce((o,c)=>o+(t1.test(c)?n1:c===""?s1:i1),i)}function l1(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function c1(n,e,t=!1){let{routesMeta:i}=n,o={},c="/",d=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,v=c==="/"?e:e.slice(c.length)||"/",_=Tu({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!_&&g&&t&&!i[i.length-1].route.index&&(_=Tu({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!_)return null;Object.assign(o,_.params),d.push({params:o,pathname:Qr([c,_.pathname]),pathnameBase:p1(Qr([c,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(c=Qr([c,_.pathnameBase]))}return d}function Tu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=u1(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:_},b)=>{if(v==="*"){let k=m[b]||"";d=c.slice(0,c.length-k.length).replace(/(.)\/+$/,"$1")}const O=m[b];return _&&!O?g[v]=void 0:g[v]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:n}}function u1(n,e=!1,t=!0){er(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function d1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return er(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Xr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function h1(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?eo(n):n;return{pathname:t?t.startsWith("/")?t:m1(t,e):e,search:g1(i),hash:y1(o)}}function m1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function sm(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function f1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tf(n){let e=f1(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function nf(n,e,t,i=!1){let o;typeof n=="string"?o=eo(n):(o={...n},rt(!o.pathname||!o.pathname.includes("?"),sm("?","pathname","search",o)),rt(!o.pathname||!o.pathname.includes("#"),sm("#","pathname","hash",o)),rt(!o.search||!o.search.includes("#"),sm("#","search","hash",o)));let c=n===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=t;else{let _=e.length-1;if(!i&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),_-=1;o.pathname=b.join("/")}m=_>=0?e[_]:"/"}let p=h1(o,m),g=d&&d!=="/"&&d.endsWith("/"),v=(c||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Qr=n=>n.join("/").replace(/\/\/+/g,"/"),p1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),g1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,y1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function x1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var yx=["POST","PUT","PATCH","DELETE"];new Set(yx);var v1=["GET",...yx];new Set(v1);var to=V.createContext(null);to.displayName="DataRouter";var Ju=V.createContext(null);Ju.displayName="DataRouterState";V.createContext(!1);var xx=V.createContext({isTransitioning:!1});xx.displayName="ViewTransition";var w1=V.createContext(new Map);w1.displayName="Fetchers";var b1=V.createContext(null);b1.displayName="Await";var ir=V.createContext(null);ir.displayName="Navigation";var Rl=V.createContext(null);Rl.displayName="Location";var ar=V.createContext({outlet:null,matches:[],isDataRoute:!1});ar.displayName="Route";var rf=V.createContext(null);rf.displayName="RouteError";function _1(n,{relative:e}={}){rt(no(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(ir),{hash:o,pathname:c,search:d}=Dl(n,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:Qr([t,c])),i.createHref({pathname:m,search:d,hash:o})}function no(){return V.useContext(Rl)!=null}function en(){return rt(no(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Rl).location}var vx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wx(n){V.useContext(ir).static||V.useLayoutEffect(n)}function ut(){let{isDataRoute:n}=V.useContext(ar);return n?L1():N1()}function N1(){rt(no(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(to),{basename:e,navigator:t}=V.useContext(ir),{matches:i}=V.useContext(ar),{pathname:o}=en(),c=JSON.stringify(tf(i)),d=V.useRef(!1);return wx(()=>{d.current=!0}),V.useCallback((p,g={})=>{if(er(d.current,vx),!d.current)return;if(typeof p=="number"){t.go(p);return}let v=nf(p,JSON.parse(c),o,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Qr([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,c,o,n])}V.createContext(null);function sf(){let{matches:n}=V.useContext(ar),e=n[n.length-1];return e?e.params:{}}function Dl(n,{relative:e}={}){let{matches:t}=V.useContext(ar),{pathname:i}=en(),o=JSON.stringify(tf(t));return V.useMemo(()=>nf(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function j1(n,e){return bx(n,e)}function bx(n,e,t,i,o){rt(no(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=V.useContext(ir),{matches:d}=V.useContext(ar),m=d[d.length-1],p=m?m.params:{},g=m?m.pathname:"/",v=m?m.pathnameBase:"/",_=m&&m.route;{let I=_&&_.path||"";_x(g,!_||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let b=en(),O;if(e){let I=typeof e=="string"?eo(e):e;rt(v==="/"||I.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${I.pathname}" was given in the \`location\` prop.`),O=I}else O=b;let k=O.pathname||"/",D=k;if(v!=="/"){let I=v.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=fx(n,{pathname:D});er(_||A!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),er(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=k1(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},p,I.params),pathname:Qr([v,c.encodeLocation?c.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?v:Qr([v,c.encodeLocation?c.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),d,t,i,o);return e&&q?V.createElement(Rl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},q):q}function E1(){let n=D1(),e=x1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:c},"ErrorBoundary")," or"," ",V.createElement("code",{style:c},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:o},t):null,d)}var C1=V.createElement(E1,null),I1=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?V.createElement(ar.Provider,{value:this.props.routeContext},V.createElement(rf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T1({routeContext:n,match:e,children:t}){let i=V.useContext(to);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(ar.Provider,{value:n},t)}function k1(n,e=[],t=null,i=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=t?.errors;if(d!=null){let g=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);rt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,g+1))}let m=!1,p=-1;if(t)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:_,errors:b}=t,O=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!b||b[v.route.id]===void 0);if(v.route.lazy||O){m=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((g,v,_)=>{let b,O=!1,k=null,D=null;t&&(b=d&&v.route.id?d[v.route.id]:void 0,k=v.route.errorElement||C1,m&&(p<0&&_===0?(_x("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,D=null):p===_&&(O=!0,D=v.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,_+1)),q=()=>{let I;return b?I=k:O?I=D:v.route.Component?I=V.createElement(v.route.Component,null):v.route.element?I=v.route.element:I=g,V.createElement(T1,{match:v,routeContext:{outlet:g,matches:A,isDataRoute:t!=null},children:I})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?V.createElement(I1,{location:t.location,revalidation:t.revalidation,component:k,error:b,children:q(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:i}):q()},null)}function af(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S1(n){let e=V.useContext(to);return rt(e,af(n)),e}function A1(n){let e=V.useContext(Ju);return rt(e,af(n)),e}function P1(n){let e=V.useContext(ar);return rt(e,af(n)),e}function of(n){let e=P1(n),t=e.matches[e.matches.length-1];return rt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function R1(){return of("useRouteId")}function D1(){let n=V.useContext(rf),e=A1("useRouteError"),t=of("useRouteError");return n!==void 0?n:e.errors?.[t]}function L1(){let{router:n}=S1("useNavigate"),e=of("useNavigate"),t=V.useRef(!1);return wx(()=>{t.current=!0}),V.useCallback(async(o,c={})=>{er(t.current,vx),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...c}))},[n,e])}var C0={};function _x(n,e,t){!e&&!C0[n]&&(C0[n]=!0,er(!1,t))}V.memo(V1);function V1({routes:n,future:e,state:t,unstable_onError:i}){return bx(n,void 0,t,i,e)}function im({to:n,replace:e,state:t,relative:i}){rt(no(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(ir);er(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=V.useContext(ar),{pathname:d}=en(),m=ut(),p=nf(n,tf(c),d,i==="path"),g=JSON.stringify(p);return V.useEffect(()=>{m(JSON.parse(g),{replace:e,state:t,relative:i})},[m,g,i,e,t]),null}function lt(n){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M1({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:c=!1}){rt(!no(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof t=="string"&&(t=eo(t));let{pathname:p="/",search:g="",hash:v="",state:_=null,key:b="default"}=t,O=V.useMemo(()=>{let k=Xr(p,d);return k==null?null:{location:{pathname:k,search:g,hash:v,state:_,key:b},navigationType:i}},[d,p,g,v,_,b,i]);return er(O!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:V.createElement(ir.Provider,{value:m},V.createElement(Rl.Provider,{children:e,value:O}))}function O1({children:n,location:e}){return j1(Nm(n),e)}function Nm(n,e=[]){let t=[];return V.Children.forEach(n,(i,o)=>{if(!V.isValidElement(i))return;let c=[...e,o];if(i.type===V.Fragment){t.push.apply(t,Nm(i.props.children,c));return}rt(i.type===lt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Nm(i.props.children,c)),t.push(d)}),t}var gu="get",yu="application/x-www-form-urlencoded";function Xu(n){return n!=null&&typeof n.tagName=="string"}function F1(n){return Xu(n)&&n.tagName.toLowerCase()==="button"}function U1(n){return Xu(n)&&n.tagName.toLowerCase()==="form"}function B1(n){return Xu(n)&&n.tagName.toLowerCase()==="input"}function $1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function z1(n,e){return n.button===0&&(!e||e==="_self")&&!$1(n)}var lu=null;function H1(){if(lu===null)try{new FormData(document.createElement("form"),0),lu=!1}catch{lu=!0}return lu}var q1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function am(n){return n!=null&&!q1.has(n)?(er(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yu}"`),null):n}function W1(n,e){let t,i,o,c,d;if(U1(n)){let m=n.getAttribute("action");i=m?Xr(m,e):null,t=n.getAttribute("method")||gu,o=am(n.getAttribute("enctype"))||yu,c=new FormData(n)}else if(F1(n)||B1(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||m.getAttribute("action");if(i=p?Xr(p,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||gu,o=am(n.getAttribute("formenctype"))||am(m.getAttribute("enctype"))||yu,c=new FormData(m,n),!H1()){let{name:g,type:v,value:_}=n;if(v==="image"){let b=g?`${g}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else g&&c.append(g,_)}}else{if(Xu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gu,i=null,o=yu,d=n}return c&&o==="text/plain"&&(d=c,c=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function G1(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Xr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function K1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Q1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Y1(n,e,t){let i=await Promise.all(n.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await K1(c,t);return d.links?d.links():[]}return[]}));return e_(i.flat(1).filter(Q1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function I0(n,e,t,i,o,c){let d=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,m=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):c==="data"?e.filter((p,g)=>{let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function J1(n,e,{includeHydrateFallback:t}={}){return X1(n.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function X1(n){return[...new Set(n)]}function Z1(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function e_(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let c=JSON.stringify(Z1(o));return t.has(c)||(t.add(c),i.push({key:c,link:o})),i},[])}function Nx(){let n=V.useContext(to);return lf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function t_(){let n=V.useContext(Ju);return lf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var cf=V.createContext(void 0);cf.displayName="FrameworkContext";function jx(){let n=V.useContext(cf);return lf(n,"You must render this element inside a <HydratedRouter> element"),n}function n_(n,e){let t=V.useContext(cf),[i,o]=V.useState(!1),[c,d]=V.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:_}=e,b=V.useRef(null);V.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let D=q=>{q.forEach(I=>{d(I.isIntersecting)})},A=new IntersectionObserver(D,{threshold:.5});return b.current&&A.observe(b.current),()=>{A.disconnect()}}},[n]),V.useEffect(()=>{if(i){let D=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(D)}}},[i]);let O=()=>{o(!0)},k=()=>{o(!1),d(!1)};return t?n!=="intent"?[c,b,{}]:[c,b,{onFocus:ol(m,O),onBlur:ol(p,k),onMouseEnter:ol(g,O),onMouseLeave:ol(v,k),onTouchStart:ol(_,O)}]:[!1,b,{}]}function ol(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function r_({page:n,...e}){let{router:t}=Nx(),i=V.useMemo(()=>fx(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(i_,{page:n,matches:i,...e}):null}function s_(n){let{manifest:e,routeModules:t}=jx(),[i,o]=V.useState([]);return V.useEffect(()=>{let c=!1;return Y1(n,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[n,e,t]),i}function i_({page:n,matches:e,...t}){let i=en(),{manifest:o,routeModules:c}=jx(),{basename:d}=Nx(),{loaderData:m,matches:p}=t_(),g=V.useMemo(()=>I0(n,e,p,o,i,"data"),[n,e,p,o,i]),v=V.useMemo(()=>I0(n,e,p,o,i,"assets"),[n,e,p,o,i]),_=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let k=new Set,D=!1;if(e.forEach(q=>{let I=o.routes[q.route.id];!I||!I.hasLoader||(!g.some(R=>R.route.id===q.route.id)&&q.route.id in m&&c[q.route.id]?.shouldRevalidate||I.hasClientLoader?D=!0:k.add(q.route.id))}),k.size===0)return[];let A=G1(n,d,"data");return D&&k.size>0&&A.searchParams.set("_routes",e.filter(q=>k.has(q.route.id)).map(q=>q.route.id).join(",")),[A.pathname+A.search]},[d,m,i,o,g,e,n,c]),b=V.useMemo(()=>J1(v,o),[v,o]),O=s_(v);return V.createElement(V.Fragment,null,_.map(k=>V.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),b.map(k=>V.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),O.map(({key:k,link:D})=>V.createElement("link",{key:k,nonce:t.nonce,...D})))}function a_(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ex=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ex&&(window.__reactRouterVersion="7.8.2")}catch{}function o_({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=Qb({window:t,v5Compat:!0}));let o=i.current,[c,d]=V.useState({action:o.action,location:o.location}),m=V.useCallback(p=>{V.startTransition(()=>d(p))},[d]);return V.useLayoutEffect(()=>o.listen(m),[o,m]),V.createElement(M1,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o})}var Cx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:m,target:p,to:g,preventScrollReset:v,viewTransition:_,...b},O){let{basename:k}=V.useContext(ir),D=typeof g=="string"&&Cx.test(g),A,q=!1;if(typeof g=="string"&&D&&(A=g,Ex))try{let S=new URL(window.location.href),M=g.startsWith("//")?new URL(S.protocol+g):new URL(g),L=Xr(M.pathname,k);M.origin===S.origin&&L!=null?g=L+M.search+M.hash:q=!0}catch{er(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=_1(g,{relative:o}),[R,K,X]=n_(i,b),re=d_(g,{replace:d,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:_});function E(S){e&&e(S),S.defaultPrevented||re(S)}let C=V.createElement("a",{...b,...X,href:A||I,onClick:q||c?e:E,ref:a_(O,K),target:p,"data-discover":!D&&t==="render"?"true":void 0});return R&&!D?V.createElement(V.Fragment,null,C,V.createElement(r_,{page:I})):C});_e.displayName="Link";var l_=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:c,to:d,viewTransition:m,children:p,...g},v){let _=Dl(d,{relative:g.relative}),b=en(),O=V.useContext(Ju),{navigator:k,basename:D}=V.useContext(ir),A=O!=null&&g_(_)&&m===!0,q=k.encodeLocation?k.encodeLocation(_).pathname:_.pathname,I=b.pathname,R=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(I=I.toLowerCase(),R=R?R.toLowerCase():null,q=q.toLowerCase()),R&&D&&(R=Xr(R,D)||R);const K=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let X=I===q||!o&&I.startsWith(q)&&I.charAt(K)==="/",re=R!=null&&(R===q||!o&&R.startsWith(q)&&R.charAt(q.length)==="/"),E={isActive:X,isPending:re,isTransitioning:A},C=X?e:void 0,S;typeof i=="function"?S=i(E):S=[i,X?"active":null,re?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(E):c;return V.createElement(_e,{...g,"aria-current":C,className:S,ref:v,style:M,to:d,viewTransition:m},typeof p=="function"?p(E):p)});l_.displayName="NavLink";var c_=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:c,method:d=gu,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:_,...b},O)=>{let k=f_(),D=p_(m,{relative:g}),A=d.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&Cx.test(m),I=R=>{if(p&&p(R),R.defaultPrevented)return;R.preventDefault();let K=R.nativeEvent.submitter,X=K?.getAttribute("formmethod")||d;k(K||R.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:o,state:c,relative:g,preventScrollReset:v,viewTransition:_})};return V.createElement("form",{ref:O,method:A,action:D,onSubmit:i?p:I,...b,"data-discover":!q&&n==="render"?"true":void 0})});c_.displayName="Form";function u_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ix(n){let e=V.useContext(to);return rt(e,u_(n)),e}function d_(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:c,viewTransition:d}={}){let m=ut(),p=en(),g=Dl(n,{relative:c});return V.useCallback(v=>{if(z1(v,e)){v.preventDefault();let _=t!==void 0?t:_l(p)===_l(g);m(n,{replace:_,state:i,preventScrollReset:o,relative:c,viewTransition:d})}},[p,m,g,t,i,e,n,o,c,d])}var h_=0,m_=()=>`__${String(++h_)}__`;function f_(){let{router:n}=Ix("useSubmit"),{basename:e}=V.useContext(ir),t=R1();return V.useCallback(async(i,o={})=>{let{action:c,method:d,encType:m,formData:p,body:g}=W1(i,e);if(o.navigate===!1){let v=o.fetcherKey||m_();await n.fetch(v,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await n.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function p_(n,{relative:e}={}){let{basename:t}=V.useContext(ir),i=V.useContext(ar);rt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),c={...Dl(n||".",{relative:e})},d=en();if(n==null){c.search=d.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(_=>_).forEach(_=>m.append("index",_));let v=m.toString();c.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Qr([t,c.pathname])),_l(c)}function g_(n,{relative:e}={}){let t=V.useContext(xx);rt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ix("useViewTransitionState"),o=Dl(n,{relative:e});if(!t.isTransitioning)return!1;let c=Xr(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=Xr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Tu(o.pathname,d)!=null||Tu(o.pathname,c)!=null}const y_=()=>{};var T0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},x_=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const c=n[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=n[t++],d=n[t++],m=n[t++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const c=n[t++],d=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},kx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const c=n[o],d=o+1<n.length,m=d?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,v=c>>2,_=(c&3)<<4|m>>4;let b=(m&15)<<2|g>>6,O=g&63;p||(O=64,d||(b=64)),i.push(t[v],t[_],t[b],t[O])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Tx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):x_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const c=t[n.charAt(o++)],m=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const _=o<n.length?t[n.charAt(o)]:64;if(++o,c==null||m==null||g==null||_==null)throw new v_;const b=c<<2|m>>4;if(i.push(b),g!==64){const O=m<<4&240|g>>2;if(i.push(O),_!==64){const k=g<<6&192|_;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class v_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w_=function(n){const e=Tx(n);return kx.encodeByteArray(e,!0)},ku=function(n){return w_(n).replace(/\./g,"")},Sx=function(n){try{return kx.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=()=>b_().__FIREBASE_DEFAULTS__,N_=()=>{if(typeof process>"u"||typeof T0>"u")return;const n=T0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},j_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Sx(n[1]);return e&&JSON.parse(e)},Zu=()=>{try{return y_()||__()||N_()||j_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ax=n=>Zu()?.emulatorHosts?.[n],E_=n=>{const e=Ax(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Px=()=>Zu()?.config,Rx=n=>Zu()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ku(JSON.stringify(t)),ku(JSON.stringify(d)),""].join(".")}const fl={};function T_(){const n={prod:[],emulator:[]};for(const e of Object.keys(fl))fl[e]?n.emulator.push(e):n.prod.push(e);return n}function k_(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let k0=!1;function Lx(n,e){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||fl[n]===e||fl[n]||k0)return;fl[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",c=T_().prod.length>0;function d(){const b=document.getElementById(i);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,O){b.setAttribute("width","24"),b.setAttribute("id",O),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{k0=!0,d()},b}function v(b,O){b.setAttribute("id",O),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=k_(i),O=t("text"),k=document.getElementById(O)||document.createElement("span"),D=t("learnmore"),A=document.getElementById(D)||document.createElement("a"),q=t("preprendIcon"),I=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const R=b.element;m(R),v(A,D);const K=g();p(I,q),R.append(I,k,A,K),document.body.appendChild(R)}c?(k.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function A_(){const n=Zu()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Vx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function R_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D_(){const n=Kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function L_(){return!A_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ox(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function V_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="FirebaseError";class or extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=M_,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Di.prototype.create)}}class Di{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?O_(c,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new or(o,m,i)}}function O_(n,e){return n.replace(F_,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const F_=/\{\$([^}]+)}/g;function U_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const c=n[o],d=e[o];if(S0(c)&&S0(d)){if(!Fs(c,d))return!1}else if(c!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function S0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,c]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function cl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function B_(n,e){const t=new $_(n,e);return t.subscribe.bind(t)}class $_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");z_(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=om),o.error===void 0&&(o.error=om),o.complete===void 0&&(o.complete=om);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z_(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=1e3,q_=2,W_=14400*1e3,G_=.5;function A0(n,e=H_,t=q_){const i=e*Math.pow(t,n),o=Math.round(G_*i*(Math.random()-.5)*2);return Math.min(W_,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n){return n&&n._delegate?n._delegate:n}class tr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new C_;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y_(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);i===m&&d.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Q_(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q_(n){return n===ji?void 0:n}function Y_(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new K_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(De||(De={}));const X_={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},Z_=De.INFO,e3={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},t3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=e3[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ed{constructor(e){this.name=e,this._logLevel=Z_,this._logHandler=t3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const n3=(n,e)=>e.some(t=>n instanceof t);let P0,R0;function r3(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s3(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,jm=new WeakMap,Ux=new WeakMap,lm=new WeakMap,uf=new WeakMap;function i3(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(Ls(n.result)),o()},d=()=>{i(n.error),o()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Fx.set(t,n)}).catch(()=>{}),uf.set(e,n),e}function a3(n){if(jm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});jm.set(n,e)}let Em={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ux.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function o3(n){Em=n(Em)}function l3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cm(this),e,...t);return Ux.set(i,e.sort?e.sort():[e]),Ls(i)}:s3().includes(n)?function(...e){return n.apply(cm(this),e),Ls(Fx.get(this))}:function(...e){return Ls(n.apply(cm(this),e))}}function c3(n){return typeof n=="function"?l3(n):(n instanceof IDBTransaction&&a3(n),n3(n,r3())?new Proxy(n,Em):n)}function Ls(n){if(n instanceof IDBRequest)return i3(n);if(lm.has(n))return lm.get(n);const e=c3(n);return e!==n&&(lm.set(n,e),uf.set(e,n)),e}const cm=n=>uf.get(n);function Bx(n,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){const d=indexedDB.open(n,e),m=Ls(d);return i&&d.addEventListener("upgradeneeded",p=>{i(Ls(d.result),p.oldVersion,p.newVersion,Ls(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const u3=["get","getKey","getAll","getAllKeys","count"],d3=["put","add","delete","clear"],um=new Map;function D0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=d3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||u3.includes(t)))return;const c=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),o&&p.done]))[0]};return um.set(e,c),c}o3(n=>({...n,get:(e,t,i)=>D0(e,t)||n.get(e,t,i),has:(e,t)=>!!D0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(m3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function m3(n){return n.getComponent()?.type==="VERSION"}const Cm="@firebase/app",L0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new ed("@firebase/app"),f3="@firebase/app-compat",p3="@firebase/analytics-compat",g3="@firebase/analytics",y3="@firebase/app-check-compat",x3="@firebase/app-check",v3="@firebase/auth",w3="@firebase/auth-compat",b3="@firebase/database",_3="@firebase/data-connect",N3="@firebase/database-compat",j3="@firebase/functions",E3="@firebase/functions-compat",C3="@firebase/installations",I3="@firebase/installations-compat",T3="@firebase/messaging",k3="@firebase/messaging-compat",S3="@firebase/performance",A3="@firebase/performance-compat",P3="@firebase/remote-config",R3="@firebase/remote-config-compat",D3="@firebase/storage",L3="@firebase/storage-compat",V3="@firebase/firestore",M3="@firebase/ai",O3="@firebase/firestore-compat",F3="firebase",U3="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",B3={[Cm]:"fire-core",[f3]:"fire-core-compat",[g3]:"fire-analytics",[p3]:"fire-analytics-compat",[x3]:"fire-app-check",[y3]:"fire-app-check-compat",[v3]:"fire-auth",[w3]:"fire-auth-compat",[b3]:"fire-rtdb",[_3]:"fire-data-connect",[N3]:"fire-rtdb-compat",[j3]:"fire-fn",[E3]:"fire-fn-compat",[C3]:"fire-iid",[I3]:"fire-iid-compat",[T3]:"fire-fcm",[k3]:"fire-fcm-compat",[S3]:"fire-perf",[A3]:"fire-perf-compat",[P3]:"fire-rc",[R3]:"fire-rc-compat",[D3]:"fire-gcs",[L3]:"fire-gcs-compat",[V3]:"fire-fst",[O3]:"fire-fst-compat",[M3]:"fire-vertex","fire-js":"fire-js",[F3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Map,$3=new Map,Tm=new Map;function V0(n,e){try{n.container.addComponent(e)}catch(t){Zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tr(n){const e=n.name;if(Tm.has(e))return Zr.debug(`There were multiple attempts to register component ${e}.`),!1;Tm.set(e,n);for(const t of Su.values())V0(t,n);for(const t of $3.values())V0(t,n);return!0}function Li(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new Di("app","Firebase",z3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=U3;function $x(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Im,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Vs.create("bad-app-name",{appName:String(o)});if(t||(t=Px()),!t)throw Vs.create("no-options");const c=Su.get(o);if(c){if(Fs(t,c.options)&&Fs(i,c.config))return c;throw Vs.create("duplicate-app",{appName:o})}const d=new J_(o);for(const p of Tm.values())d.addComponent(p);const m=new H3(t,i,d);return Su.set(o,m),m}function df(n=Im){const e=Su.get(n);if(!e&&n===Im&&Px())return $x();if(!e)throw Vs.create("no-app",{appName:n});return e}function Ln(n,e,t){let i=B3[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${i}" with version "${e}":`];o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zr.warn(d.join(" "));return}Tr(new tr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="firebase-heartbeat-database",W3=1,Nl="firebase-heartbeat-store";let dm=null;function zx(){return dm||(dm=Bx(q3,W3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vs.create("idb-open",{originalErrorMessage:n.message})})),dm}async function G3(n){try{const t=(await zx()).transaction(Nl),i=await t.objectStore(Nl).get(Hx(n));return await t.done,i}catch(e){if(e instanceof or)Zr.warn(e.message);else{const t=Vs.create("idb-get",{originalErrorMessage:e?.message});Zr.warn(t.message)}}}async function M0(n,e){try{const i=(await zx()).transaction(Nl,"readwrite");await i.objectStore(Nl).put(e,Hx(n)),await i.done}catch(t){if(t instanceof or)Zr.warn(t.message);else{const i=Vs.create("idb-set",{originalErrorMessage:t?.message});Zr.warn(i.message)}}}function Hx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=1024,Q3=30;class Y3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new X3(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=O0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Q3){const o=Z3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=O0(),{heartbeatsToSend:t,unsentEntries:i}=J3(this._heartbeatsCache.heartbeats),o=ku(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Zr.warn(e),""}}}function O0(){return new Date().toISOString().substring(0,10)}function J3(n,e=K3){const t=[];let i=n.slice();for(const o of n){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),F0(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),F0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class X3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mx()?Ox().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await G3(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return M0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function F0(n){return ku(JSON.stringify({version:2,heartbeats:n})).length}function Z3(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(n){Tr(new tr("platform-logger",e=>new h3(e),"PRIVATE")),Tr(new tr("heartbeat",e=>new Y3(e),"PRIVATE")),Ln(Cm,L0,n),Ln(Cm,L0,"esm2020"),Ln("fire-js","")}eN("");function qx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tN=qx,Wx=new Di("auth","Firebase",qx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new ed("@firebase/auth");function nN(n,...e){Au.logLevel<=De.WARN&&Au.warn(`Auth (${so}): ${n}`,...e)}function xu(n,...e){Au.logLevel<=De.ERROR&&Au.error(`Auth (${so}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n,...e){throw hf(n,...e)}function br(n,...e){return hf(n,...e)}function Gx(n,e,t){const i={...tN(),[e]:t};return new Di("auth","Firebase",i).create(e,{appName:n.name})}function Yr(n){return Gx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Wx.create(n,...e)}function Ne(n,e,...t){if(!n)throw hf(e,...t)}function Gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xu(e),new Error(e)}function es(n,e){n||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(){return typeof self<"u"&&self.location?.href||""}function rN(){return U0()==="http:"||U0()==="https:"}function U0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rN()||Vx()||"connection"in navigator)?navigator.onLine:!0}function iN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t){this.shortDelay=e,this.longDelay=t,es(t>e,"Short delay should be less than long delay!"),this.isMobile=S_()||R_()}get(){return sN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(n,e){es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lN=new Vl(3e4,6e4);function Ws(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Gs(n,e,t,i,o={}){return Qx(n,o,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const m=Ll({key:n.config.apiKey,...d}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...c};return P_()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&ro(n.emulatorConfig.host)&&(g.credentials="include"),Kx.fetch()(await Yx(n,n.config.apiHost,t,m),g)})}async function Qx(n,e,t){n._canInitEmulator=!1;const i={...aN,...e};try{const o=new uN(n),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw cu(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(n,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw cu(n,"email-already-in-use",d);if(p==="USER_DISABLED")throw cu(n,"user-disabled",d);const v=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Gx(n,v,g);nr(n,v)}}catch(o){if(o instanceof or)throw o;nr(n,"network-request-failed",{message:String(o)})}}async function Ml(n,e,t,i,o={}){const c=await Gs(n,e,t,i,o);return"mfaPendingCredential"in c&&nr(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function Yx(n,e,t,i){const o=`${e}${t}?${i}`,c=n,d=c.config.emulator?mf(n.config,o):`${n.config.apiScheme}://${o}`;return oN.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function cN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(br(this.auth,"network-request-failed")),lN.get())})}}function cu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=br(n,e,i);return o.customData._tokenResponse=t,o}function B0(n){return n!==void 0&&n.enterprise!==void 0}class dN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hN(n,e){return Gs(n,"GET","/v2/recaptchaConfig",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(n,e){return Gs(n,"POST","/v1/accounts:delete",e)}async function Pu(n,e){return Gs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fN(n,e=!1){const t=wt(n),i=await t.getIdToken(e),o=ff(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:i,authTime:pl(hm(o.auth_time)),issuedAtTime:pl(hm(o.iat)),expirationTime:pl(hm(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function hm(n){return Number(n)*1e3}function ff(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return xu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Sx(t);return o?JSON.parse(o):(xu("Failed to decode base64 JWT payload"),null)}catch(o){return xu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function $0(n){const e=ff(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof or&&pN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function pN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pl(this.lastLoginAt),this.creationTime=pl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(n){const e=n.auth,t=await n.getIdToken(),i=await jl(n,Pu(e,{idToken:t}));Ne(i?.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const c=o.providerUserInfo?.length?Jx(o.providerUserInfo):[],d=xN(n.providerData,c),m=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!d?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Sm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function yN(n){const e=wt(n);await Ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xN(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Jx(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(n,e){const t=await Qx(n,{},async()=>{const i=Ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=n.config,d=await Yx(n,o,"/v1/token",`key=${c}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:i};return n.emulatorConfig&&ro(n.emulatorConfig.host)&&(p.credentials="include"),Kx.fetch()(d,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wN(n,e){return Gs(n,"POST","/v2/accounts:revokeToken",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=$0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:c}=await vN(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:c}=t,d=new Fa;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ne(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new gN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await jl(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fN(this,e)}reload(){return yN(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ru(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(Yr(this.auth));const e=await this.getIdToken();return await jl(this,mN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:O,providerData:k,stsTokenManager:D}=t;Ne(_&&D,e,"internal-error");const A=Fa.fromJSON(this.name,D);Ne(typeof _=="string",e,"internal-error"),Ts(i,e.name),Ts(o,e.name),Ne(typeof b=="boolean",e,"internal-error"),Ne(typeof O=="boolean",e,"internal-error"),Ts(c,e.name),Ts(d,e.name),Ts(m,e.name),Ts(p,e.name),Ts(g,e.name),Ts(v,e.name);const q=new Xn({uid:_,auth:e,email:o,emailVerified:b,displayName:i,isAnonymous:O,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:A,createdAt:g,lastLoginAt:v});return k&&Array.isArray(k)&&(q.providerData=k.map(I=>({...I}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,t,i=!1){const o=new Fa;o.updateFromServerResponse(t);const c=new Xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ru(c),c}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Jx(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new Fa;m.updateFromIdToken(i);const p=new Xn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new Map;function Kr(n){es(n instanceof Function,"Expected a class definition");let e=z0.get(n);return e?(es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xx.type="NONE";const H0=Xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n,e,t){return`firebase:${n}:${e}:${t}`}class Ua{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:c}=this.auth;this.fullUserKey=vu(this.userKey,o.apiKey,c),this.fullPersistenceKey=vu("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Pu(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ua(Kr(H0),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||Kr(H0);const d=vu(i,e.config.apiKey,e.name);let m=null;for(const g of t)try{const v=await g._get(d);if(v){let _;if(typeof v=="string"){const b=await Pu(e,{idToken:v}).catch(()=>{});if(!b)break;_=await Xn._fromGetAccountInfoResponse(e,b,v)}else _=Xn._fromJSON(e,v);g!==c&&(m=_),c=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ua(c,e,i):(c=p[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Ua(c,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(n2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s2(e))return"Blackberry";if(i2(e))return"Webos";if(e2(e))return"Safari";if((e.includes("chrome/")||t2(e))&&!e.includes("edge/"))return"Chrome";if(r2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Zx(n=Kt()){return/firefox\//i.test(n)}function e2(n=Kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function t2(n=Kt()){return/crios\//i.test(n)}function n2(n=Kt()){return/iemobile/i.test(n)}function r2(n=Kt()){return/android/i.test(n)}function s2(n=Kt()){return/blackberry/i.test(n)}function i2(n=Kt()){return/webos/i.test(n)}function pf(n=Kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bN(n=Kt()){return pf(n)&&!!window.navigator?.standalone}function _N(){return D_()&&document.documentMode===10}function a2(n=Kt()){return pf(n)||r2(n)||i2(n)||s2(n)||/windows phone/i.test(n)||n2(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n,e=[]){let t;switch(n){case"Browser":t=q0(Kt());break;case"Worker":t=`${q0(Kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${so}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((d,m)=>{try{const p=e(c);d(p)}catch(p){m(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(n,e={}){return Gs(n,"GET","/v2/passwordPolicy",Ws(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=6;class CN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??EN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W0(this),this.idTokenSubscription=new W0(this),this.beforeStateQueue=new NN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ua.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pu(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=i?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ru(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(Yr(this));const t=e?wt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(Yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(Yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jN(this),t=new CN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Di("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await wN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kr(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Ua.create(this,[Kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=o2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vi(n){return wt(n)}class W0{constructor(e){this.auth=e,this.observer=null,this.addObserver=B_(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TN(n){td=n}function l2(n){return td.loadJS(n)}function kN(){return td.recaptchaEnterpriseScript}function SN(){return td.gapiScript}function AN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class PN{constructor(){this.enterprise=new RN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class RN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const DN="recaptcha-enterprise",c2="NO_RECAPTCHA";class LN{constructor(e){this.type=DN,this.auth=Vi(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{hN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new dN(p);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(c,d,m){const p=window.grecaptcha;B0(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(g=>{d(g)}).catch(()=>{d(c2)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PN().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{i(this.auth).then(m=>{if(!t&&B0(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=kN();p.length!==0&&(p+=m),l2(p).then(()=>{o(m,c,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function G0(n,e,t,i=!1,o=!1){const c=new LN(n);let d;if(o)d=c2;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Am(n,e,t,i,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await G0(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await G0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(n,e){const t=Li(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Fs(c,e??{}))return o;nr(o,"already-initialized")}return t.initialize({options:e})}function MN(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Kr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function ON(n,e,t){const i=Vi(n);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,c=u2(e),{host:d,port:m}=FN(e),p=m===null?"":`:${m}`,g={url:`${c}//${d}${p}/`},v=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Fs(g,i.config.emulator)&&Fs(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ro(d)?(Dx(`${c}//${d}${p}`),Lx("Auth",!0)):UN()}function u2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function FN(n){const e=u2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const c=o[1];return{host:c,port:K0(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:K0(d)}}}function K0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function UN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function BN(n,e){return Gs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(n,e){return Ml(n,"POST","/v1/accounts:signInWithPassword",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(n,e){return Ml(n,"POST","/v1/accounts:signInWithEmailLink",Ws(n,e))}async function HN(n,e){return Ml(n,"POST","/v1/accounts:signInWithEmailLink",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends gf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new El(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new El(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(e,t,"signInWithPassword",$N);case"emailLink":return zN(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(e,i,"signUpPassword",BN);case"emailLink":return HN(e,{idToken:t,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(n,e){return Ml(n,"POST","/v1/accounts:signInWithIdp",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="http://localhost";class Ti extends gf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...c}=t;if(!i||!o)return null;const d=new Ti(i,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Ba(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ba(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ba(e,t)}buildRequest(){const e={requestUri:qN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ll(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GN(n){const e=ll(cl(n)).link,t=e?ll(cl(e)).deep_link_id:null,i=ll(cl(n)).deep_link_id;return(i?ll(cl(i)).link:null)||i||t||e||n}class yf{constructor(e){const t=ll(cl(e)),i=t.apiKey??null,o=t.oobCode??null,c=WN(t.mode??null);Ne(i&&o&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=GN(e);try{return new yf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,t){return El._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=yf.parseLink(t);return Ne(i,"argument-error"),El._fromEmailAndCode(e,i.code,i.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends d2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Ol{constructor(){super("facebook.com")}static credential(e){return Ti._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ti._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return As.credential(t,i)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Ol{constructor(){super("github.com")}static credential(e){return Ti._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Ol{constructor(){super("twitter.com")}static credential(e,t){return Ti._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Rs.credential(t,i)}catch{return null}}}Rs.TWITTER_SIGN_IN_METHOD="twitter.com";Rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(n,e){return Ml(n,"POST","/v1/accounts:signUp",Ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const c=await Xn._fromIdTokenResponse(e,i,o),d=Q0(i);return new ki({user:c,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Q0(i);return new ki({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Q0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends or{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Du.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Du(e,t,i,o)}}function h2(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Du._fromErrorAndOperation(n,c,e,i):c})}async function QN(n,e,t=!1){const i=await jl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ki._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(n,e,t=!1){const{auth:i}=n;if(Rn(i.app))return Promise.reject(Yr(i));const o="reauthenticate";try{const c=await jl(n,h2(i,o,e,n),t);Ne(c.idToken,i,"internal-error");const d=ff(c.idToken);Ne(d,i,"internal-error");const{sub:m}=d;return Ne(n.uid===m,i,"user-mismatch"),ki._forOperation(n,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&nr(i,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(n,e,t=!1){if(Rn(n.app))return Promise.reject(Yr(n));const i="signIn",o=await h2(n,i,e),c=await ki._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(c.user),c}async function JN(n,e){return m2(Vi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(n){const e=Vi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XN(n,e,t){if(Rn(n.app))return Promise.reject(Yr(n));const i=Vi(n),d=await Am(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&f2(n),p}),m=await ki._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(m.user),m}function ZN(n,e,t){return Rn(n.app)?Promise.reject(Yr(n)):JN(wt(n),io.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&f2(n),i})}function ej(n,e,t,i){return wt(n).onIdTokenChanged(e,t,i)}function tj(n,e,t){return wt(n).beforeAuthStateChanged(e,t)}function nj(n,e,t,i){return wt(n).onAuthStateChanged(e,t,i)}function rj(n){return wt(n).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=1e3,ij=10;class g2 extends p2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);_N()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ij):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}g2.type="LOCAL";const aj=g2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2 extends p2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}y2.type="SESSION";const x2=y2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new nd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async g=>g(t.origin,c)),p=await oj(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,p)=>{const g=xf("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(_){const b=_;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(v),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function cj(n){_r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function uj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dj(){return navigator?.serviceWorker?.controller||null}function hj(){return v2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="firebaseLocalStorageDb",mj=1,Vu="firebaseLocalStorage",b2="fbase_key";class Fl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rd(n,e){return n.transaction([Vu],e?"readwrite":"readonly").objectStore(Vu)}function fj(){const n=indexedDB.deleteDatabase(w2);return new Fl(n).toPromise()}function Pm(){const n=indexedDB.open(w2,mj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vu,{keyPath:b2})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vu)?e(i):(i.close(),await fj(),e(await Pm()))})})}async function Y0(n,e,t){const i=rd(n,!0).put({[b2]:e,value:t});return new Fl(i).toPromise()}async function pj(n,e){const t=rd(n,!1).get(e),i=await new Fl(t).toPromise();return i===void 0?null:i.value}function J0(n,e){const t=rd(n,!0).delete(e);return new Fl(t).toPromise()}const gj=800,yj=3;class _2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>yj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(hj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await uj(),!this.activeServiceWorker)return;this.sender=new lj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await Y0(e,Lu,"1"),await J0(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Y0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>pj(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>J0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=rd(o,!1).getAll();return new Fl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_2.type="LOCAL";const xj=_2;new Vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(n,e){return e?Kr(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends gf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ba(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wj(n){return m2(n.auth,new vf(n),n.bypassAuthState)}function bj(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),YN(t,new vf(n),n.bypassAuthState)}async function _j(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),QN(t,new vf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wj;case"linkViaPopup":case"linkViaRedirect":return _j;case"reauthViaPopup":case"reauthViaRedirect":return bj;default:nr(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new Vl(2e3,1e4);class Oa extends N2{constructor(e,t,i,o,c){super(e,t,o,c),this.provider=i,this.authWindow=null,this.pollId=null,Oa.currentPopupAction&&Oa.currentPopupAction.cancel(),Oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nj.get())};e()}}Oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="pendingRedirect",wu=new Map;class Ej extends N2{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const i=await Cj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cj(n,e){const t=kj(e),i=Tj(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function Ij(n,e){wu.set(n._key(),e)}function Tj(n){return Kr(n._redirectPersistence)}function kj(n){return vu(jj,n.config.apiKey,n.name)}async function Sj(n,e,t=!1){if(Rn(n.app))return Promise.reject(Yr(n));const i=Vi(n),o=vj(i,e),d=await new Ej(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=600*1e3;class Pj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!j2(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(br(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Aj&&this.cachedEventUids.clear(),this.cachedEventUids.has(X0(e))}saveEventToCache(e){this.cachedEventUids.add(X0(e)),this.lastProcessedEventTime=Date.now()}}function X0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function j2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Rj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(n,e={}){return Gs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vj=/^https?/;async function Mj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Dj(n);for(const t of e)try{if(Oj(t))return}catch{}nr(n,"unauthorized-domain")}function Oj(n){const e=km(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!Vj.test(t))return!1;if(Lj.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=new Vl(3e4,6e4);function Z0(){const n=_r().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Uj(n){return new Promise((e,t)=>{function i(){Z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z0(),t(br(n,"network-request-failed"))},timeout:Fj.get()})}if(_r().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_r().gapi?.load)i();else{const o=AN("iframefcb");return _r()[o]=()=>{gapi.load?i():t(br(n,"network-request-failed"))},l2(`${SN()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw bu=null,e})}let bu=null;function Bj(n){return bu=bu||Uj(n),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new Vl(5e3,15e3),zj="__/auth/iframe",Hj="emulator/auth/iframe",qj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gj(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mf(e,Hj):`https://${n.config.authDomain}/${zj}`,i={apiKey:e.apiKey,appName:n.name,v:so},o=Wj.get(n.config.apiHost);o&&(i.eid=o);const c=n._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Ll(i).slice(1)}`}async function Kj(n){const e=await Bj(n),t=_r().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:Gj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qj,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});const d=br(n,"network-request-failed"),m=_r().setTimeout(()=>{c(d)},$j.get());function p(){_r().clearTimeout(m),o(i)}i.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yj=500,Jj=600,Xj="_blank",Zj="http://localhost";class ey{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e6(n,e,t,i=Yj,o=Jj){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const p={...Qj,width:i.toString(),height:o.toString(),top:c,left:d},g=Kt().toLowerCase();t&&(m=t2(g)?Xj:t),Zx(g)&&(e=e||Zj,p.scrollbars="yes");const v=Object.entries(p).reduce((b,[O,k])=>`${b}${O}=${k},`,"");if(bN(g)&&m!=="_self")return t6(e||"",m),new ey(null);const _=window.open(e||"",m,v);Ne(_,n,"popup-blocked");try{_.focus()}catch{}return new ey(_)}function t6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6="__/auth/handler",r6="emulator/auth/handler",s6=encodeURIComponent("fac");async function ty(n,e,t,i,o,c){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:so,eventId:o};if(e instanceof d2){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",U_(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))d[v]=_}if(e instanceof Ol){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(d.scopes=v.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await n._getAppCheckToken(),g=p?`#${s6}=${encodeURIComponent(p)}`:"";return`${i6(n)}?${Ll(m).slice(1)}${g}`}function i6({config:n}){return n.emulator?mf(n,r6):`https://${n.authDomain}/${n6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="webStorageSupport";class a6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x2,this._completeRedirectFn=Sj,this._overrideRedirectResult=Ij}async _openPopup(e,t,i,o){es(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await ty(e,t,i,km(),o);return e6(e,c,xf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const c=await ty(e,t,i,km(),o);return cj(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(es(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Kj(e),i=new Pj(e);return t.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mm,{type:mm},o=>{const c=o?.[0]?.[mm];c!==void 0&&t(!!c),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Mj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a2()||e2()||pf()}}const o6=a6;var ny="@firebase/auth",ry="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u6(n){Tr(new tr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;Ne(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:o2(n)},g=new IN(i,o,c,p);return MN(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Tr(new tr("auth-internal",e=>{const t=Vi(e.getProvider("auth").getImmediate());return(i=>new l6(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(ny,ry,c6(n)),Ln(ny,ry,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=300,h6=Rx("authIdTokenMaxAge")||d6;let sy=null;const m6=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>h6)return;const o=t?.token;sy!==o&&(sy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function f6(n=df()){const e=Li(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VN(n,{popupRedirectResolver:o6,persistence:[xj,aj,x2]}),i=Rx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=m6(c.toString());tj(t,d,()=>d(t.currentUser)),ej(t,m=>d(m))}}const o=Ax("auth");return o&&ON(t,`http://${o}`),t}function p6(){return document.getElementsByTagName("head")?.[0]??document}TN({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const c=br("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",p6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u6("Browser");var iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,E2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,C){function S(){}S.prototype=C.prototype,E.D=C.prototype,E.prototype=new S,E.prototype.constructor=E,E.C=function(M,L,U){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return C.prototype[L].apply(M,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(E,C,S){S||(S=0);var M=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)M[L]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(L=0;16>L;++L)M[L]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=E.g[0],S=E.g[1],L=E.g[2];var U=E.g[3],P=C+(U^S&(L^U))+M[0]+3614090360&4294967295;C=S+(P<<7&4294967295|P>>>25),P=U+(L^C&(S^L))+M[1]+3905402710&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(S^U&(C^S))+M[2]+606105819&4294967295,L=U+(P<<17&4294967295|P>>>15),P=S+(C^L&(U^C))+M[3]+3250441966&4294967295,S=L+(P<<22&4294967295|P>>>10),P=C+(U^S&(L^U))+M[4]+4118548399&4294967295,C=S+(P<<7&4294967295|P>>>25),P=U+(L^C&(S^L))+M[5]+1200080426&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(S^U&(C^S))+M[6]+2821735955&4294967295,L=U+(P<<17&4294967295|P>>>15),P=S+(C^L&(U^C))+M[7]+4249261313&4294967295,S=L+(P<<22&4294967295|P>>>10),P=C+(U^S&(L^U))+M[8]+1770035416&4294967295,C=S+(P<<7&4294967295|P>>>25),P=U+(L^C&(S^L))+M[9]+2336552879&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(S^U&(C^S))+M[10]+4294925233&4294967295,L=U+(P<<17&4294967295|P>>>15),P=S+(C^L&(U^C))+M[11]+2304563134&4294967295,S=L+(P<<22&4294967295|P>>>10),P=C+(U^S&(L^U))+M[12]+1804603682&4294967295,C=S+(P<<7&4294967295|P>>>25),P=U+(L^C&(S^L))+M[13]+4254626195&4294967295,U=C+(P<<12&4294967295|P>>>20),P=L+(S^U&(C^S))+M[14]+2792965006&4294967295,L=U+(P<<17&4294967295|P>>>15),P=S+(C^L&(U^C))+M[15]+1236535329&4294967295,S=L+(P<<22&4294967295|P>>>10),P=C+(L^U&(S^L))+M[1]+4129170786&4294967295,C=S+(P<<5&4294967295|P>>>27),P=U+(S^L&(C^S))+M[6]+3225465664&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^S&(U^C))+M[11]+643717713&4294967295,L=U+(P<<14&4294967295|P>>>18),P=S+(U^C&(L^U))+M[0]+3921069994&4294967295,S=L+(P<<20&4294967295|P>>>12),P=C+(L^U&(S^L))+M[5]+3593408605&4294967295,C=S+(P<<5&4294967295|P>>>27),P=U+(S^L&(C^S))+M[10]+38016083&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^S&(U^C))+M[15]+3634488961&4294967295,L=U+(P<<14&4294967295|P>>>18),P=S+(U^C&(L^U))+M[4]+3889429448&4294967295,S=L+(P<<20&4294967295|P>>>12),P=C+(L^U&(S^L))+M[9]+568446438&4294967295,C=S+(P<<5&4294967295|P>>>27),P=U+(S^L&(C^S))+M[14]+3275163606&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^S&(U^C))+M[3]+4107603335&4294967295,L=U+(P<<14&4294967295|P>>>18),P=S+(U^C&(L^U))+M[8]+1163531501&4294967295,S=L+(P<<20&4294967295|P>>>12),P=C+(L^U&(S^L))+M[13]+2850285829&4294967295,C=S+(P<<5&4294967295|P>>>27),P=U+(S^L&(C^S))+M[2]+4243563512&4294967295,U=C+(P<<9&4294967295|P>>>23),P=L+(C^S&(U^C))+M[7]+1735328473&4294967295,L=U+(P<<14&4294967295|P>>>18),P=S+(U^C&(L^U))+M[12]+2368359562&4294967295,S=L+(P<<20&4294967295|P>>>12),P=C+(S^L^U)+M[5]+4294588738&4294967295,C=S+(P<<4&4294967295|P>>>28),P=U+(C^S^L)+M[8]+2272392833&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^S)+M[11]+1839030562&4294967295,L=U+(P<<16&4294967295|P>>>16),P=S+(L^U^C)+M[14]+4259657740&4294967295,S=L+(P<<23&4294967295|P>>>9),P=C+(S^L^U)+M[1]+2763975236&4294967295,C=S+(P<<4&4294967295|P>>>28),P=U+(C^S^L)+M[4]+1272893353&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^S)+M[7]+4139469664&4294967295,L=U+(P<<16&4294967295|P>>>16),P=S+(L^U^C)+M[10]+3200236656&4294967295,S=L+(P<<23&4294967295|P>>>9),P=C+(S^L^U)+M[13]+681279174&4294967295,C=S+(P<<4&4294967295|P>>>28),P=U+(C^S^L)+M[0]+3936430074&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^S)+M[3]+3572445317&4294967295,L=U+(P<<16&4294967295|P>>>16),P=S+(L^U^C)+M[6]+76029189&4294967295,S=L+(P<<23&4294967295|P>>>9),P=C+(S^L^U)+M[9]+3654602809&4294967295,C=S+(P<<4&4294967295|P>>>28),P=U+(C^S^L)+M[12]+3873151461&4294967295,U=C+(P<<11&4294967295|P>>>21),P=L+(U^C^S)+M[15]+530742520&4294967295,L=U+(P<<16&4294967295|P>>>16),P=S+(L^U^C)+M[2]+3299628645&4294967295,S=L+(P<<23&4294967295|P>>>9),P=C+(L^(S|~U))+M[0]+4096336452&4294967295,C=S+(P<<6&4294967295|P>>>26),P=U+(S^(C|~L))+M[7]+1126891415&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~S))+M[14]+2878612391&4294967295,L=U+(P<<15&4294967295|P>>>17),P=S+(U^(L|~C))+M[5]+4237533241&4294967295,S=L+(P<<21&4294967295|P>>>11),P=C+(L^(S|~U))+M[12]+1700485571&4294967295,C=S+(P<<6&4294967295|P>>>26),P=U+(S^(C|~L))+M[3]+2399980690&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~S))+M[10]+4293915773&4294967295,L=U+(P<<15&4294967295|P>>>17),P=S+(U^(L|~C))+M[1]+2240044497&4294967295,S=L+(P<<21&4294967295|P>>>11),P=C+(L^(S|~U))+M[8]+1873313359&4294967295,C=S+(P<<6&4294967295|P>>>26),P=U+(S^(C|~L))+M[15]+4264355552&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~S))+M[6]+2734768916&4294967295,L=U+(P<<15&4294967295|P>>>17),P=S+(U^(L|~C))+M[13]+1309151649&4294967295,S=L+(P<<21&4294967295|P>>>11),P=C+(L^(S|~U))+M[4]+4149444226&4294967295,C=S+(P<<6&4294967295|P>>>26),P=U+(S^(C|~L))+M[11]+3174756917&4294967295,U=C+(P<<10&4294967295|P>>>22),P=L+(C^(U|~S))+M[2]+718787259&4294967295,L=U+(P<<15&4294967295|P>>>17),P=S+(U^(L|~C))+M[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+L&4294967295,E.g[3]=E.g[3]+U&4294967295}i.prototype.u=function(E,C){C===void 0&&(C=E.length);for(var S=C-this.blockSize,M=this.B,L=this.h,U=0;U<C;){if(L==0)for(;U<=S;)o(this,E,U),U+=this.blockSize;if(typeof E=="string"){for(;U<C;)if(M[L++]=E.charCodeAt(U++),L==this.blockSize){o(this,M),L=0;break}}else for(;U<C;)if(M[L++]=E[U++],L==this.blockSize){o(this,M),L=0;break}}this.h=L,this.o+=C},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;var S=8*this.o;for(C=E.length-8;C<E.length;++C)E[C]=S&255,S/=256;for(this.u(E),E=Array(16),C=S=0;4>C;++C)for(var M=0;32>M;M+=8)E[S++]=this.g[C]>>>M&255;return E};function c(E,C){var S=m;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=C(E)}function d(E,C){this.h=C;for(var S=[],M=!0,L=E.length-1;0<=L;L--){var U=E[L]|0;M&&U==C||(S[L]=U,M=!1)}this.g=S}var m={};function p(E){return-128<=E&&128>E?c(E,function(C){return new d([C|0],0>C?-1:0)}):new d([E|0],0>E?-1:0)}function g(E){if(isNaN(E)||!isFinite(E))return _;if(0>E)return A(g(-E));for(var C=[],S=1,M=0;E>=S;M++)C[M]=E/S|0,S*=4294967296;return new d(C,0)}function v(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return A(v(E.substring(1),C));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=g(Math.pow(C,8)),M=_,L=0;L<E.length;L+=8){var U=Math.min(8,E.length-L),P=parseInt(E.substring(L,L+U),C);8>U?(U=g(Math.pow(C,U)),M=M.j(U).add(g(P))):(M=M.j(S),M=M.add(g(P)))}return M}var _=p(0),b=p(1),O=p(16777216);n=d.prototype,n.m=function(){if(D(this))return-A(this).m();for(var E=0,C=1,S=0;S<this.g.length;S++){var M=this.i(S);E+=(0<=M?M:4294967296+M)*C,C*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(D(this))return"-"+A(this).toString(E);for(var C=g(Math.pow(E,6)),S=this,M="";;){var L=K(S,C).g;S=q(S,L.j(C));var U=((0<S.g.length?S.g[0]:S.h)>>>0).toString(E);if(S=L,k(S))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(var C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function D(E){return E.h==-1}n.l=function(E){return E=q(this,E),D(E)?-1:k(E)?0:1};function A(E){for(var C=E.g.length,S=[],M=0;M<C;M++)S[M]=~E.g[M];return new d(S,~E.h).add(b)}n.abs=function(){return D(this)?A(this):this},n.add=function(E){for(var C=Math.max(this.g.length,E.g.length),S=[],M=0,L=0;L<=C;L++){var U=M+(this.i(L)&65535)+(E.i(L)&65535),P=(U>>>16)+(this.i(L)>>>16)+(E.i(L)>>>16);M=P>>>16,U&=65535,P&=65535,S[L]=P<<16|U}return new d(S,S[S.length-1]&-2147483648?-1:0)};function q(E,C){return E.add(A(C))}n.j=function(E){if(k(this)||k(E))return _;if(D(this))return D(E)?A(this).j(A(E)):A(A(this).j(E));if(D(E))return A(this.j(A(E)));if(0>this.l(O)&&0>E.l(O))return g(this.m()*E.m());for(var C=this.g.length+E.g.length,S=[],M=0;M<2*C;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(var L=0;L<E.g.length;L++){var U=this.i(M)>>>16,P=this.i(M)&65535,Ie=E.i(L)>>>16,Me=E.i(L)&65535;S[2*M+2*L]+=P*Me,I(S,2*M+2*L),S[2*M+2*L+1]+=U*Me,I(S,2*M+2*L+1),S[2*M+2*L+1]+=P*Ie,I(S,2*M+2*L+1),S[2*M+2*L+2]+=U*Ie,I(S,2*M+2*L+2)}for(M=0;M<C;M++)S[M]=S[2*M+1]<<16|S[2*M];for(M=C;M<2*C;M++)S[M]=0;return new d(S,0)};function I(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function R(E,C){this.g=E,this.h=C}function K(E,C){if(k(C))throw Error("division by zero");if(k(E))return new R(_,_);if(D(E))return C=K(A(E),C),new R(A(C.g),A(C.h));if(D(C))return C=K(E,A(C)),new R(A(C.g),C.h);if(30<E.g.length){if(D(E)||D(C))throw Error("slowDivide_ only works with positive integers.");for(var S=b,M=C;0>=M.l(E);)S=X(S),M=X(M);var L=re(S,1),U=re(M,1);for(M=re(M,2),S=re(S,2);!k(M);){var P=U.add(M);0>=P.l(E)&&(L=L.add(S),U=P),M=re(M,1),S=re(S,1)}return C=q(E,L.j(C)),new R(L,C)}for(L=_;0<=E.l(C);){for(S=Math.max(1,Math.floor(E.m()/C.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=g(S),P=U.j(C);D(P)||0<P.l(E);)S-=M,U=g(S),P=U.j(C);k(U)&&(U=b),L=L.add(U),E=q(E,P)}return new R(L,E)}n.A=function(E){return K(this,E).h},n.and=function(E){for(var C=Math.max(this.g.length,E.g.length),S=[],M=0;M<C;M++)S[M]=this.i(M)&E.i(M);return new d(S,this.h&E.h)},n.or=function(E){for(var C=Math.max(this.g.length,E.g.length),S=[],M=0;M<C;M++)S[M]=this.i(M)|E.i(M);return new d(S,this.h|E.h)},n.xor=function(E){for(var C=Math.max(this.g.length,E.g.length),S=[],M=0;M<C;M++)S[M]=this.i(M)^E.i(M);return new d(S,this.h^E.h)};function X(E){for(var C=E.g.length+1,S=[],M=0;M<C;M++)S[M]=E.i(M)<<1|E.i(M-1)>>>31;return new d(S,E.h)}function re(E,C){var S=C>>5;C%=32;for(var M=E.g.length-S,L=[],U=0;U<M;U++)L[U]=0<C?E.i(U+S)>>>C|E.i(U+S+1)<<32-C:E.i(U+S);return new d(L,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,E2=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=v,Ms=d}).apply(typeof iy<"u"?iy:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C2,ul,I2,_u,Rm,T2,k2,S2;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,w){return u==Array.prototype||u==Object.prototype||(u[y]=w.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var y=0;y<u.length;++y){var w=u[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function o(u,y){if(y)e:{var w=i;u=u.split(".");for(var j=0;j<u.length-1;j++){var z=u[j];if(!(z in w))break e;w=w[z]}u=u[u.length-1],j=w[u],y=y(j),y!=j&&y!=null&&e(w,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var w=0,j=!1,z={next:function(){if(!j&&w<u.length){var Y=w++;return{value:y(Y,u[Y]),done:!1}}return j=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function g(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function v(u,y,w){return u.call.apply(u.bind,arguments)}function _(u,y,w){if(!u)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,j),u.apply(y,z)}}return function(){return u.apply(y,arguments)}}function b(u,y,w){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:_,b.apply(null,arguments)}function O(u,y){var w=Array.prototype.slice.call(arguments,1);return function(){var j=w.slice();return j.push.apply(j,arguments),u.apply(this,j)}}function k(u,y){function w(){}w.prototype=y.prototype,u.aa=y.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(j,z,Y){for(var le=Array(arguments.length-2),We=2;We<arguments.length;We++)le[We-2]=arguments[We];return y.prototype[z].apply(j,le)}}function D(u){const y=u.length;if(0<y){const w=Array(y);for(let j=0;j<y;j++)w[j]=u[j];return w}return[]}function A(u,y){for(let w=1;w<arguments.length;w++){const j=arguments[w];if(p(j)){const z=u.length||0,Y=j.length||0;u.length=z+Y;for(let le=0;le<Y;le++)u[z+le]=j[le]}else u.push(j)}}class q{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function I(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var X=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function re(u,y,w){for(const j in u)y.call(w,u[j],j,u)}function E(u,y){for(const w in u)y.call(void 0,u[w],w,u)}function C(u){const y={};for(const w in u)y[w]=u[w];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,y){let w,j;for(let z=1;z<arguments.length;z++){j=arguments[z];for(w in j)u[w]=j[w];for(let Y=0;Y<S.length;Y++)w=S[Y],Object.prototype.hasOwnProperty.call(j,w)&&(u[w]=j[w])}}function L(u){var y=1;u=u.split(":");const w=[];for(;0<y&&u.length;)w.push(u.shift()),y--;return u.length&&w.push(u.join(":")),w}function U(u){m.setTimeout(()=>{throw u},0)}function P(){var u=Q;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,w){const j=Me.get();j.set(y,w),this.h?this.h.next=j:this.g=j,this.h=j}}var Me=new q(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,oe=!1,Q=new Ie,ce=()=>{const u=m.Promise.resolve(void 0);Re=()=>{u.then($)}};var $=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(w){U(w)}var y=Me;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}oe=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};m.addEventListener("test",w,y),m.removeEventListener("test",w,y)}catch{}return u})();function xe(u,y){if(ye.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,j=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(X){e:{try{K(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else w=="mouseover"?y=u.fromElement:w=="mouseout"&&(y=u.toElement);this.relatedTarget=y,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}k(xe,ye);var Ee={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ge(u,y,w,j,z){this.listener=u,this.proxy=null,this.src=y,this.type=w,this.capture=!!j,this.ha=z,this.key=++$e,this.da=this.fa=!1}function bt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Tt(u){this.src=u,this.g={},this.h=0}Tt.prototype.add=function(u,y,w,j,z){var Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);var le=lr(u,y,j,z);return-1<le?(y=u[le],w||(y.fa=!1)):(y=new Ge(y,this.src,Y,!!j,z),y.fa=w,u.push(y)),y};function rs(u,y){var w=y.type;if(w in u.g){var j=u.g[w],z=Array.prototype.indexOf.call(j,y,void 0),Y;(Y=0<=z)&&Array.prototype.splice.call(j,z,1),Y&&(bt(y),u.g[w].length==0&&(delete u.g[w],u.h--))}}function lr(u,y,w,j){for(var z=0;z<u.length;++z){var Y=u[z];if(!Y.da&&Y.listener==y&&Y.capture==!!w&&Y.ha==j)return z}return-1}var Ys="closure_lm_"+(1e6*Math.random()|0),zi={};function ho(u,y,w,j,z){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)ho(u,y[Y],w,j,z);return null}return w=po(w),u&&u[Be]?u.K(y,w,g(j)?!!j.capture:!1,z):mo(u,y,w,!1,j,z)}function mo(u,y,w,j,z,Y){if(!y)throw Error("Invalid event type");var le=g(z)?!!z.capture:!!z,We=qi(u);if(We||(u[Ys]=We=new Tt(u)),w=We.add(y,w,j,le,Y),w.proxy)return w;if(j=Wl(),w.proxy=j,j.src=u,j.listener=w,u.addEventListener)Se||(z=le),z===void 0&&(z=!1),u.addEventListener(y.toString(),j,z);else if(u.attachEvent)u.attachEvent(Ar(y.toString()),j);else if(u.addListener&&u.removeListener)u.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Wl(){function u(w){return y.call(u.src,u.listener,w)}const y=fo;return u}function Hi(u,y,w,j,z){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Hi(u,y[Y],w,j,z);else j=g(j)?!!j.capture:!!j,w=po(w),u&&u[Be]?(u=u.i,y=String(y).toString(),y in u.g&&(Y=u.g[y],w=lr(Y,w,j,z),-1<w&&(bt(Y[w]),Array.prototype.splice.call(Y,w,1),Y.length==0&&(delete u.g[y],u.h--)))):u&&(u=qi(u))&&(y=u.g[y.toString()],u=-1,y&&(u=lr(y,w,j,z)),(w=-1<u?y[u]:null)&&Sr(w))}function Sr(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Be])rs(y.i,u);else{var w=u.type,j=u.proxy;y.removeEventListener?y.removeEventListener(w,j,u.capture):y.detachEvent?y.detachEvent(Ar(w),j):y.addListener&&y.removeListener&&y.removeListener(j),(w=qi(y))?(rs(w,u),w.h==0&&(w.src=null,y[Ys]=null)):bt(u)}}}function Ar(u){return u in zi?zi[u]:zi[u]="on"+u}function fo(u,y){if(u.da)u=!0;else{y=new xe(y,this);var w=u.listener,j=u.ha||u.src;u.fa&&Sr(u),u=w.call(j,y)}return u}function qi(u){return u=u[Ys],u instanceof Tt?u:null}var Wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function po(u){return typeof u=="function"?u:(u[Wi]||(u[Wi]=function(y){return u.handleEvent(y)}),u[Wi])}function _t(){Z.call(this),this.i=new Tt(this),this.M=this,this.F=null}k(_t,Z),_t.prototype[Be]=!0,_t.prototype.removeEventListener=function(u,y,w,j){Hi(this,u,y,w,j)};function Nt(u,y){var w,j=u.F;if(j)for(w=[];j;j=j.F)w.push(j);if(u=u.M,j=y.type||y,typeof y=="string")y=new ye(y,u);else if(y instanceof ye)y.target=y.target||u;else{var z=y;y=new ye(j,u),M(y,z)}if(z=!0,w)for(var Y=w.length-1;0<=Y;Y--){var le=y.g=w[Y];z=Pr(le,j,!0,y)&&z}if(le=y.g=u,z=Pr(le,j,!0,y)&&z,z=Pr(le,j,!1,y)&&z,w)for(Y=0;Y<w.length;Y++)le=y.g=w[Y],z=Pr(le,j,!1,y)&&z}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var w=u.g[y],j=0;j<w.length;j++)bt(w[j]);delete u.g[y],u.h--}}this.F=null},_t.prototype.K=function(u,y,w,j){return this.i.add(String(u),y,!1,w,j)},_t.prototype.L=function(u,y,w,j){return this.i.add(String(u),y,!0,w,j)};function Pr(u,y,w,j){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Y=0;Y<y.length;++Y){var le=y[Y];if(le&&!le.da&&le.capture==w){var We=le.listener,jt=le.ha||le.src;le.fa&&rs(u.i,le),z=We.call(jt,j)!==!1&&z}}return z&&!j.defaultPrevented}function go(u,y,w){if(typeof u=="function")w&&(u=b(u,w));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function ss(u){u.g=go(()=>{u.g=null,u.i&&(u.i=!1,ss(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Js extends Z{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ss(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(u){Z.call(this),this.h=u,this.g={}}k(Xs,Z);var yo=[];function xo(u){re(u.g,function(y,w){this.g.hasOwnProperty(w)&&Sr(y)},u),u.g={}}Xs.prototype.N=function(){Xs.aa.N.call(this),xo(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vo=m.JSON.stringify,wo=m.JSON.parse,bo=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function Zs(){}Zs.prototype.h=null;function Gi(u){return u.h||(u.h=u.i())}function Ki(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){ye.call(this,"d")}k(cr,ye);function Qi(){ye.call(this,"c")}k(Qi,ye);var ur={},_o=null;function ei(){return _o=_o||new _t}ur.La="serverreachability";function No(u){ye.call(this,ur.La,u)}k(No,ye);function Rr(u){const y=ei();Nt(y,new No(y))}ur.STAT_EVENT="statevent";function jo(u,y){ye.call(this,ur.STAT_EVENT,u),this.stat=y}k(jo,ye);function dt(u){const y=ei();Nt(y,new jo(y,u))}ur.Ma="timingevent";function Yi(u,y){ye.call(this,ur.Ma,u),this.size=y}k(Yi,ye);function Mn(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function ti(){this.g=!0}ti.prototype.xa=function(){this.g=!1};function ni(u,y,w,j,z,Y){u.info(function(){if(u.g)if(Y)for(var le="",We=Y.split("&"),jt=0;jt<We.length;jt++){var Fe=We[jt].split("=");if(1<Fe.length){var kt=Fe[0];Fe=Fe[1];var pt=kt.split("_");le=2<=pt.length&&pt[1]=="type"?le+(kt+"="+Fe+"&"):le+(kt+"=redacted&")}}else le=null;else le=Y;return"XMLHTTP REQ ("+j+") [attempt "+z+"]: "+y+`
`+w+`
`+le})}function Ji(u,y,w,j,z,Y,le){u.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+z+"]: "+y+`
`+w+`
`+Y+" "+le})}function On(u,y,w,j){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Id(u,w)+(j?" "+j:"")})}function Eo(u,y){u.info(function(){return"TIMEOUT: "+y})}ti.prototype.info=function(){};function Id(u,y){if(!u.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var j=w[u];if(!(2>j.length)){var z=j[1];if(Array.isArray(z)&&!(1>z.length)){var Y=z[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return vo(w)}catch{return y}}var Xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function ri(){}k(ri,Zs),ri.prototype.g=function(){return new XMLHttpRequest},ri.prototype.i=function(){return{}},Fn=new ri;function Un(u,y,w,j){this.j=u,this.i=y,this.l=w,this.R=j||1,this.U=new Xs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kl}function Kl(){this.i=null,this.g="",this.h=!1}var Co={},Zi={};function ea(u,y,w){u.L=1,u.v=cs(fn(y)),u.m=w,u.P=!0,Io(u,null)}function Io(u,y){u.F=Date.now(),Qe(u),u.A=fn(u.v);var w=u.A,j=u.R;Array.isArray(j)||(j=[String(j)]),ds(w.i,"t",j),u.C=0,w=u.j.J,u.h=new Kl,u.g=hc(u.j,w?y:null,!u.m),0<u.O&&(u.M=new Js(b(u.Y,u,u.g),u.O)),y=u.U,w=u.g,j=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(yo[0]=z.toString()),z=yo);for(var Y=0;Y<z.length;Y++){var le=ho(w,z[Y],j||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),Rr(),ni(u.i,u.u,u.A,u.l,u.R,u.m)}Un.prototype.ca=function(u){u=u.target;const y=this.M;y&&nn(u)==3?y.j():this.Y(u)},Un.prototype.Y=function(u){try{if(u==this.g)e:{const pt=nn(this.g);var y=this.g.Ba();const Cn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Ro(this.g)))){this.J||pt!=4||y==7||(y==8||0>=Cn?Rr(3):Rr(2)),si(this);var w=this.g.Z();this.X=w;t:if(Ql(this)){var j=Ro(this.g);u="";var z=j.length,Y=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),is(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,u+=this.h.i.decode(j[y],{stream:!(Y&&y==z-1)});j.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=w==200,Ji(this.i,this.u,this.A,this.l,this.R,pt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var We,jt=this.g;if((We=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(We)){var Fe=We;break t}}Fe=null}if(w=Fe)On(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,To(this,w);else{this.o=!1,this.s=3,dt(12),jn(this),is(this);break e}}if(this.P){w=!0;let gn;for(;!this.J&&this.C<le.length;)if(gn=Td(this,le),gn==Zi){pt==4&&(this.s=4,dt(14),w=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Co){this.s=4,dt(15),On(this.i,this.l,le,"[Invalid Chunk]"),w=!1;break}else On(this.i,this.l,gn,null),To(this,gn);if(Ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||le.length!=0||this.h.h||(this.s=1,dt(16),w=!1),this.o=this.o&&w,!w)On(this.i,this.l,le,"[Invalid Chunked Response]"),jn(this),is(this);else if(0<le.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Lo(kt),kt.M=!0,dt(11))}}else On(this.i,this.l,le,null),To(this,le);pt==4&&jn(this),this.o&&!this.J&&(pt==4?da(this.j,this):(this.o=!1,Qe(this)))}else aa(this.g),w==400&&0<le.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),jn(this),is(this)}}}catch{}finally{}};function Ql(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Td(u,y){var w=u.C,j=y.indexOf(`
`,w);return j==-1?Zi:(w=Number(y.substring(w,j)),isNaN(w)?Co:(j+=1,j+w>y.length?Zi:(y=y.slice(j,j+w),u.C=j+w,y)))}Un.prototype.cancel=function(){this.J=!0,jn(this)};function Qe(u){u.S=Date.now()+u.I,Yl(u,u.I)}function Yl(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Mn(b(u.ba,u),y)}function si(u){u.B&&(m.clearTimeout(u.B),u.B=null)}Un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Eo(this.i,this.A),this.L!=2&&(Rr(),dt(17)),jn(this),this.s=2,is(this)):Yl(this,this.S-u)};function is(u){u.j.G==0||u.J||da(u.j,u)}function jn(u){si(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,xo(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function To(u,y){try{var w=u.j;if(w.G!=0&&(w.g==u||Yt(w.h,u))){if(!u.K&&Yt(w.h,u)&&w.G==3){try{var j=w.Da.g.parse(y)}catch{j=null}if(Array.isArray(j)&&j.length==3){var z=j;if(z[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)ua(w),qn(w);else break e;ca(w),dt(18)}}else w.za=z[1],0<w.za-w.T&&37500>z[2]&&w.F&&w.v==0&&!w.C&&(w.C=Mn(b(w.Za,w),6e3));if(1>=Xl(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Or(w,11)}else if((u.K||w.g==u)&&ua(w),!I(y))for(z=w.Da.g.parse(y),y=0;y<z.length;y++){let Fe=z[y];if(w.T=Fe[0],Fe=Fe[1],w.G==2)if(Fe[0]=="c"){w.K=Fe[1],w.ia=Fe[2];const kt=Fe[3];kt!=null&&(w.la=kt,w.j.info("VER="+w.la));const pt=Fe[4];pt!=null&&(w.Aa=pt,w.j.info("SVER="+w.Aa));const Cn=Fe[5];Cn!=null&&typeof Cn=="number"&&0<Cn&&(j=1.5*Cn,w.L=j,w.j.info("backChannelRequestTimeoutMs_="+j)),j=w;const gn=u.g;if(gn){const di=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var Y=j.h;Y.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ko(Y,Y.h),Y.h=null))}if(j.D){const ma=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;ma&&(j.ya=ma,Ke(j.I,j.D,ma))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),j=w;var le=u;if(j.qa=dc(j,j.J?j.ia:null,j.W),le.K){Zl(j.h,le);var We=le,jt=j.L;jt&&(We.I=jt),We.B&&(si(We),Qe(We)),j.g=le}else ui(j);0<w.i.length&&fr(w)}else Fe[0]!="stop"&&Fe[0]!="close"||Or(w,7);else w.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Or(w,7):Lt(w):Fe[0]!="noop"&&w.l&&w.l.ta(Fe),w.v=0)}}Rr(4)}catch{}}var Jl=class{constructor(u,y){this.g=u,this.map=y}};function ii(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xl(u){return u.h?1:u.g?u.g.size:0}function Yt(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function ko(u,y){u.g?u.g.add(y):u.h=y}function Zl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}ii.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ec(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const w of u.g.values())y=y.concat(w.D);return y}return D(u.i)}function ta(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var y=[],w=u.length,j=0;j<w;j++)y.push(u[j]);return y}y=[],w=0;for(j in u)y[w++]=u[j];return y}function na(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var y=[];u=u.length;for(var w=0;w<u;w++)y.push(w);return y}y=[],w=0;for(const j in u)y[w++]=j;return y}}}function as(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var w=na(u),j=ta(u),z=j.length,Y=0;Y<z;Y++)y.call(void 0,j[Y],w&&w[Y],u)}var ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kd(u,y){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var j=u[w].indexOf("="),z=null;if(0<=j){var Y=u[w].substring(0,j);z=u[w].substring(j+1)}else Y=u[w];y(Y,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Dr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Dr){this.h=u.h,oi(this,u.j),this.o=u.o,this.g=u.g,os(this,u.s),this.l=u.l;var y=u.i,w=new dr;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),ls(this,w),this.m=u.m}else u&&(y=String(u).match(ai))?(this.h=!1,oi(this,y[1]||"",!0),this.o=Oe(y[2]||""),this.g=Oe(y[3]||"",!0),os(this,y[4]),this.l=Oe(y[5]||"",!0),ls(this,y[6]||"",!0),this.m=Oe(y[7]||"")):(this.h=!1,this.i=new dr(null,this.h))}Dr.prototype.toString=function(){var u=[],y=this.j;y&&u.push(us(y,ra,!0),":");var w=this.g;return(w||y=="file")&&(u.push("//"),(y=this.o)&&u.push(us(y,ra,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(us(w,w.charAt(0)=="/"?rc:nc,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",us(w,So)),u.join("")};function fn(u){return new Dr(u)}function oi(u,y,w){u.j=w?Oe(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function os(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function ls(u,y,w){y instanceof dr?(u.i=y,hr(u.i,u.h)):(w||(y=us(y,sc)),u.i=new dr(y,u.h))}function Ke(u,y,w){u.i.set(y,w)}function cs(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function us(u,y,w){return typeof u=="string"?(u=encodeURI(u).replace(y,tc),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ra=/[#\/\?@]/g,nc=/[#\?:]/g,rc=/[#\?]/g,sc=/[#\?@]/g,So=/#/g;function dr(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Dt(u){u.g||(u.g=new Map,u.h=0,u.i&&kd(u.i,function(y,w){u.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}n=dr.prototype,n.add=function(u,y){Dt(this),this.i=null,u=En(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(y),this.h+=1,this};function Bn(u,y){Dt(u),y=En(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function $n(u,y){return Dt(u),y=En(u,y),u.g.has(y)}n.forEach=function(u,y){Dt(this),this.g.forEach(function(w,j){w.forEach(function(z){u.call(y,z,j,this)},this)},this)},n.na=function(){Dt(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let j=0;j<y.length;j++){const z=u[j];for(let Y=0;Y<z.length;Y++)w.push(y[j])}return w},n.V=function(u){Dt(this);let y=[];if(typeof u=="string")$n(this,u)&&(y=y.concat(this.g.get(En(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)y=y.concat(u[w])}return y},n.set=function(u,y){return Dt(this),this.i=null,u=En(this,u),$n(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function ds(u,y,w){Bn(u,y),0<w.length&&(u.i=null,u.g.set(En(u,y),D(w)),u.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var j=y[w];const Y=encodeURIComponent(String(j)),le=this.V(j);for(j=0;j<le.length;j++){var z=Y;le[j]!==""&&(z+="="+encodeURIComponent(String(le[j]))),u.push(z)}}return this.i=u.join("&")};function En(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function hr(u,y){y&&!u.j&&(Dt(u),u.i=null,u.g.forEach(function(w,j){var z=j.toLowerCase();j!=z&&(Bn(this,j),ds(this,z,w))},u)),u.j=y}function Sd(u,y){const w=new ti;if(m.Image){const j=new Image;j.onload=O(tn,w,"TestLoadImage: loaded",!0,y,j),j.onerror=O(tn,w,"TestLoadImage: error",!1,y,j),j.onabort=O(tn,w,"TestLoadImage: abort",!1,y,j),j.ontimeout=O(tn,w,"TestLoadImage: timeout",!1,y,j),m.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=u}else y(!1)}function ic(u,y){const w=new ti,j=new AbortController,z=setTimeout(()=>{j.abort(),tn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:j.signal}).then(Y=>{clearTimeout(z),Y.ok?tn(w,"TestPingServer: ok",!0,y):tn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),tn(w,"TestPingServer: error",!1,y)})}function tn(u,y,w,j,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),j(w)}catch{}}function Ad(){this.g=new bo}function ac(u,y,w){const j=w||"";try{as(u,function(z,Y){let le=z;g(z)&&(le=vo(z)),y.push(j+Y+"="+encodeURIComponent(le))})}catch(z){throw y.push(j+"type="+encodeURIComponent("_badmap")),z}}function Lr(u){this.l=u.Ub||null,this.j=u.eb||!1}k(Lr,Zs),Lr.prototype.g=function(){return new li(this.l,this.j)},Lr.prototype.i=(function(u){return function(){return u}})({});function li(u,y){_t.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(li,_t),n=li.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,Hn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oc(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function oc(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?zn(this):Hn(this),this.readyState==3&&oc(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,zn(this))},n.Qa=function(u){this.g&&(this.response=u,zn(this))},n.ga=function(){this.g&&zn(this)};function zn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Hn(u)}n.setRequestHeader=function(u,y){this.u.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=y.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vr(u){let y="";return re(u,function(w,j){y+=j,y+=":",y+=w,y+=`\r
`}),y}function hs(u,y,w){e:{for(j in w){var j=!1;break e}j=!0}j||(w=Vr(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Ke(u,y,w))}function tt(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(tt,_t);var Pd=/^https?$/i,Ao=["POST","PUT"];n=tt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,y,w,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?Gi(this.o):Gi(Fn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Y){ci(this,Y);return}if(u=w||"",w=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var z in j)w.set(z,j[z]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const Y of j.keys())w.set(Y,j.get(Y));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),z=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ao,y,void 0))||j||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of w)this.g.setRequestHeader(Y,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(u),this.u=!1}catch(Y){ci(this,Y)}};function ci(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,sa(u),pn(u)}function sa(u){u.A||(u.A=!0,Nt(u,"complete"),Nt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Nt(this,"complete"),Nt(this,"abort"),pn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Po(this):this.bb())},n.bb=function(){Po(this)};function Po(u){if(u.h&&typeof d<"u"&&(!u.v[1]||nn(u)!=4||u.Z()!=2)){if(u.u&&nn(u)==4)go(u.Ea,0,u);else if(Nt(u,"readystatechange"),nn(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var j;if(j=le===0){var z=String(u.D).match(ai)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),j=!Pd.test(z?z.toLowerCase():"")}w=j}if(w)Nt(u,"complete"),Nt(u,"success");else{u.m=6;try{var Y=2<nn(u)?u.g.statusText:""}catch{Y=""}u.l=Y+" ["+u.Z()+"]",sa(u)}}finally{pn(u)}}}}function pn(u,y){if(u.g){ia(u);const w=u.g,j=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Nt(u,"ready");try{w.onreadystatechange=j}catch{}}}function ia(u){u.I&&(m.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function nn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),wo(y)}};function Ro(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(u){const y={};u=(u.g&&2<=nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<u.length;j++){if(I(u[j]))continue;var w=L(u[j]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Y=y[z]||[];y[z]=Y,Y.push(w)}E(y,function(j){return j.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(u,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||y}function Do(u){this.Aa=0,this.i=[],this.j=new ti,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,u),this.cb=mr("retryDelaySeedMs",1e4,u),this.Wa=mr("forwardChannelMaxRetries",2,u),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ii(u&&u.concurrentRequestLimit),this.Da=new Ad,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Do.prototype,n.la=8,n.G=1,n.connect=function(u,y,w,j){dt(0),this.W=u,this.H=y||{},w&&j!==void 0&&(this.H.OSID=w,this.H.OAID=j),this.F=this.X,this.I=dc(this,null,this.W),fr(this)};function Lt(u){if(oa(u),u.G==3){var y=u.U++,w=fn(u.I);if(Ke(w,"SID",u.K),Ke(w,"RID",y),Ke(w,"TYPE","terminate"),Mr(u,w),y=new Un(u,u.j,y),y.L=2,y.v=cs(fn(w)),w=!1,m.navigator&&m.navigator.sendBeacon)try{w=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&m.Image&&(new Image().src=y.v,w=!0),w||(y.g=hc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Qe(y)}uc(u)}function qn(u){u.g&&(Lo(u),u.g.cancel(),u.g=null)}function oa(u){qn(u),u.u&&(m.clearTimeout(u.u),u.u=null),ua(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function fr(u){if(!mn(u.h)&&!u.s){u.s=!0;var y=u.Ga;Re||ce(),oe||(Re(),oe=!0),Q.add(y,u),u.B=0}}function Rd(u,y){return Xl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Mn(b(u.Ga,u,y),cc(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new Un(this,this.j,u);let Y=this.o;if(this.S&&(Y?(Y=C(Y),M(Y,this.S)):Y=this.S),this.m!==null||this.O||(z.H=Y,Y=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var j=this.i[w];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(y+=j,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=ms(this,z,y),w=fn(this.I),Ke(w,"RID",u),Ke(w,"CVER",22),this.D&&Ke(w,"X-HTTP-Session-Id",this.D),Mr(this,w),Y&&(this.O?y="headers="+encodeURIComponent(String(Vr(Y)))+"&"+y:this.m&&hs(w,this.m,Y)),ko(this.h,z),this.Ua&&Ke(w,"TYPE","init"),this.P?(Ke(w,"$req",y),Ke(w,"SID","null"),z.T=!0,ea(z,w,null)):ea(z,w,y),this.G=2}}else this.G==3&&(u?la(this,u):this.i.length==0||mn(this.h)||la(this))};function la(u,y){var w;y?w=y.l:w=u.U++;const j=fn(u.I);Ke(j,"SID",u.K),Ke(j,"RID",w),Ke(j,"AID",u.T),Mr(u,j),u.m&&u.o&&hs(j,u.m,u.o),w=new Un(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),y&&(u.i=y.D.concat(u.i)),y=ms(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ko(u.h,w),ea(w,j,y)}function Mr(u,y){u.H&&re(u.H,function(w,j){Ke(y,j,w)}),u.l&&as({},function(w,j){Ke(y,j,w)})}function ms(u,y,w){w=Math.min(u.i.length,w);var j=u.l?b(u.l.Na,u.l,u):null;e:{var z=u.i;let Y=-1;for(;;){const le=["count="+w];Y==-1?0<w?(Y=z[0].g,le.push("ofs="+Y)):Y=0:le.push("ofs="+Y);let We=!0;for(let jt=0;jt<w;jt++){let Fe=z[jt].g;const kt=z[jt].map;if(Fe-=Y,0>Fe)Y=Math.max(0,z[jt].g-100),We=!1;else try{ac(kt,le,"req"+Fe+"_")}catch{j&&j(kt)}}if(We){j=le.join("&");break e}}}return u=u.i.splice(0,w),y.D=u,j}function ui(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;Re||ce(),oe||(Re(),oe=!0),Q.add(y,u),u.v=0}}function ca(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Mn(b(u.Fa,u),cc(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,lc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Mn(b(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),qn(this),lc(this))};function Lo(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function lc(u){u.g=new Un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=fn(u.qa);Ke(y,"RID","rpc"),Ke(y,"SID",u.K),Ke(y,"AID",u.T),Ke(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(y,"TO",u.ja),Ke(y,"TYPE","xmlhttp"),Mr(u,y),u.m&&u.o&&hs(y,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=cs(fn(y)),w.m=null,w.P=!0,Io(w,u)}n.Za=function(){this.C!=null&&(this.C=null,qn(this),ca(this),dt(19))};function ua(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function da(u,y){var w=null;if(u.g==y){ua(u),Lo(u),u.g=null;var j=2}else if(Yt(u.h,y))w=y.D,Zl(u.h,y),j=1;else return;if(u.G!=0){if(y.o)if(j==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var z=u.B;j=ei(),Nt(j,new Yi(j,w)),fr(u)}else ui(u);else if(z=y.s,z==3||z==0&&0<y.X||!(j==1&&Rd(u,y)||j==2&&ca(u)))switch(w&&0<w.length&&(y=u.h,y.i=y.i.concat(w)),z){case 1:Or(u,5);break;case 4:Or(u,10);break;case 3:Or(u,6);break;default:Or(u,2)}}}function cc(u,y){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*y}function Or(u,y){if(u.j.info("Error code "+y),y==2){var w=b(u.fb,u),j=u.Xa;const z=!j;j=new Dr(j||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||oi(j,"https"),cs(j),z?Sd(j.toString(),w):ic(j.toString(),w)}else dt(2);u.G=0,u.l&&u.l.sa(y),uc(u),oa(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function uc(u){if(u.G=0,u.ka=[],u.l){const y=ec(u.h);(y.length!=0||u.i.length!=0)&&(A(u.ka,y),A(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function dc(u,y,w){var j=w instanceof Dr?fn(w):new Dr(w);if(j.g!="")y&&(j.g=y+"."+j.g),os(j,j.s);else{var z=m.location;j=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Y=new Dr(null);j&&oi(Y,j),y&&(Y.g=y),z&&os(Y,z),w&&(Y.l=w),j=Y}return w=u.D,y=u.ya,w&&y&&Ke(j,w,y),Ke(j,"VER",u.la),Mr(u,j),j}function hc(u,y,w){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new tt(new Lr({eb:w})):new tt(u.pa),y.Ha(u.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vo(){}n=Vo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ha(){}ha.prototype.g=function(u,y){return new Jt(u,y)};function Jt(u,y){_t.call(this),this.g=new Do(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!I(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new pr(this)}k(Jt,_t),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Lt(this.g)},Jt.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=vo(u),u=w);y.i.push(new Jl(y.Ya++,u)),y.G==3&&fr(y)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Jt.aa.N.call(this)};function mc(u){cr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const w in y){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}k(mc,cr);function fc(){Qi.call(this),this.status=1}k(fc,Qi);function pr(u){this.g=u}k(pr,Vo),pr.prototype.ua=function(){Nt(this.g,"a")},pr.prototype.ta=function(u){Nt(this.g,new mc(u))},pr.prototype.sa=function(u){Nt(this.g,new fc)},pr.prototype.ra=function(){Nt(this.g,"b")},ha.prototype.createWebChannel=ha.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,S2=function(){return new ha},k2=function(){return ei()},T2=ur,Rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,_u=Xi,Gl.COMPLETE="complete",I2=Gl,Ki.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,ul=Ki,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,C2=tt}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const ay="@firebase/firestore",oy="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new ed("@firebase/firestore");function Da(){return Si.logLevel}function he(n,...e){if(Si.logLevel<=De.DEBUG){const t=e.map(wf);Si.debug(`Firestore (${ao}): ${n}`,...t)}}function ts(n,...e){if(Si.logLevel<=De.ERROR){const t=e.map(wf);Si.error(`Firestore (${ao}): ${n}`,...t)}}function Ha(n,...e){if(Si.logLevel<=De.WARN){const t=e.map(wf);Si.warn(`Firestore (${ao}): ${n}`,...t)}}function wf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,A2(n,i,t)}function A2(n,e,t){let i=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ts(i),new Error(i)}function qe(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||A2(e,o,i)}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wt.UNAUTHENTICATED)))}shutdown(){}}class y6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class x6{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string",31837,{l:i}),new P2(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Wt(e)}}class v6{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class w6{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new v6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const i=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ly(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ly(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=_6(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}}function Le(n,e){return n<e?-1:n>e?1:0}function Dm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),c=e.charAt(i);if(o!==c)return fm(o)===fm(c)?Le(o,c):fm(o)?1:-1}return Le(n.length,e.length)}const N6=55296,j6=57343;function fm(n){const e=n.charCodeAt(0);return e>=N6&&e<=j6}function qa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="__name__";class wr{constructor(e,t,i){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&je(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const c=wr.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Le(e.length,t.length)}static compareSegments(e,t){const i=wr.isNumericId(e),o=wr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?wr.extractNumericId(e).compare(wr.extractNumericId(t)):Dm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class Je extends wr{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const E6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends wr{construct(e,t,i){return new Ft(e,t,i)}static isValidIdentifier(e){return E6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cy}static keyField(){return new Ft([cy])}static fromServerFormat(e){const t=[];let i="",o=0;const c=()=>{if(i.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(c(),o++)}if(c(),d)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Je.fromString(e))}static fromName(e){return new ve(Je.fromString(e).popFirst(5))}static empty(){return new ve(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(n,e,t){if(!t)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C6(n,e,t,i){if(e===!0&&i===!0)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uy(n){if(!ve.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dy(n){if(ve.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function D2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function rr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sd(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ul(n,e){if(!D2(n))throw new ue(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const d=n[i];if(o&&typeof d!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new ue(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=-62135596800,my=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*my);return new Pe(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hy)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/my}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ul(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:vt("string",Pe._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Pe(0,0))}static max(){return new Te(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function I6(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new Pe(t+1,0):new Pe(t,i));return new Us(o,ve.empty(),e)}function T6(n){return new Us(n.readTime,n.key,Cl)}class Us{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Us(Te.min(),ve.empty(),Cl)}static max(){return new Us(Te.max(),ve.empty(),Cl)}}function k6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==S6)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&t()}),(p=>i(p)))})),d=!0,c===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,c)=>{i.push(t.call(this,o,c))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const g=p;t(e[g]).next((v=>{d[g]=v,++m,m===c&&i(d)}),(v=>o(v)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):i()};c()}))}}function P6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=-1;function ad(n){return n==null}function Mu(n){return n===0&&1/n==-1/0}function R6(n){return typeof n=="number"&&Number.isInteger(n)&&!Mu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="";function D6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fy(e)),e=L6(n.get(t),e);return fy(e)}function L6(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const c=n.charAt(o);switch(c){case"\0":t+="";break;case L2:t+="";break;default:t+=c}}return t}function fy(n){return n+L2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function V2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=c??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gy(this.data.getIterator())}getIteratorFrom(e){return new gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new It(this.comparator);return t.data=e,t}}class gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new wn([])}unionWith(e){let t=new It(Ft.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new M2("Invalid base64 string: "+c):c}})(e);return new Ut(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const V6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(qe(!!n,39018),typeof n=="string"){let e=0;const t=V6.exec(n);if(qe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $s(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="server_timestamp",F2="__type__",U2="__previous_value__",B2="__local_write_time__";function Nf(n){return(n?.mapValue?.fields||{})[F2]?.stringValue===O2}function od(n){const e=n.mapValue.fields[U2];return Nf(e)?od(e):e}function Il(n){const e=Bs(n.mapValue.fields[B2].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t,i,o,c,d,m,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Ou="(default)";class Tl{constructor(e,t){this.projectId=e,this.database=t||Ou}static empty(){return new Tl("","")}get isDefaultDatabase(){return this.database===Ou}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="__type__",O6="__max__",hu={mapValue:{}},z2="__vector__",Fu="value";function zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nf(n)?4:U6(n)?9007199254740991:F6(n)?10:11:je(28295,{value:n})}function kr(n,e){if(n===e)return!0;const t=zs(n);if(t!==zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Il(n).isEqual(Il(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Bs(o.timestampValue),m=Bs(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,c){return $s(o.bytesValue).isEqual($s(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,c){return mt(o.geoPointValue.latitude)===mt(c.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(c.geoPointValue.longitude)})(n,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return mt(o.integerValue)===mt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=mt(o.doubleValue),m=mt(c.doubleValue);return d===m?Mu(d)===Mu(m):isNaN(d)&&isNaN(m)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(py(d)!==py(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!kr(d[p],m[p])))return!1;return!0})(n,e);default:return je(52216,{left:n})}}function kl(n,e){return(n.values||[]).find((t=>kr(t,e)))!==void 0}function Wa(n,e){if(n===e)return 0;const t=zs(n),i=zs(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=mt(c.integerValue||c.doubleValue),p=mt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(n,e);case 3:return yy(n.timestampValue,e.timestampValue);case 4:return yy(Il(n),Il(e));case 5:return Dm(n.stringValue,e.stringValue);case 6:return(function(c,d){const m=$s(c),p=$s(d);return m.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=Le(m[g],p[g]);if(v!==0)return v}return Le(m.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Le(mt(c.latitude),mt(d.latitude));return m!==0?m:Le(mt(c.longitude),mt(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xy(n.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},p=d.fields||{},g=m[Fu]?.arrayValue,v=p[Fu]?.arrayValue,_=Le(g?.values?.length||0,v?.values?.length||0);return _!==0?_:xy(g,v)})(n.mapValue,e.mapValue);case 11:return(function(c,d){if(c===hu.mapValue&&d===hu.mapValue)return 0;if(c===hu.mapValue)return 1;if(d===hu.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),g=d.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let _=0;_<p.length&&_<v.length;++_){const b=Dm(p[_],v[_]);if(b!==0)return b;const O=Wa(m[p[_]],g[v[_]]);if(O!==0)return O}return Le(p.length,v.length)})(n.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function yy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Bs(n),i=Bs(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function xy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const c=Wa(t[o],i[o]);if(c)return c}return Le(t.length,i.length)}function Ga(n){return Lm(n)}function Lm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Bs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return $s(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const c of t.values||[])o?o=!1:i+=",",i+=Lm(c);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of i)c?c=!1:o+=",",o+=`${d}:${Lm(t.fields[d])}`;return o+"}"})(n.mapValue):je(61005,{value:n})}function Nu(n){switch(zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(n);return e?16+Nu(e):16;case 5:return 2*n.stringValue.length;case 6:return $s(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,c)=>o+Nu(c)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ks(i.fields,((c,d)=>{o+=c.length+Nu(d)})),o})(n.mapValue);default:throw je(13486,{value:n})}}function vy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vm(n){return!!n&&"integerValue"in n}function jf(n){return!!n&&"arrayValue"in n}function wy(n){return!!n&&"nullValue"in n}function by(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ju(n){return!!n&&"mapValue"in n}function F6(n){return(n?.mapValue?.fields||{})[$2]?.stringValue===z2}function gl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ks(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=gl(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gl(n.arrayValue.values[t]);return e}return{...n}}function U6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===O6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ju(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(t)}setAll(e){let t=Ft.emptyPath(),i={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=m.popLast()}d?i[m.lastSegment()]=gl(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,o)}delete(e){const t=this.field(e.popLast());ju(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ju(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ks(t,((o,c)=>e[o]=c));for(const o of i)delete e[o]}clone(){return new dn(gl(this.value))}}function H2(n){const e=[];return Ks(n.fields,((t,i)=>{const o=new Ft([t]);if(ju(i)){const c=H2(i.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,i,o,c,d,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Gt(e,0,Te.min(),Te.min(),Te.min(),dn.empty(),0)}static newFoundDocument(e,t,i,o){return new Gt(e,1,t,Te.min(),i,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,Te.min(),Te.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Te.min(),Te.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,t){this.position=e,this.inclusive=t}}function _y(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const c=e[o],d=n.position[o];if(c.field.isKeyField()?i=ve.comparator(ve.fromName(d.referenceValue),t.key):i=Wa(d,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ny(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function B6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{}class xt extends q2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new z6(e,t,i):t==="array-contains"?new W6(e,i):t==="in"?new G6(e,i):t==="not-in"?new K6(e,i):t==="array-contains-any"?new Q6(e,i):new xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new H6(e,i):new q6(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wa(t,this.value)):t!==null&&zs(this.value)===zs(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends q2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sr(e,t)}matches(e){return W2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function W2(n){return n.op==="and"}function G2(n){return $6(n)&&W2(n)}function $6(n){for(const e of n.filters)if(e instanceof sr)return!1;return!0}function Mm(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(G2(n))return n.filters.map((e=>Mm(e))).join(",");{const e=n.filters.map((t=>Mm(t))).join(",");return`${n.op}(${e})`}}function K2(n,e){return n instanceof xt?(function(i,o){return o instanceof xt&&i.op===o.op&&i.field.isEqual(o.field)&&kr(i.value,o.value)})(n,e):n instanceof sr?(function(i,o){return o instanceof sr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((c,d,m)=>c&&K2(d,o.filters[m])),!0):!1})(n,e):void je(19439)}function Q2(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`})(n):n instanceof sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q2).join(" ,")+"}"})(n):"Filter"}class z6 extends xt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class H6 extends xt{constructor(e,t){super(e,"in",t),this.keys=Y2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class q6 extends xt{constructor(e,t){super(e,"not-in",t),this.keys=Y2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y2(n,e){return(e.arrayValue?.values||[]).map((t=>ve.fromName(t.referenceValue)))}class W6 extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&kl(t.arrayValue,this.value)}}class G6 extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kl(this.value.arrayValue,t)}}class K6 extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kl(this.value.arrayValue,t)}}class Q6 extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>kl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,t=null,i=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function jy(n,e=null,t=[],i=[],o=null,c=null,d=null){return new Y6(n,e,t,i,o,c,d)}function Ef(n){const e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Mm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ga(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ga(i))).join(",")),e.Te=t}return e.Te}function Cf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!K2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ny(n.startAt,e.startAt)&&Ny(n.endAt,e.endAt)}function Om(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t=null,i=[],o=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function J6(n,e,t,i,o,c,d,m){return new co(n,e,t,i,o,c,d,m)}function If(n){return new co(n)}function Ey(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function J2(n){return n.collectionGroup!==null}function yl(n){const e=ke(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new It(Ft.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Sl(c,i))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new Sl(Ft.keyField(),i))}return e.Ie}function Nr(n){const e=ke(n);return e.Ee||(e.Ee=X6(e,yl(n))),e.Ee}function X6(n,e){if(n.limitType==="F")return jy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Sl(o.field,c)}));const t=n.endAt?new Uu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Uu(n.startAt.position,n.startAt.inclusive):null;return jy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Fm(n,e){const t=n.filters.concat([e]);return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Um(n,e,t){return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ld(n,e){return Cf(Nr(n),Nr(e))&&n.limitType===e.limitType}function X2(n){return`${Ef(Nr(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Q2(o))).join(", ")}]`),ad(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ga(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ga(o))).join(",")),`Target(${i})`})(Nr(n))}; limitType=${n.limitType})`}function cd(n,e){return e.isFoundDocument()&&(function(i,o){const c=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ve.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(n,e)&&(function(i,o){for(const c of yl(i))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const c of i.filters)if(!c.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(d,m,p){const g=_y(d,m,p);return d.inclusive?g<=0:g<0})(i.startAt,yl(i),o)||i.endAt&&!(function(d,m,p){const g=_y(d,m,p);return d.inclusive?g>=0:g>0})(i.endAt,yl(i),o))})(n,e)}function Z6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Z2(n){return(e,t)=>{let i=!1;for(const o of yl(n)){const c=eE(o,e,t);if(c!==0)return c;i=i||o.field.isKeyField()}return 0}}function eE(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(c,d,m){const p=d.data.field(c),g=m.data.field(c);return p!==null&&g!==null?Wa(p,g):je(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,c]of i)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,((t,i)=>{for(const[o,c]of i)e(o,c)}))}isEmpty(){return V2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new at(ve.comparator);function ns(){return tE}const ev=new at(ve.comparator);function dl(...n){let e=ev;for(const t of n)e=e.insert(t.key,t);return e}function tv(n){let e=ev;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ei(){return xl()}function nv(){return xl()}function xl(){return new Mi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nE=new at(ve.comparator),rE=new It(ve.comparator);function Ve(...n){let e=rE;for(const t of n)e=e.add(t);return e}const sE=new It(Le);function iE(){return sE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mu(e)?"-0":e}}function rv(n){return{integerValue:""+n}}function aE(n,e){return R6(e)?rv(e):Tf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function oE(n,e,t){return n instanceof Bu?(function(o,c){const d={fields:{[F2]:{stringValue:O2},[B2]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Nf(c)&&(c=od(c)),c&&(d.fields[U2]=c),{mapValue:d}})(t,e):n instanceof Al?iv(n,e):n instanceof Pl?av(n,e):(function(o,c){const d=sv(o,c),m=Cy(d)+Cy(o.Ae);return Vm(d)&&Vm(o.Ae)?rv(m):Tf(o.serializer,m)})(n,e)}function lE(n,e,t){return n instanceof Al?iv(n,e):n instanceof Pl?av(n,e):t}function sv(n,e){return n instanceof $u?(function(i){return Vm(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Bu extends ud{}class Al extends ud{constructor(e){super(),this.elements=e}}function iv(n,e){const t=ov(e);for(const i of n.elements)t.some((o=>kr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Pl extends ud{constructor(e){super(),this.elements=e}}function av(n,e){let t=ov(e);for(const i of n.elements)t=t.filter((o=>!kr(o,i)));return{arrayValue:{values:t}}}class $u extends ud{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cy(n){return mt(n.integerValue||n.doubleValue)}function ov(n){return jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function cE(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Al&&o instanceof Al||i instanceof Pl&&o instanceof Pl?qa(i.elements,o.elements,kr):i instanceof $u&&o instanceof $u?kr(i.Ae,o.Ae):i instanceof Bu&&o instanceof Bu})(n.transform,e.transform)}class uE{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dd{}function lv(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kf(n.key,Vn.none()):new Bl(n.key,n.data,Vn.none());{const t=n.data,i=dn.empty();let o=new It(Ft.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?i.delete(c):i.set(c,d),o=o.add(c)}return new Qs(n.key,i,new wn(o.toArray()),Vn.none())}}function dE(n,e,t){n instanceof Bl?(function(o,c,d){const m=o.value.clone(),p=Ty(o.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(n,e,t):n instanceof Qs?(function(o,c,d){if(!Eu(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Ty(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(cv(o)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(n,e,t):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function vl(n,e,t,i){return n instanceof Bl?(function(c,d,m,p){if(!Eu(c.precondition,d))return m;const g=c.value.clone(),v=ky(c.fieldTransforms,p,d);return g.setAll(v),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof Qs?(function(c,d,m,p){if(!Eu(c.precondition,d))return m;const g=ky(c.fieldTransforms,p,d),v=d.data;return v.setAll(cv(c)),v.setAll(g),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(c,d,m){return Eu(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(n,e,t)}function hE(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),c=sv(i.transform,o||null);c!=null&&(t===null&&(t=dn.empty()),t.set(i.field,c))}return t||null}function Iy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&qa(i,o,((c,d)=>cE(c,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bl extends dd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Qs extends dd{constructor(e,t,i,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function cv(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Ty(n,e,t){const i=new Map;qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const c=n[o],d=c.transform,m=e.data.field(c.field);i.set(c.field,lE(d,m,t[o]))}return i}function ky(n,e,t){const i=new Map;for(const o of n){const c=o.transform,d=t.data.field(o.field);i.set(o.field,oE(c,d,e))}return i}class kf extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mE extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&dE(c,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nv();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const p=lv(d,m);p!==null&&i.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((t,i)=>Iy(t,i)))&&qa(this.baseMutations,e.baseMutations,((t,i)=>Iy(t,i)))}}class Sf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return nE})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,i[d].version);return new Sf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ue;function yE(n){switch(n){case J.OK:return je(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function uv(n){if(n===void 0)return ts("GRPC error has no .code"),J.UNKNOWN;switch(n){case yt.OK:return J.OK;case yt.CANCELLED:return J.CANCELLED;case yt.UNKNOWN:return J.UNKNOWN;case yt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case yt.INTERNAL:return J.INTERNAL;case yt.UNAVAILABLE:return J.UNAVAILABLE;case yt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case yt.NOT_FOUND:return J.NOT_FOUND;case yt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case yt.ABORTED:return J.ABORTED;case yt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case yt.DATA_LOSS:return J.DATA_LOSS;default:return je(39323,{code:n})}}(Ue=yt||(yt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=new Ms([4294967295,4294967295],0);function Sy(n){const e=xE().encode(n),t=new E2;return t.update(e),new Uint8Array(t.digest())}function Ay(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ms([t,i],0),new Ms([o,c],0)]}class Af{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new hl(`Invalid padding: ${t}`);if(i<0)throw new hl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new hl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ms.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Ms.fromNumber(i)));return o.compare(vE)===1&&(o=new Ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Sy(e),[i,o]=Ay(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);if(!this.we(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Af(c,o,t);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=Sy(e),[i,o]=Ay(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(i,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t,i,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,$l.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new hd(Te.min(),o,new at(Le),ns(),Ve())}}class $l{constructor(e,t,i,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new $l(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class dv{constructor(e,t){this.targetId=e,this.Ce=t}}class hv{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Py{constructor(){this.ve=0,this.Fe=Ry(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),i=Ve();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:je(38017,{changeType:c})}})),new $l(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Ry()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wE{constructor(e){this.Ge=e,this.ze=new Map,this.je=ns(),this.Je=mu(),this.He=mu(),this.Ye=new at(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Om(c))if(i===0){const d=new ve(c.path);this.et(t,d,Gt.newNoDocument(d,Te.min()))}else qe(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=$s(i).toUint8Array()}catch(p){if(p instanceof M2)return Ha("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Af(d,o,c)}catch(p){return Ha(p instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Om(m.target)){const p=new ve(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Gt.newNoDocument(p,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let i=Ve();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new hd(e,t,this.Ye,this.je,i);return this.je=ns(),this.Je=mu(),this.He=mu(),this.Ye=new at(Le),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Py,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new It(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new It(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Py),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mu(){return new at(ve.comparator)}function Ry(){return new at(ve.comparator)}const bE={asc:"ASCENDING",desc:"DESCENDING"},_E={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NE={and:"AND",or:"OR"};class jE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bm(n,e){return n.useProto3Json||ad(e)?e:{value:e}}function zu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EE(n,e){return zu(n,e.toTimestamp())}function jr(n){return qe(!!n,49232),Te.fromTimestamp((function(t){const i=Bs(t);return new Pe(i.seconds,i.nanos)})(n))}function Pf(n,e){return $m(n,e).canonicalString()}function $m(n,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fv(n){const e=Je.fromString(n);return qe(vv(e),10190,{key:e.toString()}),e}function zm(n,e){return Pf(n.databaseId,e.path)}function pm(n,e){const t=fv(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(gv(t))}function pv(n,e){return Pf(n.databaseId,e)}function CE(n){const e=fv(n);return e.length===4?Je.emptyPath():gv(e)}function Hm(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gv(n){return qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Dy(n,e,t){return{name:zm(n,e),fields:t.value.mapValue.fields}}function IE(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:je(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,v){return g.useProto3Json?(qe(v===void 0||typeof v=="string",58123),Ut.fromBase64String(v||"")):(qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Ut.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(g){const v=g.code===void 0?J.UNKNOWN:uv(g.code);return new ue(v,g.message||"")})(d);t=new hv(i,o,c,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pm(n,i.document.name),c=jr(i.document.updateTime),d=i.document.createTime?jr(i.document.createTime):Te.min(),m=new dn({mapValue:{fields:i.document.fields}}),p=Gt.newFoundDocument(o,c,d,m),g=i.targetIds||[],v=i.removedTargetIds||[];t=new Cu(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pm(n,i.document),c=i.readTime?jr(i.readTime):Te.min(),d=Gt.newNoDocument(o,c),m=i.removedTargetIds||[];t=new Cu([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pm(n,i.document),c=i.removedTargetIds||[];t=new Cu([],c,o,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:c}=i,d=new gE(o,c),m=i.targetId;t=new dv(m,d)}}return t}function TE(n,e){let t;if(e instanceof Bl)t={update:Dy(n,e.key,e.value)};else if(e instanceof kf)t={delete:zm(n,e.key)};else if(e instanceof Qs)t={update:Dy(n,e.key,e.data),updateMask:ME(e.fieldMask)};else{if(!(e instanceof mE))return je(16599,{Vt:e.type});t={verify:zm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const m=d.transform;if(m instanceof Bu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Al)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Pl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $u)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw je(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:EE(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(n,e.precondition)),t}function kE(n,e){return n&&n.length>0?(qe(e!==void 0,14353),n.map((t=>(function(o,c){let d=o.updateTime?jr(o.updateTime):jr(c);return d.isEqual(Te.min())&&(d=jr(c)),new uE(d,o.transformResults||[])})(t,e)))):[]}function SE(n,e){return{documents:[pv(n,e.path)]}}function AE(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=pv(n,o);const c=(function(g){if(g.length!==0)return xv(sr.create(g,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((v=>(function(b){return{field:Va(b.field),direction:DE(b.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Bm(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function PE(n){let e=CE(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){qe(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];t.where&&(c=(function(_){const b=yv(_);return b instanceof sr&&G2(b)?b.getFilters():[b]})(t.where));let d=[];t.orderBy&&(d=(function(_){return _.map((b=>(function(k){return new Sl(Ma(k.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(b)))})(t.orderBy));let m=null;t.limit&&(m=(function(_){let b;return b=typeof _=="object"?_.value:_,ad(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(_){const b=!!_.before,O=_.values||[];return new Uu(O,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(_){const b=!_.before,O=_.values||[];return new Uu(O,b)})(t.endAt)),J6(e,o,d,c,m,"F",p,g)}function RE(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yv(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ma(t.unaryFilter.field);return xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ma(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ma(t.unaryFilter.field);return xt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ma(t.unaryFilter.field);return xt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(Ma(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return sr.create(t.compositeFilter.filters.map((i=>yv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(n):je(30097,{filter:n})}function DE(n){return bE[n]}function LE(n){return _E[n]}function VE(n){return NE[n]}function Va(n){return{fieldPath:n.canonicalString()}}function Ma(n){return Ft.fromServerFormat(n.fieldPath)}function xv(n){return n instanceof xt?(function(t){if(t.op==="=="){if(by(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(wy(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(by(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(wy(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:LE(t.op),value:t.value}}})(n):n instanceof sr?(function(t){const i=t.getFilters().map((o=>xv(o)));return i.length===1?i[0]:{compositeFilter:{op:VE(t.op),filters:i}}})(n):je(54877,{filter:n})}function ME(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vv(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,i,o,c=Te.min(),d=Te.min(),m=Ut.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.yt=e}}function FE(n){const e=PE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.Cn=new BE}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Us.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class BE{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new It(Je.comparator),c=!o.has(i);return this.index[t]=o.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new It(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wv=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(wv,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ka(0)}static cr(){return new Ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="LruGarbageCollector",$E=1048576;function My([n,e],[t,i]){const o=Le(n,t);return o===0?Le(e,i):o}class zE{constructor(e){this.Ir=e,this.buffer=new It(My),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();My(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HE{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(Vy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lo(t)?he(Vy,"Ignoring IndexedDB error during garbage collection: ",t):await oo(t)}await this.Vr(3e5)}))}}class qE{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(id.ce);const i=new zE(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Ly)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ly):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,c,d,m,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,d=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(i=_,m=Date.now(),this.removeTargets(e,i,t)))).next((_=>(c=_,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(g=Date.now(),Da()<=De.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${_} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:_}))))}}function WE(n,e){return new qE(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.changes=new Mi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&vl(i.mutation,o,wn.empty(),Pe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ve()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ve()){const o=Ei();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((c=>{let d=dl();return c.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Ei();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ve())))}populateOverlays(e,t,i){const o=[];return i.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,i,o){let c=ns();const d=xl(),m=(function(){return xl()})();return t.forEach(((p,g)=>{const v=i.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof Qs)?c=c.insert(g.key,g):v!==void 0?(d.set(g.key,v.mutation.getFieldMask()),vl(v.mutation,g,v.mutation.getFieldMask(),Pe.now())):d.set(g.key,wn.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((g,v)=>d.set(g,v))),t.forEach(((g,v)=>m.set(g,new KE(v,d.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=xl();let o=new at(((d,m)=>d-m)),c=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=i.get(p)||wn.empty();v=m.applyToLocalView(g,v),i.set(p,v);const _=(o.get(m.batchId)||Ve()).add(p);o=o.insert(m.batchId,_)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,_=nv();v.forEach((b=>{if(!c.has(b)){const O=lv(t.get(b),i.get(b));O!==null&&_.set(b,O),c=c.add(b)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,_))}return ee.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):J2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-c.size):ee.resolve(Ei());let m=Cl,p=c;return d.next((g=>ee.forEach(g,((v,_)=>(m<_.largestBatchId&&(m=_.largestBatchId),c.get(v)?ee.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{p=p.insert(v,b)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,p,g,Ve()))).next((v=>({batchId:m,changes:tv(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let o=dl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const c=t.collectionGroup;let d=dl();return this.indexManager.getCollectionParents(e,c).next((m=>ee.forEach(m,(p=>{const g=(function(_,b){return new co(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next((v=>{v.forEach(((_,b)=>{d=d.insert(_,b)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,o)))).next((d=>{c.forEach(((p,g)=>{const v=g.getKey();d.get(v)===null&&(d=d.insert(v,Gt.newInvalidDocument(v)))}));let m=dl();return d.forEach(((p,g)=>{const v=c.get(p);v!==void 0&&vl(v.mutation,g,wn.empty(),Pe.now()),cd(t,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:jr(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:FE(o.bundledQuery),readTime:jr(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.overlays=new at(ve.comparator),this.qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ei();return ee.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&i.set(o,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,c)=>{this.St(e,t,c)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=Ei(),c=t.length+1,d=new ve(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&p.largestBatchId>i&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let c=new at(((g,v)=>g-v));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let v=c.get(g.largestBatchId);v===null&&(v=Ei(),c=c.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Ei(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return ee.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new pE(t,i));let c=this.qr.get(t);c===void 0&&(c=Ve(),this.qr.set(t,c)),this.qr.set(t,c.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.Qr=new It(Rt.$r),this.Ur=new It(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Rt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Rt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ve(new Je([])),i=new Rt(t,e),o=new Rt(t,e+1),c=[];return this.Ur.forEachInRange([i,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new Je([])),i=new Rt(t,e),o=new Rt(t,e+1);let c=Ve();return this.Ur.forEachInRange([i,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new Rt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Rt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new It(Rt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new fE(c,t,i,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new Rt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,t){return ee.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),c=o<0?0:o;return ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?_f:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([i,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new It(Le);return t.forEach((o=>{const c=new Rt(o,0),d=new Rt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{i=i.add(m.Yr)}))})),ee.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let c=i;ve.isDocumentKey(c)||(c=c.child(""));const d=new Rt(new ve(c),0);let m=new It(Le);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),d),ee.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ee.forEach(t.mutations,(o=>{const c=new Rt(o.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Rt(t,0),o=this.Zr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.ri=e,this.docs=(function(){return new at(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),c=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let i=ns();return t.forEach((o=>{const c=this.docs.get(o);i=i.insert(o,c?c.document.mutableCopy():Gt.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let c=ns();const d=t.path,m=new ve(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||k6(T6(v),i)<=0||(o.has(v.key)||cd(t,v))&&(c=c.insert(v.key,v.mutableCopy()))}return ee.resolve(c)}getAllFromCollectionGroup(e,t,i,o){je(9500)}ii(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new tC(this)}getSize(e){return ee.resolve(this.size)}}class tC extends GE{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.persistence=e,this.si=new Mi((t=>Ef(t)),Cf),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new Rf,this.targetCount=0,this.ai=Ka.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ee.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Pr(t),ee.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(c).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ee.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t){this.ui={},this.overlays={},this.ci=new id(0),this.li=!1,this.li=!0,this.hi=new XE,this.referenceDelegate=e(this),this.Pi=new nC(this),this.indexManager=new UE,this.remoteDocumentCache=(function(o){return new eC(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new OE(t),this.Ii=new YE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new ZE(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new rC(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ee.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class rC extends A6{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new Rf,this.Vi=null}static mi(e){return new Df(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(i=>{const o=ve.fromPath(i);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Hu{constructor(e,t){this.persistence=e,this.pi=new Mi((i=>D6(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=WE(this,t)}static mi(e,t){return new Hu(e,t)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ee.forEach(this.pi,((i,o)=>this.br(e,i,o).next((c=>c?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(i++,c.removeEntry(d,Te.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nu(e.data.value)),t}br(e,t,i){return ee.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ve(),o=Ve();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Lf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return L_()?8:P6(Kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,o,i).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new sC;return this.Ss(e,t,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>c.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Da()<=De.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(Da()<=De.DEBUG&&he("QueryEngine","Query:",La(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Da()<=De.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(t))):ee.resolve())}ys(e,t){if(Ey(t))return ee.resolve(null);let i=Nr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Um(t,null,"F"),i=Nr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const d=Ve(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,m);return this.Cs(t,g,d,p.readTime)?this.ys(e,Um(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,o){return Ey(t)||o.isEqual(Te.min())?ee.resolve(null):this.ps.getDocuments(e,i).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,i,o)?ee.resolve(null):(Da()<=De.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),La(t)),this.vs(e,d,t,I6(o,Cl)).next((m=>m)))}))}Ds(e,t){let i=new It(Z2(e));return t.forEach(((o,c)=>{cd(e,c)&&(i=i.add(c))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,i){return Da()<=De.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",La(t)),this.ps.getDocumentsMatchingQuery(e,t,Us.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="LocalStore",aC=3e8;class oC{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new at(Le),this.xs=new Mi((c=>Ef(c)),Cf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lC(n,e,t,i){return new oC(n,e,t,i)}async function _v(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const d=[],m=[];let p=Ve();for(const g of o){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of c){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:m})))}))}))}function cC(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const _=g.batch,b=_.keys();let O=ee.resolve();return b.forEach((k=>{O=O.next((()=>v.getEntry(p,k))).next((D=>{const A=g.docVersions.get(k);qe(A!==null,48541),D.version.compareTo(A)<0&&(_.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),v.addEntry(D)))}))})),O.next((()=>m.mutationQueue.removeMutationBatch(p,_)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let p=Ve();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Nv(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function uC(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,_)=>{const b=o.get(_);if(!b)return;m.push(t.Pi.removeMatchingKeys(c,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(c,v.addedDocuments,_))));let O=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(_)!==null?O=O.withResumeToken(Ut.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(v.resumeToken,i)),o=o.insert(_,O),(function(D,A,q){return D.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=aC?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(b,O,v)&&m.push(t.Pi.updateTargetData(c,O))}));let p=ns(),g=Ve();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,v))})),m.push(dC(c,d,e.documentUpdates).next((v=>{p=v.ks,g=v.qs}))),!i.isEqual(Te.min())){const v=t.Pi.getLastRemoteSnapshotVersion(c).next((_=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,i)));m.push(v)}return ee.waitFor(m).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,g))).next((()=>p))})).then((c=>(t.Ms=o,c)))}function dC(n,e,t){let i=Ve(),o=Ve();return t.forEach((c=>i=i.add(c))),e.getEntries(n,i).next((c=>{let d=ns();return t.forEach(((m,p)=>{const g=c.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):he(Vf,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function hC(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=_f),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function mC(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((c=>c?(o=c,ee.resolve(o)):t.Pi.allocateTargetId(i).next((d=>(o=new Ds(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function qm(n,e,t){const i=ke(n),o=i.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!lo(d))throw d;he(Vf,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Oy(n,e,t){const i=ke(n);let o=Te.min(),c=Ve();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,g,v){const _=ke(p),b=_.xs.get(v);return b!==void 0?ee.resolve(_.Ms.get(b)):_.Pi.getTargetData(g,v)})(i,d,Nr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{c=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?o:Te.min(),t?c:Ve()))).next((m=>(fC(i,Z6(e),m),{documents:m,Qs:c})))))}function fC(n,e,t){let i=n.Os.get(e)||Te.min();t.forEach(((o,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),n.Os.set(e,i)}class Fy{constructor(){this.activeTargetIds=iE()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pC{constructor(){this.Mo=new Fy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="ConnectivityMonitor";class By{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(Uy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(Uy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function Wm(){return fu===null?fu=(function(){return 268435456+Math.round(2147483648*Math.random())})():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="RestConnection",yC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ou?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,c){const d=Wm(),m=this.zo(e,t.toUriEncodedString());he(gm,`Sending RPC '${e}' ${d}:`,m,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:g}=new URL(m),v=ro(g);return this.Jo(e,m,p,i,v).then((_=>(he(gm,`Received RPC '${e}' ${d}: `,_),_)),(_=>{throw Ha(gm,`RPC '${e}' ${d} failed with error: `,_,"url: ",m,"request:",i),_}))}Ho(e,t,i,o,c,d){return this.Go(e,t,i,o,c)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ao})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),i&&i.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const i=yC[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class wC extends xC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,c){const d=Wm();return new Promise(((m,p)=>{const g=new C2;g.setWithCredentials(!0),g.listenOnce(I2.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case _u.NO_ERROR:const _=g.getResponseJson();he(qt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(_)),m(_);break;case _u.TIMEOUT:he(qt,`RPC '${e}' ${d} timed out`),p(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:const b=g.getStatus();if(he(qt,`RPC '${e}' ${d} failed with status:`,b,"response text:",g.getResponseText()),b>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const k=O?.error;if(k&&k.status&&k.message){const D=(function(q){const I=q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(I)>=0?I:J.UNKNOWN})(k.status);p(new ue(D,k.message))}else p(new ue(J.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ue(J.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(qt,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(o);he(qt,`RPC '${e}' ${d} sending request:`,o),g.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=Wm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=S2(),m=k2(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=c.join("");he(qt,`Creating RPC '${e}' stream ${o}: ${v}`,p);const _=d.createWebChannel(v,p);this.I_(_);let b=!1,O=!1;const k=new vC({Yo:A=>{O?he(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,A):(b||(he(qt,`Opening RPC '${e}' stream ${o} transport.`),_.open(),b=!0),he(qt,`RPC '${e}' stream ${o} sending:`,A),_.send(A))},Zo:()=>_.close()}),D=(A,q,I)=>{A.listen(q,(R=>{try{I(R)}catch(K){setTimeout((()=>{throw K}),0)}}))};return D(_,ul.EventType.OPEN,(()=>{O||(he(qt,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),D(_,ul.EventType.CLOSE,(()=>{O||(O=!0,he(qt,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(_))})),D(_,ul.EventType.ERROR,(A=>{O||(O=!0,Ha(qt,`RPC '${e}' stream ${o} transport errored. Name:`,A.name,"Message:",A.message),k.a_(new ue(J.UNAVAILABLE,"The operation could not be completed")))})),D(_,ul.EventType.MESSAGE,(A=>{if(!O){const q=A.data[0];qe(!!q,16349);const I=q,R=I?.error||I[0]?.error;if(R){he(qt,`RPC '${e}' stream ${o} received error:`,R);const K=R.status;let X=(function(C){const S=yt[C];if(S!==void 0)return uv(S)})(K),re=R.message;X===void 0&&(X=J.INTERNAL,re="Unknown error status: "+K+" with message "+R.message),O=!0,k.a_(new ue(X,re)),_.close()}else he(qt,`RPC '${e}' stream ${o} received:`,q),k.u_(q)}})),D(m,T2.STAT_EVENT,(A=>{A.stat===Rm.PROXY?he(qt,`RPC '${e}' stream ${o} detected buffering proxy`):A.stat===Rm.NOPROXY&&he(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){return new jE(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="PersistentStream";class Ev{constructor(e,t,i,o,c,d,m,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(ts(t.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ue(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he($y,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he($y,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bC extends Ev{constructor(e,t,i,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=IE(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Te.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Te.min():d.readTime?jr(d.readTime):Te.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Hm(this.serializer),t.addTarget=(function(c,d){let m;const p=d.target;if(m=Om(p)?{documents:SE(c,p)}:{query:AE(c,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=mv(c,d.resumeToken);const g=Bm(c,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(Te.min())>0){m.readTime=zu(c,d.snapshotVersion.toTimestamp());const g=Bm(c,d.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const i=RE(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Hm(this.serializer),t.removeTarget=e,this.q_(t)}}class _C extends Ev{constructor(e,t,i,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=kE(e.writeResults,e.commitTime),i=jr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>TE(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{}class jC extends NC{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,$m(t,i),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(J.UNKNOWN,c.toString())}))}Ho(e,t,i,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,$m(t,i),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(J.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ts(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="RemoteStore";class CC{constructor(e,t,i,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Oi(this)&&(he(Ai,"Restarting streams for network reachability change."),await(async function(p){const g=ke(p);g.Ea.add(4),await zl(g),g.Ra.set("Unknown"),g.Ea.delete(4),await fd(g)})(this))}))})),this.Ra=new EC(i,o)}}async function fd(n){if(Oi(n))for(const e of n.da)await e(!0)}async function zl(n){for(const e of n.da)await e(!1)}function Cv(n,e){const t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Uf(t)?Ff(t):uo(t).O_()&&Of(t,e))}function Mf(n,e){const t=ke(n),i=uo(t);t.Ia.delete(e),i.O_()&&Iv(t,e),t.Ia.size===0&&(i.O_()?i.L_():Oi(t)&&t.Ra.set("Unknown"))}function Of(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}uo(n).Y_(e)}function Iv(n,e){n.Va.Ue(e),uo(n).Z_(e)}function Ff(n){n.Va=new wE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),uo(n).start(),n.Ra.ua()}function Uf(n){return Oi(n)&&!uo(n).x_()&&n.Ia.size>0}function Oi(n){return ke(n).Ea.size===0}function Tv(n){n.Va=void 0}async function IC(n){n.Ra.set("Online")}async function TC(n){n.Ia.forEach(((e,t)=>{Of(n,e)}))}async function kC(n,e){Tv(n),Uf(n)?(n.Ra.ha(e),Ff(n)):n.Ra.set("Unknown")}async function SC(n,e,t){if(n.Ra.set("Online"),e instanceof hv&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(n,e)}catch(i){he(Ai,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await qu(n,i)}else if(e instanceof Cu?n.Va.Ze(e):e instanceof dv?n.Va.st(e):n.Va.tt(e),!t.isEqual(Te.min()))try{const i=await Nv(n.localStore);t.compareTo(i)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=c.Ia.get(g);v&&c.Ia.set(g,v.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,g)=>{const v=c.Ia.get(p);if(!v)return;c.Ia.set(p,v.withResumeToken(Ut.EMPTY_BYTE_STRING,v.snapshotVersion)),Iv(c,p);const _=new Ds(v.target,p,g,v.sequenceNumber);Of(c,_)})),c.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(i){he(Ai,"Failed to raise snapshot:",i),await qu(n,i)}}async function qu(n,e,t){if(!lo(e))throw e;n.Ea.add(1),await zl(n),n.Ra.set("Offline"),t||(t=()=>Nv(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(Ai,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await fd(n)}))}function kv(n,e){return e().catch((t=>qu(n,t,e)))}async function pd(n){const e=ke(n),t=Hs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_f;for(;AC(e);)try{const o=await hC(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,PC(e,o)}catch(o){await qu(e,o)}Sv(e)&&Av(e)}function AC(n){return Oi(n)&&n.Ta.length<10}function PC(n,e){n.Ta.push(e);const t=Hs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Sv(n){return Oi(n)&&!Hs(n).x_()&&n.Ta.length>0}function Av(n){Hs(n).start()}async function RC(n){Hs(n).ra()}async function DC(n){const e=Hs(n);for(const t of n.Ta)e.ea(t.mutations)}async function LC(n,e,t){const i=n.Ta.shift(),o=Sf.from(i,e,t);await kv(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await pd(n)}async function VC(n,e){e&&Hs(n).X_&&await(async function(i,o){if((function(d){return yE(d)&&d!==J.ABORTED})(o.code)){const c=i.Ta.shift();Hs(i).B_(),await kv(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,o))),await pd(i)}})(n,e),Sv(n)&&Av(n)}async function zy(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),he(Ai,"RemoteStore received new credentials");const i=Oi(t);t.Ea.add(3),await zl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await fd(t)}async function MC(n,e){const t=ke(n);e?(t.Ea.delete(2),await fd(t)):e||(t.Ea.add(2),await zl(t),t.Ra.set("Unknown"))}function uo(n){return n.ma||(n.ma=(function(t,i,o){const c=ke(t);return c.sa(),new bC(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(n.datastore,n.asyncQueue,{Xo:IC.bind(null,n),t_:TC.bind(null,n),r_:kC.bind(null,n),H_:SC.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Uf(n)?Ff(n):n.Ra.set("Unknown")):(await n.ma.stop(),Tv(n))}))),n.ma}function Hs(n){return n.fa||(n.fa=(function(t,i,o){const c=ke(t);return c.sa(),new _C(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:RC.bind(null,n),r_:VC.bind(null,n),ta:DC.bind(null,n),na:LC.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await pd(n)):(await n.fa.stop(),n.Ta.length>0&&(he(Ai,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){const d=Date.now()+i,m=new Bf(e,t,d,o,c);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $f(n,e){if(ts("AsyncQueue",`${e}: ${n}`),lo(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(e){return new $a(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=dl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=i.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new $a;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.ga=new at(ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Qa{constructor(e,t,i,o,c,d,m,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,o,c){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Qa(e,t,$a.emptySet(t),d,i,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FC{constructor(){this.queries=qy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=ke(t),c=o.queries;o.queries=qy(),c.forEach(((d,m)=>{for(const p of m.Sa)p.onError(i)}))})(this,new ue(J.ABORTED,"Firestore shutting down"))}}function qy(){return new Mi((n=>X2(n)),ld)}async function Pv(n,e){const t=ke(n);let i=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(i=2):(c=new OC,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=$f(d,`Initialization of query '${La(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&zf(t)}async function Rv(n,e){const t=ke(n),i=e.query;let o=3;const c=t.queries.get(i);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function UC(n,e){const t=ke(n);let i=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(i=!0);d.wa=o}}i&&zf(t)}function BC(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);i.queries.delete(e)}function zf(n){n.Ca.forEach((e=>{e.next()}))}var Gm,Wy;(Wy=Gm||(Gm={})).Ma="default",Wy.Cache="cache";class Dv{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.key=e}}class Vv{constructor(e){this.key=e}}class $C{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=Z2(e),this.tu=new $a(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Hy,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,_)=>{const b=o.get(v),O=cd(this.query,_)?_:null,k=!!b&&this.mutatedKeys.has(b.key),D=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let A=!1;b&&O?b.data.isEqual(O.data)?k!==D&&(i.track({type:3,doc:O}),A=!0):this.su(b,O)||(i.track({type:2,doc:O}),A=!0,(p&&this.eu(O,p)>0||g&&this.eu(O,g)<0)&&(m=!0)):!b&&O?(i.track({type:0,doc:O}),A=!0):b&&!O&&(i.track({type:1,doc:b}),A=!0,(p||g)&&(m=!0)),A&&(O?(d=d.add(O),c=D?c.add(v):c.delete(v)):(d=d.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),c=c.delete(v.key),i.track({type:1,doc:v})}return{tu:d,iu:i,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,_)=>(function(O,k){const D=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:A})}};return D(O)-D(k)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,d.length!==0||g?{snapshot:new Qa(this.query,e.tu,c,d,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new Vv(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new Lv(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hf="SyncEngine";class zC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class HC{constructor(e){this.key=e,this.hu=!1}}class qC{constructor(e,t,i,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Mi((m=>X2(m)),ld),this.Iu=new Map,this.Eu=new Set,this.du=new at(ve.comparator),this.Au=new Map,this.Ru=new Rf,this.Vu={},this.mu=new Map,this.fu=Ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WC(n,e,t=!0){const i=$v(n);let o;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Mv(i,e,t,!0),o}async function GC(n,e){const t=$v(n);await Mv(t,e,!0,!1)}async function Mv(n,e,t,i){const o=await mC(n.localStore,Nr(e)),c=o.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let m;return i&&(m=await KC(n,e,c,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&Cv(n.remoteStore,o),m}async function KC(n,e,t,i,o){n.pu=(_,b,O)=>(async function(D,A,q,I){let R=A.view.ru(q);R.Cs&&(R=await Oy(D.localStore,A.query,!1).then((({documents:E})=>A.view.ru(E,R))));const K=I&&I.targetChanges.get(A.targetId),X=I&&I.targetMismatches.get(A.targetId)!=null,re=A.view.applyChanges(R,D.isPrimaryClient,K,X);return Ky(D,A.targetId,re.au),re.snapshot})(n,_,b,O);const c=await Oy(n.localStore,e,!0),d=new $C(e,c.Qs),m=d.ru(c.documents),p=$l.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),g=d.applyChanges(m,n.isPrimaryClient,p);Ky(n,t,g.au);const v=new zC(e,t,d);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function QC(n,e,t){const i=ke(n),o=i.Tu.get(e),c=i.Iu.get(o.targetId);if(c.length>1)return i.Iu.set(o.targetId,c.filter((d=>!ld(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await qm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Mf(i.remoteStore,o.targetId),Km(i,o.targetId)})).catch(oo)):(Km(i,o.targetId),await qm(i.localStore,o.targetId,!0))}async function YC(n,e){const t=ke(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Mf(t.remoteStore,i.targetId))}async function JC(n,e,t){const i=sI(n);try{const o=await(function(d,m){const p=ke(d),g=Pe.now(),v=m.reduce(((O,k)=>O.add(k.key)),Ve());let _,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let k=ns(),D=Ve();return p.Ns.getEntries(O,v).next((A=>{k=A,k.forEach(((q,I)=>{I.isValidDocument()||(D=D.add(q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(O,k))).next((A=>{_=A;const q=[];for(const I of m){const R=hE(I,_.get(I.key).overlayedDocument);R!=null&&q.push(new Qs(I.key,R,H2(R.value.mapValue),Vn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,q,m)})).next((A=>{b=A;const q=A.applyToLocalDocumentSet(_,D);return p.documentOverlayCache.saveOverlays(O,A.batchId,q)}))})).then((()=>({batchId:b.batchId,changes:tv(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,m,p){let g=d.Vu[d.currentUser.toKey()];g||(g=new at(Le)),g=g.insert(m,p),d.Vu[d.currentUser.toKey()]=g})(i,o.batchId,t),await Hl(i,o.changes),await pd(i.remoteStore)}catch(o){const c=$f(o,"Failed to persist write");t.reject(c)}}async function Ov(n,e){const t=ke(n);try{const i=await uC(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=t.Au.get(c);d&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?qe(d.hu,14607):o.removedDocuments.size>0&&(qe(d.hu,42227),d.hu=!1))})),await Hl(t,i,e)}catch(i){await oo(i)}}function Gy(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=ke(d);p.onlineState=m;let g=!1;p.queries.forEach(((v,_)=>{for(const b of _.Sa)b.va(m)&&(g=!0)})),g&&zf(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function XC(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),c=o&&o.key;if(c){let d=new at(ve.comparator);d=d.insert(c,Gt.newNoDocument(c,Te.min()));const m=Ve().add(c),p=new hd(Te.min(),new Map,new at(Le),d,m);await Ov(i,p),i.du=i.du.remove(c),i.Au.delete(e),qf(i)}else await qm(i.localStore,e,!1).then((()=>Km(i,e,t))).catch(oo)}async function ZC(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await cC(t.localStore,e);Uv(t,i,null),Fv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hl(t,o)}catch(o){await oo(o)}}async function eI(n,e,t){const i=ke(n);try{const o=await(function(d,m){const p=ke(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((_=>(qe(_!==null,37113),v=_.keys(),p.mutationQueue.removeMutationBatch(g,_)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(i.localStore,e);Uv(i,e,t),Fv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hl(i,o)}catch(o){await oo(o)}}function Fv(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Uv(n,e,t){const i=ke(n);let o=i.Vu[i.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Bv(n,i)}))}function Bv(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mf(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qf(n))}function Ky(n,e,t){for(const i of t)i instanceof Lv?(n.Ru.addReference(i.key,e),tI(n,i)):i instanceof Vv?(he(Hf,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Bv(n,i.key)):je(19791,{wu:i})}function tI(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(he(Hf,"New document in limbo: "+t),n.Eu.add(i),qf(n))}function qf(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(Je.fromString(e)),i=n.fu.next();n.Au.set(i,new HC(t)),n.du=n.du.insert(t,i),Cv(n.remoteStore,new Ds(Nr(If(t.path)),i,"TargetPurposeLimboResolution",id.ce))}}async function Hl(n,e,t){const i=ke(n),o=[],c=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,p)=>{d.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const v=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=Lf.As(p.targetId,g);c.push(v)}})))})),await Promise.all(d),i.Pu.H_(o),await(async function(p,g){const v=ke(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ee.forEach(g,(b=>ee.forEach(b.Es,(O=>v.persistence.referenceDelegate.addReference(_,b.targetId,O))).next((()=>ee.forEach(b.ds,(O=>v.persistence.referenceDelegate.removeReference(_,b.targetId,O)))))))))}catch(_){if(!lo(_))throw _;he(Vf,"Failed to update sequence numbers: "+_)}for(const _ of g){const b=_.targetId;if(!_.fromCache){const O=v.Ms.get(b),k=O.snapshotVersion,D=O.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(b,D)}}})(i.localStore,c))}async function nI(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){he(Hf,"User change. New user:",e.toKey());const i=await _v(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new ue(J.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hl(t,i.Ls)}}function rI(n,e){const t=ke(n),i=t.Au.get(e);if(i&&i.hu)return Ve().add(i.key);{let o=Ve();const c=t.Iu.get(e);if(!c)return o;for(const d of c){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function $v(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ov.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XC.bind(null,e),e.Pu.H_=UC.bind(null,e.eventManager),e.Pu.yu=BC.bind(null,e.eventManager),e}function sI(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eI.bind(null,e),e}class Wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lC(this.persistence,new iC,e.initialUser,this.serializer)}Cu(e){return new bv(Df.mi,this.serializer)}Du(e){return new pC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wu.provider={build:()=>new Wu};class iI extends Wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qe(this.persistence.referenceDelegate instanceof Hu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new HE(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new bv((i=>Hu.mi(i,t)),this.serializer)}}class Qm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Gy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nI.bind(null,this.syncEngine),await MC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FC})()}createDatastore(e){const t=md(e.databaseInfo.databaseId),i=(function(c){return new wC(c)})(e.databaseInfo);return(function(c,d,m,p){return new jC(c,d,m,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,c,d,m){return new CC(i,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Gy(this.syncEngine,t,0)),(function(){return By.v()?new By:new gC})())}createSyncEngine(e,t){return(function(o,c,d,m,p,g,v){const _=new qC(o,c,d,m,p,g);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=ke(t);he(Ai,"RemoteStore shutting down."),i.Ea.add(5),await zl(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="FirestoreClient";class aI{constructor(e,t,i,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Wt.UNAUTHENTICATED,this.clientId=bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async d=>{he(qs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(he(qs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=$f(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function xm(n,e){n.asyncQueue.verifyOperationInProgress(),he(qs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await _v(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Qy(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oI(n);he(qs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>zy(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>zy(e.remoteStore,o))),n._onlineComponents=e}async function oI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(qs,"Using user provided OfflineComponentProvider");try{await xm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ha("Error using user provided cache. Falling back to memory cache: "+t),await xm(n,new Wu)}}else he(qs,"Using default OfflineComponentProvider"),await xm(n,new iI(void 0));return n._offlineComponents}async function Hv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(qs,"Using user provided OnlineComponentProvider"),await Qy(n,n._uninitializedComponentsProvider._online)):(he(qs,"Using default OnlineComponentProvider"),await Qy(n,new Qm))),n._onlineComponents}function lI(n){return Hv(n).then((e=>e.syncEngine))}async function qv(n){const e=await Hv(n),t=e.eventManager;return t.onListen=WC.bind(null,e.syncEngine),t.onUnlisten=QC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YC.bind(null,e.syncEngine),t}function cI(n,e,t={}){const i=new Jr;return n.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,g){const v=new zv({next:b=>{v.Nu(),d.enqueueAndForget((()=>Rv(c,_)));const O=b.docs.has(m);!O&&b.fromCache?g.reject(new ue(J.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&b.fromCache&&p&&p.source==="server"?g.reject(new ue(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),_=new Dv(If(m.path),v,{includeMetadataChanges:!0,qa:!0});return Pv(c,_)})(await qv(n),n.asyncQueue,e,t,i))),i.promise}function uI(n,e,t={}){const i=new Jr;return n.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,g){const v=new zv({next:b=>{v.Nu(),d.enqueueAndForget((()=>Rv(c,_))),b.fromCache&&p.source==="server"?g.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),_=new Dv(m,v,{includeMetadataChanges:!0,qa:!0});return Pv(c,_)})(await qv(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="firestore.googleapis.com",Jy=!0;class Xy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gv,this.ssl=Jy}else this.host=e.host,this.ssl=e.ssl??Jy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$E)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wv(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new g6;switch(i.type){case"firstParty":return new w6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Yy.get(t);i&&(he("ComponentProvider","Removing Datastore"),Yy.delete(t),i.terminate())})(this),Promise.resolve()}}function dI(n,e,t,i={}){n=rr(n,gd);const o=ro(e),c=n._getSettings(),d={...c,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;o&&(Dx(`https://${m}`),Lx("Firestore",!0)),c.host!==Gv&&c.host!==m&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:i};if(!Fs(p,d)&&(n._setSettings(p),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=Wt.MOCK_USER;else{g=I_(i.mockUserToken,n._app?.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Wt(_)}n._authCredentials=new y6(new P2(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fi(this.firestore,e,this._query)}}class ft{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ul(t,ft._jsonSchema))return new ft(e,i||null,new ve(Je.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:vt("string",ft._jsonSchemaVersion),referencePath:vt("string")};class Os extends Fi{constructor(e,t,i){super(e,t,If(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new ve(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function Er(n,e,...t){if(n=wt(n),R2("collection","path",e),n instanceof gd){const i=Je.fromString(e,...t);return dy(i),new Os(n,null,i)}{if(!(n instanceof ft||n instanceof Os))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return dy(i),new Os(n.firestore,null,i)}}function bn(n,e,...t){if(n=wt(n),arguments.length===1&&(e=bf.newId()),R2("doc","path",e),n instanceof gd){const i=Je.fromString(e,...t);return uy(i),new ft(n,null,new ve(i))}{if(!(n instanceof ft||n instanceof Os))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return uy(i),new ft(n.firestore,n instanceof Os?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="AsyncQueue";class ex{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jv(this,"async_queue_retry"),this._c=()=>{const i=ym();i&&he(Zy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Jr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;he(Zy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ts("INTERNAL UNHANDLED ERROR: ",tx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Bf.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&je(47125,{Pc:tx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function tx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ui extends gd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new ex,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ex(e),this._firestoreClient=void 0,await e}}}function hI(n,e){const t=typeof n=="object"?n:df(),i=typeof n=="string"?n:Ou,o=Li(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const c=E_("firestore");c&&dI(o,...c)}return o}function Wf(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mI(n),n._firestoreClient}function mI(n){const e=n._freezeSettings(),t=(function(o,c,d,m){return new M6(o,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Wv(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new aI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Ut.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ul(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:vt("string",Dn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(Ul(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:vt("string",Cr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ul(e,Ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ir(e.vectorValues);throw new ue(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ir._jsonSchemaVersion="firestore/vectorValue/1.0",Ir._jsonSchema={type:vt("string",Ir._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=/^__.*__$/;class pI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bl(e,this.data,t,this.fieldTransforms)}}class Kv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:n})}}class Kf{constructor(e,t,i,o,c,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Qv(this.Ac)&&fI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||md(e)}Cc(e,t,i,o=!1){return new Kf({Ac:e,methodName:t,Dc:i,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(n){const e=n._freezeSettings(),t=md(n._databaseId);return new gI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yv(n,e,t,i,o,c={}){const d=n.Cc(c.merge||c.mergeFields?2:0,e,t,o);Qf("Data must be an object, but it was:",d,i);const m=Jv(i,d);let p,g;if(c.merge)p=new wn(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const v=[];for(const _ of c.mergeFields){const b=Ym(e,_,t);if(!d.contains(b))throw new ue(J.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Zv(v,b)||v.push(b)}p=new wn(v),g=d.fieldTransforms.filter((_=>p.covers(_.field)))}else p=null,g=d.fieldTransforms;return new pI(new dn(m),p,g)}class vd extends Gf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vd}}function yI(n,e,t,i){const o=n.Cc(1,e,t);Qf("Data must be an object, but it was:",o,i);const c=[],d=dn.empty();Ks(i,((p,g)=>{const v=Yf(e,p,t);g=wt(g);const _=o.yc(v);if(g instanceof vd)c.push(v);else{const b=ql(g,_);b!=null&&(c.push(v),d.set(v,b))}}));const m=new wn(c);return new Kv(d,m,o.fieldTransforms)}function xI(n,e,t,i,o,c){const d=n.Cc(1,e,t),m=[Ym(e,i,t)],p=[o];if(c.length%2!=0)throw new ue(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)m.push(Ym(e,c[b])),p.push(c[b+1]);const g=[],v=dn.empty();for(let b=m.length-1;b>=0;--b)if(!Zv(g,m[b])){const O=m[b];let k=p[b];k=wt(k);const D=d.yc(O);if(k instanceof vd)g.push(O);else{const A=ql(k,D);A!=null&&(g.push(O),v.set(O,A))}}const _=new wn(g);return new Kv(v,_,d.fieldTransforms)}function vI(n,e,t,i=!1){return ql(t,n.Cc(i?4:3,e))}function ql(n,e){if(Xv(n=wt(n)))return Qf("Unsupported field value:",e,n),Jv(n,e);if(n instanceof Gf)return(function(i,o){if(!Qv(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const c=[];let d=0;for(const m of i){let p=ql(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(n,e)}return(function(i,o){if((i=wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return aE(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Pe.fromDate(i);return{timestampValue:zu(o.serializer,c)}}if(i instanceof Pe){const c=new Pe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zu(o.serializer,c)}}if(i instanceof Cr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Dn)return{bytesValue:mv(o.serializer,i._byteString)};if(i instanceof ft){const c=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Pf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ir)return(function(d,m){return{mapValue:{fields:{[$2]:{stringValue:z2},[Fu]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Tf(m.serializer,g)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${sd(i)}`)})(n,e)}function Jv(n,e){const t={};return V2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(n,((i,o)=>{const c=ql(o,e.mc(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function Xv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof Cr||n instanceof Dn||n instanceof ft||n instanceof Gf||n instanceof Ir)}function Qf(n,e,t){if(!Xv(t)||!D2(t)){const i=sd(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Ym(n,e,t){if((e=wt(e))instanceof yd)return e._internalPath;if(typeof e=="string")return Yf(n,e);throw Gu("Field path arguments must be of type string or ",n,!1,void 0,t)}const wI=new RegExp("[~\\*/\\[\\]]");function Yf(n,e,t){if(e.search(wI)>=0)throw Gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yd(...e.split("."))._internalPath}catch{throw Gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gu(n,e,t,i,o){const c=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${i}`),d&&(p+=` in document ${o}`),p+=")"),new ue(J.INVALID_ARGUMENT,m+n+p)}function Zv(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bI extends ew{data(){return super.data()}}function wd(n,e){return typeof e=="string"?Yf(n,e):e instanceof yd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jf{}class tw extends Jf{}function Ya(n,e,...t){let i=[];e instanceof Jf&&i.push(e),i=i.concat(t),(function(c){const d=c.filter((p=>p instanceof Xf)).length,m=c.filter((p=>p instanceof bd)).length;if(d>1||d>0&&m>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class bd extends tw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bd(e,t,i)}_apply(e){const t=this._parse(e);return nw(e._query,t),new Fi(e.firestore,e.converter,Fm(e._query,t))}_parse(e){const t=xd(e.firestore);return(function(c,d,m,p,g,v,_){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){rx(_,v);const k=[];for(const D of _)k.push(nx(p,c,D));b={arrayValue:{values:k}}}else b=nx(p,c,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||rx(_,v),b=vI(m,d,_,v==="in"||v==="not-in");return xt.create(g,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ja(n,e,t){const i=e,o=wd("where",n);return bd._create(o,i,t)}class Xf extends Jf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const p of m)nw(d,p),d=Fm(d,p)})(e._query,t),new Fi(e.firestore,e.converter,Fm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zf extends tw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zf(e,t)}_apply(e){const t=(function(o,c,d){if(o.startAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sl(c,d)})(e._query,this._field,this._direction);return new Fi(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new co(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Xa(n,e="asc"){const t=e,i=wd("orderBy",n);return Zf._create(i,t)}function nx(n,e,t){if(typeof(t=wt(t))=="string"){if(t==="")throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!J2(e)&&t.indexOf("/")!==-1)throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!ve.isDocumentKey(i))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vy(n,new ve(i))}if(t instanceof ft)return vy(n,t._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sd(t)}.`)}function rx(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nw(n,e){const t=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NI{convertValue(e,t="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ks(e,((o,c)=>{i[o]=this.convertValue(c,t)})),i}convertVectorValue(e){const t=e.fields?.[Fu].arrayValue?.values?.map((i=>mt(i.doubleValue)));return new Ir(t)}convertGeoPoint(e){return new Cr(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=od(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new Pe(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);qe(vv(i),9688,{name:e});const o=new Tl(i.get(1),i.get(3)),c=new ve(i.popFirst(5));return o.isEqual(t)||ts(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class ml{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ii extends ew{constructor(e,t,i,o,c,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(wd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ii._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ii._jsonSchema={type:vt("string",Ii._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Iu extends Ii{data(e={}){return super.data(e)}}class za{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ml(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Iu(this._firestore,this._userDataWriter,i.key,i,new ml(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new Iu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ml(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new Iu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ml(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),v=d.indexOf(m.doc.key)),{type:jI(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){n=rr(n,ft);const e=rr(n.firestore,Ui);return cI(Wf(e),n._key).then((t=>CI(e,n,t)))}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:vt("string",za._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class sw extends NI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function Za(n){n=rr(n,Fi);const e=rr(n.firestore,Ui),t=Wf(e),i=new sw(e);return _I(n._query),uI(t,n._query).then((o=>new za(e,i,n,o)))}function wl(n,e,t){n=rr(n,ft);const i=rr(n.firestore,Ui),o=rw(n.converter,e,t);return jd(i,[Yv(xd(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Vn.none())])}function ep(n,e,t,...i){n=rr(n,ft);const o=rr(n.firestore,Ui),c=xd(o);let d;return d=typeof(e=wt(e))=="string"||e instanceof yd?xI(c,"updateDoc",n._key,e,t,i):yI(c,"updateDoc",n._key,e),jd(o,[d.toMutation(n._key,Vn.exists(!0))])}function EI(n){return jd(rr(n.firestore,Ui),[new kf(n._key,Vn.none())])}function Nd(n,e){const t=rr(n.firestore,Ui),i=bn(n),o=rw(n.converter,e);return jd(t,[Yv(xd(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Vn.exists(!1))]).then((()=>i))}function jd(n,e){return(function(i,o){const c=new Jr;return i.asyncQueue.enqueueAndForget((async()=>JC(await lI(i),o,c))),c.promise})(Wf(n),e)}function CI(n,e,t){const i=t.docs.get(e._key),o=new sw(n);return new Ii(n,o,e._key,i,new ml(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ao=o})(so),Tr(new tr("firestore",((i,{instanceIdentifier:o,options:c})=>{const d=i.getProvider("app").getImmediate(),m=new Ui(new x6(i.getProvider("auth-internal")),new b6(d,i.getProvider("app-check-internal")),(function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(g.options.projectId,v)})(d,o),d);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Ln(ay,oy,e),Ln(ay,oy,"esm2020")})();var II="firebase",TI="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(II,TI,"app");const iw="@firebase/installations",tp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=1e4,ow=`w:${tp}`,lw="FIS_v2",kI="https://firebaseinstallations.googleapis.com/v1",SI=3600*1e3,AI="installations",PI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pi=new Di(AI,PI,RI);function cw(n){return n instanceof or&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw({projectId:n}){return`${kI}/projects/${n}/installations`}function dw(n){return{token:n.token,requestStatus:2,expiresIn:LI(n.expiresIn),creationTime:Date.now()}}async function hw(n,e){const i=(await e.json()).error;return Pi.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function mw({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function DI(n,{refreshToken:e}){const t=mw(n);return t.append("Authorization",VI(e)),t}async function fw(n){const e=await n();return e.status>=500&&e.status<600?n():e}function LI(n){return Number(n.replace("s","000"))}function VI(n){return`${lw} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=uw(n),o=mw(n),c=e.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={fid:t,authVersion:lw,appId:n.appId,sdkVersion:ow},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await fw(()=>fetch(i,m));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:dw(g.authToken)}}else throw await hw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=/^[cdef][\w-]{21}$/,Jm="";function UI(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=BI(n);return FI.test(t)?t:Jm}catch{return Jm}}function BI(n){return OI(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;function yw(n,e){const t=Ed(n);xw(t,e),$I(t,e)}function xw(n,e){const t=gw.get(n);if(t)for(const i of t)i(e)}function $I(n,e){const t=zI();t&&t.postMessage({key:n,fid:e}),HI()}let Ci=null;function zI(){return!Ci&&"BroadcastChannel"in self&&(Ci=new BroadcastChannel("[Firebase] FID Change"),Ci.onmessage=n=>{xw(n.data.key,n.data.fid)}),Ci}function HI(){gw.size===0&&Ci&&(Ci.close(),Ci=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firebase-installations-database",WI=1,Ri="firebase-installations-store";let vm=null;function np(){return vm||(vm=Bx(qI,WI,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ri)}}})),vm}async function Ku(n,e){const t=Ed(n),o=(await np()).transaction(Ri,"readwrite"),c=o.objectStore(Ri),d=await c.get(t);return await c.put(e,t),await o.done,(!d||d.fid!==e.fid)&&yw(n,e.fid),e}async function vw(n){const e=Ed(n),i=(await np()).transaction(Ri,"readwrite");await i.objectStore(Ri).delete(e),await i.done}async function Cd(n,e){const t=Ed(n),o=(await np()).transaction(Ri,"readwrite"),c=o.objectStore(Ri),d=await c.get(t),m=e(d);return m===void 0?await c.delete(t):await c.put(m,t),await o.done,m&&(!d||d.fid!==m.fid)&&yw(n,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(n){let e;const t=await Cd(n.appConfig,i=>{const o=GI(i),c=KI(n,o);return e=c.registrationPromise,c.installationEntry});return t.fid===Jm?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function GI(n){const e=n||{fid:UI(),registrationStatus:0};return ww(e)}function KI(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Pi.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=QI(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:YI(n)}:{installationEntry:e}}async function QI(n,e){try{const t=await MI(n,e);return Ku(n.appConfig,t)}catch(t){throw cw(t)&&t.customData.serverCode===409?await vw(n.appConfig):await Ku(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function YI(n){let e=await sx(n.appConfig);for(;e.registrationStatus===1;)await pw(100),e=await sx(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await rp(n);return i||t}return e}function sx(n){return Cd(n,e=>{if(!e)throw Pi.create("installation-not-found");return ww(e)})}function ww(n){return JI(n)?{fid:n.fid,registrationStatus:0}:n}function JI(n){return n.registrationStatus===1&&n.registrationTime+aw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI({appConfig:n,heartbeatServiceProvider:e},t){const i=ZI(n,t),o=DI(n,t),c=e.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={installation:{sdkVersion:ow,appId:n.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await fw(()=>fetch(i,m));if(p.ok){const g=await p.json();return dw(g)}else throw await hw("Generate Auth Token",p)}function ZI(n,{fid:e}){return`${uw(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(n,e=!1){let t;const i=await Cd(n.appConfig,c=>{if(!bw(c))throw Pi.create("not-registered");const d=c.authToken;if(!e&&nT(d))return c;if(d.requestStatus===1)return t=eT(n,e),c;{if(!navigator.onLine)throw Pi.create("app-offline");const m=sT(c);return t=tT(n,m),m}});return t?await t:i.authToken}async function eT(n,e){let t=await ix(n.appConfig);for(;t.authToken.requestStatus===1;)await pw(100),t=await ix(n.appConfig);const i=t.authToken;return i.requestStatus===0?sp(n,e):i}function ix(n){return Cd(n,e=>{if(!bw(e))throw Pi.create("not-registered");const t=e.authToken;return iT(t)?{...e,authToken:{requestStatus:0}}:e})}async function tT(n,e){try{const t=await XI(n,e),i={...e,authToken:t};return await Ku(n.appConfig,i),t}catch(t){if(cw(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await vw(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Ku(n.appConfig,i)}throw t}}function bw(n){return n!==void 0&&n.registrationStatus===2}function nT(n){return n.requestStatus===2&&!rT(n)}function rT(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+SI}function sT(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function iT(n){return n.requestStatus===1&&n.requestTime+aw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(n){const e=n,{installationEntry:t,registrationPromise:i}=await rp(e);return i?i.catch(console.error):sp(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(n,e=!1){const t=n;return await lT(t),(await sp(t,e)).token}async function lT(n){const{registrationPromise:e}=await rp(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(n){if(!n||!n.options)throw wm("App Configuration");if(!n.name)throw wm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw wm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function wm(n){return Pi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="installations",uT="installations-internal",dT=n=>{const e=n.getProvider("app").getImmediate(),t=cT(e),i=Li(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},hT=n=>{const e=n.getProvider("app").getImmediate(),t=Li(e,_w).getImmediate();return{getId:()=>aT(t),getToken:o=>oT(t,o)}};function mT(){Tr(new tr(_w,dT,"PUBLIC")),Tr(new tr(uT,hT,"PRIVATE"))}mT();Ln(iw,tp);Ln(iw,tp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="analytics",fT="firebase_id",pT="origin",gT=60*1e3,yT="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ip="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new ed("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_n=new Di("analytics","Analytics",xT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){if(!n.startsWith(ip)){const e=_n.create("invalid-gtag-resource",{gtagURL:n});return hn.warn(e.message),""}return n}function Nw(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function wT(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function bT(n,e){const t=wT("firebase-js-sdk-policy",{createScriptURL:vT}),i=document.createElement("script"),o=`${ip}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function _T(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function NT(n,e,t,i,o,c){const d=i[o];try{if(d)await e[d];else{const p=(await Nw(t)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){hn.error(m)}n("config",o,c)}async function jT(n,e,t,i,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await Nw(t);for(const p of d){const g=m.find(_=>_.measurementId===p),v=g&&e[g.appId];if(v)c.push(v);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),n("event",i,o||{})}catch(c){hn.error(c)}}function ET(n,e,t,i){async function o(c,...d){try{if(c==="event"){const[m,p]=d;await jT(n,e,t,m,p)}else if(c==="config"){const[m,p]=d;await NT(n,e,t,i,m,p)}else if(c==="consent"){const[m,p]=d;n("consent",m,p)}else if(c==="get"){const[m,p,g]=d;n("get",m,p,g)}else if(c==="set"){const[m]=d;n("set",m)}else n(c,...d)}catch(m){hn.error(m)}}return o}function CT(n,e,t,i,o){let c=function(...d){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=ET(c,n,e,t),{gtagCore:c,wrappedGtag:window[o]}}function IT(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ip)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=30,kT=1e3;class ST{constructor(e={},t=kT){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const jw=new ST;function AT(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function PT(n){const{appId:e,apiKey:t}=n,i={method:"GET",headers:AT(t)},o=yT.replace("{app-id}",e),c=await fetch(o,i);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();m.error?.message&&(d=m.error.message)}catch{}throw _n.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function RT(n,e=jw,t){const{appId:i,apiKey:o,measurementId:c}=n.options;if(!i)throw _n.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:i};throw _n.create("no-api-key")}const d=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new VT;return setTimeout(async()=>{m.abort()},gT),Ew({appId:i,apiKey:o,measurementId:c},d,m,e)}async function Ew(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=jw){const{appId:c,measurementId:d}=n;try{await DT(i,e)}catch(m){if(d)return hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{const m=await PT(n);return o.deleteThrottleMetadata(c),m}catch(m){const p=m;if(!LT(p)){if(o.deleteThrottleMetadata(c),d)return hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:d};throw m}const g=Number(p?.customData?.httpStatus)===503?A0(t,o.intervalMillis,TT):A0(t,o.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return o.setThrottleMetadata(c,v),hn.debug(`Calling attemptFetch again in ${g} millis`),Ew(n,v,i,o)}}function DT(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(c),i(_n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LT(n){if(!(n instanceof or)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class VT{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function MT(n,e,t,i,o){if(o&&o.global){n("event",t,i);return}else{const c=await e,d={...i,send_to:c};n("event",t,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(){if(Mx())try{await Ox()}catch(n){return hn.warn(_n.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return hn.warn(_n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function FT(n,e,t,i,o,c,d){const m=RT(n);m.then(b=>{t[b.measurementId]=b.appId,n.options.measurementId&&b.measurementId!==n.options.measurementId&&hn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${b.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(b=>hn.error(b)),e.push(m);const p=OT().then(b=>{if(b)return i.getId()}),[g,v]=await Promise.all([m,p]);IT(c)||bT(c,g.measurementId),o("js",new Date);const _=d?.config??{};return _[pT]="firebase",_.update=!0,v!=null&&(_[fT]=v),o("config",g.measurementId,_),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.app=e}_delete(){return delete bl[this.app.options.appId],Promise.resolve()}}let bl={},ax=[];const ox={};let bm="dataLayer",BT="gtag",lx,Cw,cx=!1;function $T(){const n=[];if(Vx()&&n.push("This is a browser extension environment."),V_()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=_n.create("invalid-analytics-context",{errorInfo:e});hn.warn(t.message)}}function zT(n,e,t){$T();const i=n.options.appId;if(!i)throw _n.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _n.create("no-api-key");if(bl[i]!=null)throw _n.create("already-exists",{id:i});if(!cx){_T(bm);const{wrappedGtag:c,gtagCore:d}=CT(bl,ax,ox,bm,BT);Cw=c,lx=d,cx=!0}return bl[i]=FT(n,ax,ox,e,lx,bm,t),new UT(n)}function HT(n=df()){n=wt(n);const e=Li(n,Qu);return e.isInitialized()?e.getImmediate():qT(n)}function qT(n,e={}){const t=Li(n,Qu);if(t.isInitialized()){const o=t.getImmediate();if(Fs(e,t.getOptions()))return o;throw _n.create("already-initialized")}return t.initialize({options:e})}function WT(n,e,t,i){n=wt(n),MT(Cw,bl[n.app.options.appId],e,t,i).catch(o=>hn.error(o))}const ux="@firebase/analytics",dx="0.10.18";function GT(){Tr(new tr(Qu,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return zT(i,o,t)},"PUBLIC")),Tr(new tr("analytics-internal",n,"PRIVATE")),Ln(ux,dx),Ln(ux,dx,"esm2020");function n(e){try{const t=e.getProvider(Qu).getImmediate();return{logEvent:(i,o,c)=>WT(t,i,o,c)}}catch(t){throw _n.create("interop-component-reg-failed",{reason:t})}}}GT();const KT={apiKey:"AIzaSyBf-ZFhG8tesNnulOqO_zppcU5wC9pj6MM",authDomain:"city-drive-953c0.firebaseapp.com",projectId:"city-drive-953c0",storageBucket:"city-drive-953c0.firebasestorage.app",messagingSenderId:"83138806155",appId:"1:83138806155:web:e7d967dbeddee9e47daf8e",measurementId:"G-RB3LNG1J3K"},ap=$x(KT),pu=f6(ap),ct=hI(ap);let QT;if(typeof window<"u")try{QT=HT(ap)}catch(n){console.warn("Analytics initialization failed:",n)}const Iw=V.createContext(),YT=({children:n})=>{const[e,t]=V.useState(null),[i,o]=V.useState(!0);V.useEffect(()=>{const k=nj(pu,async D=>{if(D)try{const A=await _d(bn(ct,"users",D.uid));if(A.exists()){const q=A.data(),I={id:D.uid,email:D.email,name:q.name||D.displayName||D.email.split("@")[0],role:q.role||"customer"};t(I),localStorage.setItem("user",JSON.stringify(I))}else{const q={id:D.uid,email:D.email,name:D.displayName||D.email.split("@")[0],role:"customer"};await wl(bn(ct,"users",D.uid),{email:D.email,name:q.name,role:"customer",createdAt:new Date}),t(q),localStorage.setItem("user",JSON.stringify(q))}}catch(A){console.error("Error loading user data:",A);const q={id:D.uid,email:D.email,name:D.displayName||D.email.split("@")[0],role:"customer"};t(q)}else t(null),localStorage.removeItem("user");o(!1)});return()=>k()},[]);const O={user:e,loading:i,login:async(k,D)=>{try{const A=await ZN(pu,k,D);return console.log("✅ User signed in:",A.user.email),{success:!0,user:A.user}}catch(A){console.error("❌ Login error:",A);let q="Login failed. Please try again.";return A.code==="auth/user-not-found"?q="No account found with this email address.":A.code==="auth/wrong-password"?q="Incorrect password.":A.code==="auth/invalid-email"&&(q="Invalid email address."),{success:!1,error:q}}},register:async k=>{try{const D=await XN(pu,k.email,k.password);return await wl(bn(ct,"users",D.user.uid),{email:k.email,name:k.name,role:"customer",createdAt:new Date}),console.log("✅ User registered:",D.user.email),{success:!0,user:D.user}}catch(D){console.error("❌ Registration error:",D);let A="Registration failed. Please try again.";return D.code==="auth/email-already-in-use"?A="An account with this email already exists.":D.code==="auth/weak-password"?A="Password should be at least 6 characters.":D.code==="auth/invalid-email"&&(A="Invalid email address."),{success:!1,error:A}}},logout:async()=>{try{await rj(pu),t(null),localStorage.removeItem("user"),console.log("✅ User signed out")}catch(k){console.error("❌ Logout error:",k)}},updateProfile:async k=>{if(!e)return{success:!1,error:"No user logged in"};try{await ep(bn(ct,"users",e.id),{...k,updatedAt:new Date});const D={...e,...k};return t(D),localStorage.setItem("user",JSON.stringify(D)),{success:!0}}catch(D){return console.error("Error updating profile:",D),{success:!1,error:"Failed to update profile"}}},isAuthenticated:()=>!!e,hasRole:k=>e?.role===k,isOwner:()=>e?.role==="owner",isCustomer:()=>e?.role==="customer"};return s.jsx(Iw.Provider,{value:O,children:n})},Qt=()=>{const n=V.useContext(Iw);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},JT="/assets/logo-CF3gF4eH.svg",XT="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.667%203.33398H3.33366C2.41318%203.33398%201.66699%204.08018%201.66699%205.00065V15.0007C1.66699%2015.9211%202.41318%2016.6673%203.33366%2016.6673H16.667C17.5875%2016.6673%2018.3337%2015.9211%2018.3337%2015.0007V5.00065C18.3337%204.08018%2017.5875%203.33398%2016.667%203.33398Z'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M18.3337%205.83398L10.8587%2010.584C10.6014%2010.7452%2010.3039%2010.8307%2010.0003%2010.8307C9.69673%2010.8307%209.39927%2010.7452%209.14199%2010.584L1.66699%205.83398'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ZT="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.9997%201.66602H12.4997C11.3946%201.66602%2010.3348%202.105%209.5534%202.8864C8.77199%203.66781%208.33301%204.72761%208.33301%205.83268V8.33268H5.83301V11.666H8.33301V18.3327H11.6663V11.666H14.1663L14.9997%208.33268H11.6663V5.83268C11.6663%205.61167%2011.7541%205.39971%2011.9104%205.24343C12.0667%205.08715%2012.2787%204.99935%2012.4997%204.99935H14.9997V1.66602Z'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ek="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.167%201.66602H5.83366C3.53247%201.66602%201.66699%203.5315%201.66699%205.83268V14.166C1.66699%2016.4672%203.53247%2018.3327%205.83366%2018.3327H14.167C16.4682%2018.3327%2018.3337%2016.4672%2018.3337%2014.166V5.83268C18.3337%203.5315%2016.4682%201.66602%2014.167%201.66602Z'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.3337%209.47525C13.4366%2010.1688%2013.3181%2010.8771%2012.9952%2011.4994C12.6723%2012.1218%2012.1614%2012.6264%2011.5351%2012.9416C10.9088%2013.2569%2010.1991%2013.3666%209.5069%2013.2552C8.81468%2013.1438%208.17521%2012.817%207.67944%2012.3212C7.18367%2011.8255%206.85685%2011.186%206.74546%2010.4938C6.63408%209.80154%206.74379%209.09183%207.05901%208.46556C7.37423%207.8393%207.8789%207.32837%208.50123%207.00545C9.12356%206.68254%209.83187%206.56407%2010.5254%206.66692C11.2328%206.77182%2011.8878%207.10147%2012.3935%207.60717C12.8992%208.11288%2013.2288%208.76782%2013.3337%209.47525Z'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M14.583%205.41602H14.5913'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",tk="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.3337%203.3327C18.3337%203.3327%2017.7503%205.0827%2016.667%206.16603C18.0003%2014.4994%208.83366%2020.5827%201.66699%2015.8327C3.50033%2015.916%205.33366%2015.3327%206.66699%2014.166C2.50033%2012.916%200.416992%207.99937%202.50033%204.16603C4.33366%206.3327%207.16699%207.5827%2010.0003%207.49937C9.25033%203.99937%2013.3337%201.99937%2015.8337%204.3327C16.7503%204.3327%2018.3337%203.3327%2018.3337%203.3327Z'%20stroke='%2364748B'%20stroke-width='1.66667'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",nk="data:image/svg+xml,%3csvg%20width='21'%20height='15'%20viewBox='0%200%2021%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='21'%20height='1.5'%20rx='0.75'%20fill='%23426287'/%3e%3crect%20x='8'%20y='6'%20width='13'%20height='1.5'%20rx='0.75'%20fill='%23426287'/%3e%3crect%20x='6'%20y='13'%20width='15'%20height='1.5'%20rx='0.75'%20fill='%23426287'/%3e%3c/svg%3e",rk="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.8359%2010.6152L14.9999%2014.6949'%20stroke='%237A7B7D'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.14099%2011.7381C11.8699%2010.6019%2013.142%207.51376%2011.9822%204.84043C10.8224%202.1671%207.67004%200.920959%204.94113%202.0571C2.21222%203.19324%200.940171%206.28142%202.09993%208.95475C3.25969%2011.6281%206.41208%2012.8742%209.14099%2011.7381Z'%20stroke='%237A7B7D'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",sk="data:image/svg+xml,%3csvg%20width='15'%20height='15'%20viewBox='0%200%2015%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.5%2015L0%2013.5L6%207.5L0%201.5L1.5%200L7.5%206L13.5%200L15%201.5L9%207.5L15%2013.5L13.5%2015L7.5%209L1.5%2015Z'%20fill='%23426287'/%3e%3c/svg%3e",ik="data:image/svg+xml,%3csvg%20width='12'%20height='11'%20viewBox='0%200%2012%2011'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%2010V9C11%208.0681%2010.3626%207.28505%209.5%207.063M7.75%201.14538C8.48295%201.44208%209%202.16066%209%203C9%203.83934%208.48295%204.55795%207.75%204.8546M8.5%2010C8.5%209.0681%208.5%208.6022%208.34775%208.23465C8.14475%207.7446%207.7554%207.35525%207.26535%207.15225C6.8978%207%206.4319%207%205.5%207H4C3.06811%207%202.60218%207%202.23464%207.15225C1.74458%207.35525%201.35523%207.7446%201.15224%208.23465C1%208.6022%201%209.0681%201%2010M6.75%203C6.75%204.10457%205.85455%205%204.75%205C3.64543%205%202.75%204.10457%202.75%203C2.75%201.89543%203.64543%201%204.75%201C5.85455%201%206.75%201.89543%206.75%203Z'%20stroke='%234A5565'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ak="data:image/svg+xml,%3csvg%20width='12'%20height='10'%20viewBox='0%200%2012%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16875%203.25035C8.50367%202.16203%207.59638%201.2419%206.5175%200.561602C6.01909%200.245717%205.45093%200.0566427%204.86263%200.0108857C4.27432%20-0.0348713%203.68376%200.0640806%203.1425%200.299102C2.66906%200.522416%202.2571%200.857616%201.94219%201.27576C1.62728%201.6939%201.41888%202.18241%201.335%202.6991C1.305%202.87535%201.2825%203.0441%201.26%203.2091C0.908904%203.26601%200.589454%203.44582%200.358662%203.71646C0.127869%203.98709%200.000753104%204.33092%200%204.6866V6.98535C0%207.18426%200.0790176%207.37503%200.21967%207.51568C0.360322%207.65633%200.551088%207.73535%200.75%207.73535V5.4366V4.6866C0.75%204.48769%200.829018%204.29692%200.96967%204.15627C1.11032%204.01562%201.30109%203.9366%201.5%203.9366H8.52375C9.24649%203.93759%209.93935%204.22514%2010.4504%204.7362C10.9615%205.24725%2011.249%205.94011%2011.25%206.66285V6.9366H10.5C10.3416%206.55039%2010.0466%206.23602%209.67121%206.05346C9.29582%205.87091%208.86636%205.83296%208.46478%205.94685C8.0632%206.06074%207.71761%206.3185%207.49395%206.67095C7.27029%207.02339%207.18423%207.44585%207.25219%207.8577C7.32014%208.26955%207.53736%208.64196%207.86238%208.90388C8.18741%209.16579%208.59749%209.29887%209.01437%209.27771C9.43126%209.25656%209.82576%209.08265%2010.1226%208.78918C10.4194%208.49571%2010.5978%208.10322%2010.6237%207.6866H11.25C11.4489%207.6866%2011.6397%207.60758%2011.7803%207.46693C11.921%207.32628%2012%207.13551%2012%206.9366V6.66285C11.9985%205.85357%2011.715%205.07013%2011.1982%204.4473C10.6815%203.82448%209.96384%203.40122%209.16875%203.25035ZM3.375%203.1866H1.84875C1.84875%203.07035%201.8825%202.95035%201.905%202.8116C1.96979%202.39965%202.13887%202.01111%202.39616%201.68293C2.65346%201.35475%202.99041%201.09783%203.375%200.936602V3.1866ZM4.125%203.1866V0.779102C4.82511%200.688187%205.53513%200.841848%206.135%201.2141C6.9539%201.72417%207.66069%202.39523%208.2125%203.1866H4.125ZM8.925%208.5791C8.73958%208.5791%208.55832%208.52412%208.40415%208.4211C8.24998%208.31809%208.12982%208.17167%208.05886%208.00037C7.98791%207.82906%207.96934%207.64056%208.00551%207.4587C8.04169%207.27685%208.13098%207.1098%208.26209%206.97869C8.3932%206.84758%208.56025%206.75829%208.7421%206.72212C8.92396%206.68594%209.11246%206.70451%209.28377%206.77546C9.45507%206.84642%209.60149%206.96658%209.7045%207.12075C9.80752%207.27492%209.8625%207.45618%209.8625%207.6416C9.8625%207.89024%209.76373%208.1287%209.58791%208.30451C9.4121%208.48033%209.17364%208.5791%208.925%208.5791Z'%20fill='%234A5565'/%3e%3cpath%20d='M4.56345%206.93507C4.40507%206.54886%204.11004%206.23449%203.73465%206.05193C3.35927%205.86938%202.92981%205.83142%202.52823%205.94531C2.12664%206.05921%201.78105%206.31697%201.5574%206.66941C1.33374%207.02186%201.24768%207.44431%201.31564%207.85617C1.38359%208.26802%201.60081%208.64043%201.92583%208.90234C2.25086%209.16426%202.66094%209.29733%203.07782%209.27618C3.4947%209.25502%203.88921%209.08112%204.18605%208.78764C4.48289%208.49417%204.66128%208.10168%204.6872%207.68507H6.6747C6.6747%207.65507%206.6747%207.62132%206.6747%207.59132C6.66728%207.37007%206.69255%207.14894%206.7497%206.93507H4.56345ZM2.9997%208.57757C2.81428%208.57757%202.63302%208.52258%202.47885%208.41957C2.32468%208.31656%202.20452%208.17014%202.13356%207.99883C2.0626%207.82753%202.04404%207.63903%202.08021%207.45717C2.11638%207.27531%202.20567%207.10827%202.33678%206.97715C2.4679%206.84604%202.63494%206.75675%202.8168%206.72058C2.99866%206.68441%203.18716%206.70297%203.35846%206.77393C3.52977%206.84489%203.67619%206.96505%203.7792%207.11922C3.88221%207.27339%203.9372%207.45465%203.9372%207.64007C3.9372%207.88871%203.83843%208.12716%203.66261%208.30298C3.48679%208.47879%203.24834%208.57757%202.9997%208.57757Z'%20fill='%234A5565'/%3e%3c/svg%3e",ok="data:image/svg+xml,%3csvg%20width='8'%20height='11'%20viewBox='0%200%208%2011'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4%205C3.44767%205%203%204.55233%203%204C3%203.44767%203.44767%203%204%203C4.55233%203%205%203.44767%205%204C5%204.55233%204.55233%205%204%205ZM4%202.33333C3.07967%202.33333%202.33333%203.07933%202.33333%204C2.33333%204.92067%203.07967%205.66667%204%205.66667C4.92033%205.66667%205.66667%204.92067%205.66667%204C5.66667%203.07933%204.92033%202.33333%204%202.33333ZM4%209.66667C3.44567%209.66967%200.666667%205.39367%200.666667%204C0.666667%202.15933%202.159%200.666667%204%200.666667C5.841%200.666667%207.33333%202.15933%207.33333%204C7.33333%205.375%204.54567%209.66967%204%209.66667ZM4%200C1.791%200%200%201.791%200%204C0%205.67267%203.335%2010.6703%204%2010.6667C4.65467%2010.6703%208%205.65%208%204C8%201.791%206.209%200%204%200Z'%20fill='%234A5565'/%3e%3c/svg%3e",lk="/assets/fuel_icon-DWuUSXt8.svg",Tw="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_4556_3228)'%3e%3cpath%20d='M13.334%201.33398H2.66732C1.93094%201.33398%201.33398%201.93094%201.33398%202.66732V13.334C1.33398%2014.0704%201.93094%2014.6673%202.66732%2014.6673H13.334C14.0704%2014.6673%2014.6673%2014.0704%2014.6673%2013.334V2.66732C14.6673%201.93094%2014.0704%201.33398%2013.334%201.33398Z'%20stroke='%236B6B6B'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10.3346%208H5.66797'%20stroke='%236B6B6B'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2010.3346V5.66797'%20stroke='%236B6B6B'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4556_3228'%3e%3crect%20width='16'%20height='16'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",kw="data:image/svg+xml,%3csvg%20width='19'%20height='19'%20viewBox='0%200%2019%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.0423%2013.4577H16.6257C17.1007%2013.4577%2017.4173%2013.141%2017.4173%2012.666V10.291C17.4173%209.57852%2016.8632%208.94518%2016.2298%208.78685C14.8048%208.39102%2012.6673%207.91602%2012.6673%207.91602C12.6673%207.91602%2011.6382%206.80768%2010.9257%206.09518C10.5298%205.77852%2010.0548%205.54102%209.50065%205.54102H3.95898C3.48398%205.54102%203.08815%205.85768%202.85065%206.25352L1.74232%208.54935C1.63749%208.85511%201.58398%209.17612%201.58398%209.49935V12.666C1.58398%2013.141%201.90065%2013.4577%202.37565%2013.4577H3.95898'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5.54232%2015.0417C6.41677%2015.0417%207.12565%2014.3328%207.12565%2013.4583C7.12565%2012.5839%206.41677%2011.875%205.54232%2011.875C4.66787%2011.875%203.95898%2012.5839%203.95898%2013.4583C3.95898%2014.3328%204.66787%2015.0417%205.54232%2015.0417Z'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7.125%2013.459H11.875'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.4583%2015.0417C14.3328%2015.0417%2015.0417%2014.3328%2015.0417%2013.4583C15.0417%2012.5839%2014.3328%2011.875%2013.4583%2011.875C12.5839%2011.875%2011.875%2012.5839%2011.875%2013.4583C11.875%2014.3328%2012.5839%2015.0417%2013.4583%2015.0417Z'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Sw="data:image/svg+xml,%3csvg%20width='19'%20height='19'%20viewBox='0%200%2019%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15.0423%2013.4577H16.6257C17.1007%2013.4577%2017.4173%2013.141%2017.4173%2012.666V10.291C17.4173%209.57852%2016.8632%208.94518%2016.2298%208.78685C14.8048%208.39102%2012.6673%207.91602%2012.6673%207.91602C12.6673%207.91602%2011.6382%206.80768%2010.9257%206.09518C10.5298%205.77852%2010.0548%205.54102%209.50065%205.54102H3.95898C3.48398%205.54102%203.08815%205.85768%202.85065%206.25352L1.74232%208.54935C1.63749%208.85511%201.58398%209.17612%201.58398%209.49935V12.666C1.58398%2013.141%201.90065%2013.4577%202.37565%2013.4577H3.95898'%20stroke='%232563EB'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5.54232%2015.0417C6.41677%2015.0417%207.12565%2014.3328%207.12565%2013.4583C7.12565%2012.5839%206.41677%2011.875%205.54232%2011.875C4.66787%2011.875%203.95898%2012.5839%203.95898%2013.4583C3.95898%2014.3328%204.66787%2015.0417%205.54232%2015.0417Z'%20stroke='%232563EB'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M7.125%2013.459H11.875'%20stroke='%232563EB'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.4583%2015.0417C14.3328%2015.0417%2015.0417%2014.3328%2015.0417%2013.4583C15.0417%2012.5839%2014.3328%2011.875%2013.4583%2011.875C12.5839%2011.875%2011.875%2012.5839%2011.875%2013.4583C11.875%2014.3328%2012.5839%2015.0417%2013.4583%2015.0417Z'%20stroke='%232563EB'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Aw="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_4555_2703)'%3e%3cpath%20d='M15.8333%204.16667V5.83333H12.5V4.16667H15.8333ZM7.5%204.16667V9.16667H4.16667V4.16667H7.5ZM15.8333%2010.8333V15.8333H12.5V10.8333H15.8333ZM7.5%2014.1667V15.8333H4.16667V14.1667H7.5ZM17.5%202.5H10.8333V7.5H17.5V2.5ZM9.16667%202.5H2.5V10.8333H9.16667V2.5ZM17.5%209.16667H10.8333V17.5H17.5V9.16667ZM9.16667%2012.5H2.5V17.5H9.16667V12.5Z'%20fill='%236B6B6B'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4555_2703'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",ck="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_4555_2703)'%3e%3cpath%20d='M15.8333%204.16667V5.83333H12.5V4.16667H15.8333ZM7.5%204.16667V9.16667H4.16667V4.16667H7.5ZM15.8333%2010.8333V15.8333H12.5V10.8333H15.8333ZM7.5%2014.1667V15.8333H4.16667V14.1667H7.5ZM17.5%202.5H10.8333V7.5H17.5V2.5ZM9.16667%202.5H2.5V10.8333H9.16667V2.5ZM17.5%209.16667H10.8333V17.5H17.5V9.16667ZM9.16667%2012.5H2.5V17.5H9.16667V12.5Z'%20fill='%232563EB'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4555_2703'%3e%3crect%20width='20'%20height='20'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Pw="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_4556_3228)'%3e%3cpath%20d='M13.334%201.33398H2.66732C1.93094%201.33398%201.33398%201.93094%201.33398%202.66732V13.334C1.33398%2014.0704%201.93094%2014.6673%202.66732%2014.6673H13.334C14.0704%2014.6673%2014.6673%2014.0704%2014.6673%2013.334V2.66732C14.6673%201.93094%2014.0704%201.33398%2013.334%201.33398Z'%20stroke='%232563EB'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10.3346%208H5.66797'%20stroke='%232563EB'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2010.3346V5.66797'%20stroke='%232563EB'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4556_3228'%3e%3crect%20width='16'%20height='16'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Xm="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.0007%201.33398H6.00065C5.63246%201.33398%205.33398%201.63246%205.33398%202.00065V3.33398C5.33398%203.70217%205.63246%204.00065%206.00065%204.00065H10.0007C10.3688%204.00065%2010.6673%203.70217%2010.6673%203.33398V2.00065C10.6673%201.63246%2010.3688%201.33398%2010.0007%201.33398Z'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10.666%202.66602H11.9993C12.353%202.66602%2012.6921%202.80649%2012.9422%203.05654C13.1922%203.30659%2013.3327%203.64573%2013.3327%203.99935V13.3327C13.3327%2013.6863%2013.1922%2014.0254%2012.9422%2014.2755C12.6921%2014.5255%2012.353%2014.666%2011.9993%2014.666H3.99935C3.64573%2014.666%203.30659%2014.5255%203.05654%2014.2755C2.80649%2014.0254%202.66602%2013.6863%202.66602%2013.3327V3.99935C2.66602%203.64573%202.80649%203.30659%203.05654%203.05654C3.30659%202.80649%203.64573%202.66602%203.99935%202.66602H5.33268'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%207.33398H10.6667'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8%2010.666H10.6667'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5.33398%207.33398H5.34198'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5.33398%2010.666H5.34198'%20stroke='%236B6B6B'%20stroke-width='1.6'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Zm="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.4993%201.66602H7.49935C7.03911%201.66602%206.66602%202.03911%206.66602%202.49935V4.16602C6.66602%204.62625%207.03911%204.99935%207.49935%204.99935H12.4993C12.9596%204.99935%2013.3327%204.62625%2013.3327%204.16602V2.49935C13.3327%202.03911%2012.9596%201.66602%2012.4993%201.66602Z'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.334%203.33398H15.0006C15.4427%203.33398%2015.8666%203.50958%2016.1792%203.82214C16.4917%204.1347%2016.6673%204.55862%2016.6673%205.00065V16.6673C16.6673%2017.1093%2016.4917%2017.5333%2016.1792%2017.8458C15.8666%2018.1584%2015.4427%2018.334%2015.0006%2018.334H5.00065C4.55862%2018.334%204.1347%2018.1584%203.82214%2017.8458C3.50958%2017.5333%203.33398%2017.1093%203.33398%2016.6673V5.00065C3.33398%204.55862%203.50958%204.1347%203.82214%203.82214C4.1347%203.50958%204.55862%203.33398%205.00065%203.33398H6.66732'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10%209.16602H13.3333'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M10%2013.334H13.3333'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.66602%209.16602H6.67602'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.66602%2013.334H6.67602'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",uk="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.2973%2013.5007L10.2973%203.00066C10.1665%202.76981%209.97678%202.5778%209.74752%202.44421C9.51826%202.31062%209.25767%202.24023%208.99232%202.24023C8.72698%202.24023%208.46639%202.31062%208.23713%202.44421C8.00787%202.5778%207.81815%202.76981%207.68733%203.00066L1.68733%2013.5007C1.55509%2013.7297%201.48575%2013.9896%201.48633%2014.254C1.48692%2014.5185%201.55741%2014.7781%201.69066%2015.0065C1.82391%2015.235%202.01519%2015.4241%202.2451%2015.5548C2.47501%2015.6855%202.73538%2015.753%202.99983%2015.7507H14.9998C15.263%2015.7504%2015.5215%2015.6809%2015.7493%2015.5491C15.9771%2015.4174%2016.1662%2015.228%2016.2977%2015C16.4292%2014.772%2016.4984%2014.5134%2016.4983%2014.2503C16.4982%2013.9871%2016.4289%2013.7286%2016.2973%2013.5007Z'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9%206.75V9.75'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9%2012.75H9.0075'%20stroke='%232563EB'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",dk="data:image/svg+xml,%3csvg%20width='15'%20height='12'%20viewBox='0%200%2015%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.999912%205.87109L14.0908%205.87109'%20stroke='%232B3441'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M8.94796%200.999381L14.0908%205.86981L8.94796%2010.7402'%20stroke='%232B3441'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",hk="data:image/svg+xml,%3csvg%20width='14'%20height='15'%20viewBox='0%200%2014%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_4328_766)'%3e%3cpath%20d='M6.93938%201.36674C6.96224%201.31468%206.99755%201.27086%207.04132%201.24023C7.0851%201.20959%207.1356%201.19336%207.18712%201.19336C7.23864%201.19336%207.28914%201.20959%207.33292%201.24023C7.37669%201.27086%207.412%201.31468%207.43485%201.36674L8.63963%204.11764C8.71889%204.2988%208.83602%204.45552%208.98093%204.57433C9.12584%204.69313%209.2942%204.77045%209.4715%204.79964L12.1658%205.24411C12.2169%205.25245%2012.2648%205.27672%2012.3043%205.31419C12.3437%205.35166%2012.3731%205.40082%2012.389%205.45612C12.405%205.51142%2012.4069%205.57065%2012.3946%205.62711C12.3822%205.68357%2012.3561%205.735%2012.3192%205.7756L10.3706%207.91447C10.242%208.05555%2010.1458%208.22979%2010.0903%208.42215C10.0348%208.61452%2010.0216%208.81922%2010.052%209.0186L10.512%2012.0405C10.521%2012.0981%2010.5155%2012.1573%2010.4961%2012.2114C10.4767%2012.2656%2010.4441%2012.3125%2010.4022%2012.3468C10.3603%2012.3812%2010.3107%2012.4015%2010.259%2012.4056C10.2073%2012.4096%2010.1556%2012.3972%2010.1099%2012.3698L7.70137%2010.9423C7.54269%2010.8483%207.36612%2010.7991%207.18686%2010.7991C7.0076%2010.7991%206.83102%2010.8483%206.67235%2010.9423L4.26437%2012.3698C4.21864%2012.3971%204.16704%2012.4093%204.11544%2012.4052C4.06383%2012.4011%204.01429%2012.3807%203.97245%2012.3464C3.93061%2012.3121%203.89815%2012.2652%203.87876%2012.2112C3.85937%2012.1571%203.85383%2012.098%203.86277%2012.0405L4.32226%209.01919C4.3527%208.81972%204.33959%208.6149%204.28407%208.42242C4.22855%208.22995%204.13228%208.05561%204.00359%207.91447L2.05509%205.77618C2.01785%205.73564%201.99146%205.68411%201.97892%205.62748C1.96639%205.57085%201.96822%205.51139%201.9842%205.45588C2.00018%205.40036%202.02967%205.35102%202.06932%205.31348C2.10896%205.27593%202.15716%205.25169%202.20842%205.24352L4.90222%204.79964C5.07971%204.77063%205.24827%204.69339%205.39338%204.57458C5.53848%204.45576%205.65577%204.29894%205.73513%204.11764L6.93938%201.36674Z'%20fill='%230558FE'%20stroke='%230558FE'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_4328_766'%3e%3crect%20width='12.5171'%20height='14.1102'%20fill='white'%20transform='translate(0.928711%200.0175781)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",mk="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.5341%206.66764C14.8385%208.16184%2014.6215%209.71525%2013.9193%2011.0688C13.2171%2012.4224%2012.072%2013.4943%2010.6751%2014.1058C9.27816%2014.7174%207.71382%2014.8315%206.24293%2014.4292C4.77205%2014.0269%203.48353%2013.1326%202.59225%2011.8953C1.70097%2010.6579%201.26081%209.15246%201.34518%207.62989C1.42954%206.10733%202.03332%204.6597%203.05583%203.52842C4.07835%202.39714%205.45779%201.65059%206.96411%201.41327C8.47043%201.17595%2010.0126%201.46221%2011.3334%202.2243'%20stroke='%232563EB'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6%207.33268L8%209.33268L14.6667%202.66602'%20stroke='%232563EB'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",fk="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.3327%204L5.99935%2011.3333L2.66602%208'%20stroke='white'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",pk="data:image/svg+xml,%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14%2016H26'%20stroke='%231F2937'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M24.6673%2016V25.3333C24.6673%2026%2024.0007%2026.6667%2023.334%2026.6667H16.6673C16.0007%2026.6667%2015.334%2026%2015.334%2025.3333V16'%20stroke='%231F2937'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.334%2016.0007V14.6673C17.334%2014.0007%2018.0007%2013.334%2018.6673%2013.334H21.334C22.0007%2013.334%2022.6673%2014.0007%2022.6673%2014.6673V16.0007'%20stroke='%231F2937'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M18.666%2019.334V23.334'%20stroke='%231F2937'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M21.334%2019.334V23.334'%20stroke='%231F2937'%20stroke-width='1.33333'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",gk="data:image/svg+xml,%3csvg%20aria-hidden='true'%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20fill='none'%20viewBox='0%200%2024%2024'%3e%3cpath%20stroke='%23ffffff'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20d='m14.304%204.844%202.852%202.852M7%207H4a1%201%200%200%200-1%201v10a1%201%200%200%200%201%201h11a1%201%200%200%200%201-1v-4.5m2.409-9.91a2.017%202.017%200%200%201%200%202.853l-6.844%206.844L8%2014l.713-3.565%206.844-6.844a2.015%202.015%200%200%201%202.852%200Z'%20/%3e%3c/svg%3e",yk="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%205.66667H13M3.66667%201V2.33333M10.3333%201V2.33333M3.13333%2013H10.8667C11.6134%2013%2011.9868%2013%2012.272%2012.8547C12.5229%2012.7269%2012.7269%2012.5229%2012.8547%2012.272C13%2011.9868%2013%2011.6134%2013%2010.8667V4.46667C13%203.71993%2013%203.34656%2012.8547%203.06135C12.7269%202.81046%2012.5229%202.60649%2012.272%202.47866C11.9868%202.33333%2011.6134%202.33333%2010.8667%202.33333H3.13333C2.3866%202.33333%202.01323%202.33333%201.72801%202.47866C1.47713%202.60649%201.27315%202.81046%201.14533%203.06135C1%203.34656%201%203.71993%201%204.46667V10.8667C1%2011.6134%201%2011.9868%201.14533%2012.272C1.27315%2012.5229%201.47713%2012.7269%201.72801%2012.8547C2.01323%2013%202.38659%2013%203.13333%2013Z'%20stroke='%232563EB'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",xk="/assets/testimonial_image_1-CoRIPhVu.png",vk="/assets/testimonial_image_2-CKWN3yCB.png",wk="/assets/main_car-hpkzbezO.png",bk="/assets/banner_car_image-B9uXTQkB.png",_k="/assets/user_profile-DxguXOBd.png",Nk="/assets/upload_icon-4x7YzYOE.svg",Rw="/assets/car_image1-Csb8-4hg.png",jk="/assets/car_image2-CSZrUwFM.png",Ek="/assets/car_image3-DuXKQfKm.png",Ck="/assets/car_image4-YvfLgyPI.png",Ik="data:image/png;base64,Ly8gTmV3IEJNVyBpbWFnZSBmb3IgTmF2YmFyIGFuZCBIZXJvIHNlY3Rpb24NCg==",Tk=["New York","Los Angeles","Houston","Chicago"],ie={logo:JT,gmail_logo:XT,facebook_logo:ZT,instagram_logo:ek,twitter_logo:tk,menu_icon:nk,search_icon:rk,close_icon:sk,users_icon:ik,edit_icon:gk,car_icon:ak,location_icon:ok,fuel_icon:lk,addIcon:Tw,carIcon:kw,carIconColored:Sw,dashboardIcon:Aw,addIconColored:Pw,listIcon:Xm,listIconColored:Zm,cautionIconColored:uk,calendar_icon_colored:yk,arrow_icon:dk,star_icon:hk,check_icon:mk,tick_icon:fk,delete_icon:pk,testimonial_image_1:xk,testimonial_image_2:vk,main_car:wk,banner_car_image:bk,car_image1:Rw,upload_icon:Nk,user_profile:_k,bmw_new:Ik},kk=[{name:"Dashboard",path:"/owner",icon:Aw,coloredIcon:ck},{name:"Add car",path:"/owner/add-car",icon:Tw,coloredIcon:Pw},{name:"Manage Cars",path:"/owner/manage-cars",icon:kw,coloredIcon:Sw},{name:"Manage Bookings",path:"/owner/manage-bookings",icon:Xm,coloredIcon:Zm},{name:"Revenue",path:"/owner/revenue",icon:Xm,coloredIcon:Zm}],op=[{_id:"67ff5bc069c03d4e45f30b77",owner:"67fe3467ed8a8fe17d0ba6e2",brand:"BMW",model:"X5",image:Rw,year:2006,category:"SUV",seating_capacity:4,fuel_type:"Hybrid",transmission:"Semi-Automatic",pricePerDay:300,location:"New York",description:"The BMW X5 is a mid-size luxury SUV produced by BMW. The X5 made its debut in 1999 as the first SUV ever produced by BMW.",isAvailable:!0,createdAt:"2025-04-16T07:26:56.215Z"},{_id:"67ff6b758f1b3684286a2a65",owner:"67fe3467ed8a8fe17d0ba6e2",brand:"Toyota",model:"Corolla",image:jk,year:2021,category:"Sedan",seating_capacity:4,fuel_type:"Diesel",transmission:"Manual",pricePerDay:130,location:"Chicago",description:"The Toyota Corolla is a mid-size luxury sedan produced by Toyota. The Corolla made its debut in 2008 as the first sedan ever produced by Toyota.",isAvailable:!0,createdAt:"2025-04-16T08:33:57.993Z"},{_id:"67ff6b9f8f1b3684286a2a68",owner:"67fe3467ed8a8fe17d0ba6e2",brand:"Jeep ",model:"Wrangler",image:Ek,year:2023,category:"SUV",seating_capacity:4,fuel_type:"Hybrid",transmission:"Automatic",pricePerDay:200,location:"Los Angeles",description:"The Jeep Wrangler is a mid-size luxury SUV produced by Jeep. The Wrangler made its debut in 2003 as the first SUV ever produced by Jeep.",isAvailable:!0,createdAt:"2025-04-16T08:34:39.592Z"},{_id:"68009c93a3f5fc6338ea7e34",owner:"67fe3467ed8a8fe17d0ba6e2",brand:"Ford",model:"Neo 6",image:Ck,year:2022,category:"Sedan",seating_capacity:2,fuel_type:"Diesel",transmission:"Semi-Automatic",pricePerDay:209,location:"Houston",description:"This is a mid-size luxury sedan produced by Toyota. The Corolla made its debut in 2008 as the first sedan ever produced by Toyota.",isAvailable:!0,createdAt:"2025-04-17T06:15:47.318Z"}],Sk=()=>{const n=en(),e=ut(),{user:t,logout:i,isAuthenticated:o}=Qt(),[c,d]=V.useState(!1),m=n.pathname==="/",p=n.pathname,g=m?"text-white":"text-gray-900",v=m?"hover:text-yellow-200":"hover:text-blue-600",_=m?"hover:bg-white/10":"hover:bg-gray-100",b=()=>{i(),e(t?.role==="owner"?"/owner-login":"/client-login"),d(!1)};return s.jsxs("div",{className:`flex items-center justify-between px-6 md:px-16 lg:px-24
    xl:px-32 py-4 border-b border-transparent shadow-lg relative transition-all
    ${m?"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-400":"bg-white"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(_e,{to:"/",children:s.jsx("img",{src:ie.logo,alt:"logo",className:"h-8 hover:drop-shadow-2xl transition-all duration-200"})}),s.jsx("img",{src:ie.bmw_new,alt:"",className:"h-10 ml-4 hidden sm:inline drop-shadow-xl hover:drop-shadow-2xl transition-all duration-200"})]}),s.jsxs("div",{className:"hidden sm:flex items-center gap-8 absolute left-1/2 transform -translate-x-1/2",children:[s.jsx(_e,{to:"/",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/"||p==="/home"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Home"}),s.jsx(_e,{to:"/about",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/about"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"About"}),s.jsx(_e,{to:"/contact",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/contact"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Contact"}),o()&&t?.role==="customer"&&s.jsxs(s.Fragment,{children:[s.jsx(_e,{to:"/cars",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/cars"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Cars"}),s.jsx(_e,{to:"/my-bookings",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/my-bookings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"My Bookings"}),s.jsx(_e,{to:"/profile",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/profile"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Profile"})]}),o()&&t?.role==="owner"&&s.jsxs(s.Fragment,{children:[s.jsx(_e,{to:"/cars",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/cars"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Cars"}),s.jsx(_e,{to:"/owner/add-car",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/owner/add-car"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Add Car"}),s.jsx(_e,{to:"/owner/manage-cars",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/owner/manage-cars"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Manage Cars"}),s.jsx(_e,{to:"/owner/manage-bookings",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/owner/manage-bookings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Manage Bookings"}),s.jsx(_e,{to:"/profile",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/profile"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Profile"}),s.jsx(_e,{to:"/settings",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/settings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Settings"}),s.jsx(_e,{to:"/settings",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/settings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Settings"})]}),!o()&&s.jsxs(s.Fragment,{children:[s.jsx(_e,{to:"/client-login",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/client-login"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Client Login"}),s.jsx(_e,{to:"/owner-login",className:`px-4 py-2 rounded-lg font-bold font-[Montserrat] text-sm tracking-wide uppercase transition-all duration-200 ${p==="/owner-login"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Owner Login"})]})]}),s.jsx("div",{className:`sm:hidden max-sm:fixed max-sm:h-screen max-sm:w-full max-sm:top-16 max-sm:border-t border-borderColor right-0 flex flex-col items-center gap-8 max-sm:p-4 transition-all duration-300 z-50 ${m?"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-400/80 backdrop-blur-md bg-opacity-80":"bg-white/80 backdrop-blur-md"} ${c?"max-sm:translate-x-0":"max-sm:translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-8 w-full",children:[s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(_e,{to:"/",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/"||p==="/home"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Home"}),s.jsx(_e,{to:"/about",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/about"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"About"}),s.jsx(_e,{to:"/contact",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/contact"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Contact"}),o()&&t?.role==="customer"&&s.jsxs(s.Fragment,{children:[s.jsx(_e,{to:"/cars",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/cars"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Cars"}),s.jsx(_e,{to:"/my-bookings",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/my-bookings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"My Bookings"}),s.jsx(_e,{to:"/profile",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/profile"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Profile"}),s.jsx(_e,{to:"/settings",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/settings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Settings"}),s.jsx(_e,{to:"/settings",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/settings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Settings"})]}),o()&&t?.role==="owner"&&s.jsxs(s.Fragment,{children:[s.jsx(_e,{to:"/cars",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/cars"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Cars"}),s.jsx(_e,{to:"/owner/add-car",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/owner/add-car"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Add Car"}),s.jsx(_e,{to:"/owner/manage-cars",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/owner/manage-cars"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Manage Cars"}),s.jsx(_e,{to:"/owner/manage-bookings",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/owner/manage-bookings"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Manage Bookings"}),s.jsx(_e,{to:"/profile",onClick:()=>d(!1),className:`px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 ${p==="/profile"?`${g} ${v} ${_} border-2 border-blue-500 bg-blue-50 shadow-lg`:`${g} ${v} ${_}`}`,children:"Profile"})]}),!o()&&s.jsxs(s.Fragment,{children:[s.jsx(_e,{to:"/client-login",onClick:()=>d(!1),className:"px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 bg-yellow-400 hover:bg-yellow-500 text-gray-900 shadow-md border-2 border-yellow-500",children:"Client Login"}),s.jsx(_e,{to:"/owner-login",onClick:()=>d(!1),className:"px-6 py-2 rounded-lg font-bold font-[Montserrat] text-lg text-center tracking-wide uppercase transition-all duration-200 bg-green-400 hover:bg-green-500 text-gray-900 shadow-md border-2 border-green-500 mt-4",children:"Owner Login"})]})]}),o()&&s.jsxs("div",{className:"mt-8 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-lg font-bold",children:t?.name?.charAt(0)?.toUpperCase()||"U"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-white font-semibold",children:t?.name}),s.jsx("div",{className:"text-gray-300 text-sm capitalize",children:t?.role})]})]}),s.jsx("button",{onClick:b,className:"px-6 py-2 bg-white text-blue-600 font-semibold rounded-lg hover:bg-blue-50 transition-colors",children:"Logout"})]})]})}),s.jsx("button",{className:"sm:hidden cursor-pointer","aria-label":"Menu",onClick:()=>d(!c),children:s.jsx("img",{src:c?ie.close_icon:ie.menu_icon,alt:"menu"})})]})},Bi={async getAllCars(){try{const n=Er(ct,"cars"),e=Ya(n,Ja("availability","==",!0),Xa("createdAt","desc")),t=await Za(e),i=[];return t.forEach(o=>{i.push({id:o.id,...o.data()})}),i}catch(n){throw console.error("❌ Error fetching cars:",n),n}},async getCarById(n){try{const e=await _d(bn(ct,"cars",n));if(e.exists())return{id:e.id,...e.data()};throw new Error("Car not found")}catch(e){throw console.error("❌ Error fetching car:",e),e}},async getOwnerCars(n){try{const e=Er(ct,"cars"),t=Ya(e,Ja("ownerId","==",n),Xa("createdAt","desc")),i=await Za(t),o=[];return i.forEach(c=>{o.push({id:c.id,...c.data()})}),o}catch(e){throw console.error("❌ Error fetching owner cars:",e),e}},async addCar(n,e){try{const t={name:n.name,brand:n.brand,model:n.model,description:n.description,pricePerDay:n.pricePerDay,availability:!0,imageURL:n.imageURL,ownerId:e,category:n.category,year:n.year,seatingCapacity:n.seatingCapacity,fuelType:n.fuelType,transmission:n.transmission,location:n.location,createdAt:Pe.now(),updatedAt:Pe.now()};return{id:(await Nd(Er(ct,"cars"),t)).id,...t}}catch(t){throw console.error("❌ Error adding car:",t),t}},async updateCar(n,e){try{const t=bn(ct,"cars",n);return await ep(t,{...e,updatedAt:Pe.now()}),{id:n,...e}}catch(t){throw console.error("❌ Error updating car:",t),t}},async deleteCar(n){try{return await EI(bn(ct,"cars",n)),!0}catch(e){throw console.error("❌ Error deleting car:",e),e}}},Zn={async getUserBookings(n){try{const e=Er(ct,"bookings"),t=Ya(e,Ja("clientId","==",n),Xa("createdAt","desc")),i=await Za(t),o=[];return i.forEach(c=>{const d=c.data();o.push({id:c.id,...d,pickupDate:d.pickupDate?.toDate?.()||d.pickupDate,returnDate:d.returnDate?.toDate?.()||d.returnDate,createdAt:d.createdAt?.toDate?.()||d.createdAt})}),o}catch(e){throw console.error("❌ Error fetching user bookings:",e),e}},async getAllBookings(){try{const n=Ya(Er(ct,"bookings"),Xa("createdAt","desc")),e=await Za(n),t=[];return e.forEach(i=>{const o=i.data();t.push({id:i.id,...o,pickupDate:o.pickupDate?.toDate?.()||o.pickupDate,returnDate:o.returnDate?.toDate?.()||o.returnDate,createdAt:o.createdAt?.toDate?.()||o.createdAt})}),t}catch(n){throw console.error("❌ Error fetching bookings:",n),n}},async createBooking(n,e){try{const t=await Bi.getCarById(n.carId),i=new Date(n.pickupDate),o=new Date(n.returnDate),d=Math.ceil((o-i)/(1e3*60*60*24))*t.pricePerDay,m={clientId:e,carId:n.carId,pickupDate:Pe.fromDate(i),returnDate:Pe.fromDate(o),totalPrice:d,status:"pending",createdAt:Pe.now(),updatedAt:Pe.now()};return{id:(await Nd(Er(ct,"bookings"),m)).id,...m,pickupDate:i,returnDate:o,createdAt:new Date}}catch(t){throw console.error("❌ Error creating booking:",t),t}},async updateBookingStatus(n,e,t=null){try{const i=bn(ct,"bookings",n),o={status:e,updatedAt:Pe.now()};if(e==="confirmed"&&(o.acceptedAt=Pe.now()),await ep(i,o),e==="confirmed"&&t)try{const c=await _d(i);if(c.exists()){const d={id:c.id,...c.data()};await Yu.createRevenueRecord(d,t),console.log("💰 Revenue record created for accepted booking")}}catch(c){console.error("❌ Error creating revenue record:",c)}return!0}catch(i){throw console.error("❌ Error updating booking status:",i),i}}},Ak={async getCarReviews(n){try{const e=Er(ct,"reviews"),t=Ya(e,Ja("carId","==",n),Ja("isActive","==",!0),Xa("createdAt","desc")),i=await Za(t),o=[];return i.forEach(c=>{const d=c.data();o.push({id:c.id,...d,createdAt:d.createdAt?.toDate?.()||d.createdAt})}),o}catch(e){throw console.error("❌ Error fetching reviews:",e),e}},async addReview(n,e){try{const t={...n,userId:e,isActive:!0,createdAt:Pe.now(),updatedAt:Pe.now()};return{id:(await Nd(Er(ct,"reviews"),t)).id,...t}}catch(t){throw console.error("❌ Error adding review:",t),t}}},Yu={async getOwnerRevenue(n){try{const e=Er(ct,"revenue"),t=Ya(e,Ja("ownerId","==",n),Xa("createdAt","desc")),i=await Za(t),o=[];return i.forEach(c=>{const d=c.data();o.push({id:c.id,...d,createdAt:d.createdAt?.toDate?.()||d.createdAt})}),o}catch(e){throw console.error("❌ Error fetching owner revenue:",e),e}},async createRevenueRecord(n,e){try{const t={ownerId:e,bookingId:n.id,carId:n.carId,clientId:n.clientId,amount:n.totalPrice,description:`Revenue from booking: ${n.carName||"Car rental"}`,createdAt:Pe.now()};return{id:(await Nd(Er(ct,"revenue"),t)).id,...t}}catch(t){throw console.error("❌ Error creating revenue record:",t),t}},async getTotalRevenue(n){try{return(await this.getOwnerRevenue(n)).reduce((t,i)=>t+(i.amount||0),0)}catch(e){throw console.error("❌ Error calculating total revenue:",e),e}}},$i=({size:n="medium",color:e="blue"})=>{const t={small:"w-6 h-6",medium:"w-12 h-12",large:"w-16 h-16"},i={blue:"border-blue-500",green:"border-green-500",purple:"border-purple-500",red:"border-red-500"};return s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:`${t[n]} ${i[e]} border-4 border-t-transparent rounded-full animate-spin`})})},Pk=()=>{const{id:n}=sf(),e=ut(),{isAuthenticated:t}=Qt(),[i,o]=V.useState(null),[c,d]=V.useState([]),[m,p]=V.useState(!0),[g,v]=V.useState(null);return V.useEffect(()=>{n&&(async()=>{try{p(!0),v(null);const b=await Bi.getCarById(n);o(b);const O=await Ak.getCarReviews(n);d(O)}catch(b){console.error("Error fetching car details:",b),v(b.message||"Failed to load car details")}finally{p(!1)}})()},[n]),m?s.jsx($i,{}):g?s.jsx("div",{className:"px-6 md:px-16 lg:px-24 xl:px-32 mt-16 text-center",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 max-w-md mx-auto",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Error Loading Car"}),s.jsx("p",{className:"text-gray-600 mb-6",children:g}),s.jsx("button",{onClick:()=>e("/cars"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Browse All Cars"})]})}):i?s.jsx("div",{className:"px-6 md:px-16 lg:px-24 xl:px-32 mt-16",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("div",{className:"flex-1",children:s.jsx("img",{src:i.images?.[0]||i.imageURL||i.image||ie.car_image1,alt:`${i.brand||i.name} ${i.model}`,className:"w-full h-96 object-cover rounded-lg"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-4",children:[i.brand||i.name," ",i.model," (",i.year,")"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Category"}),s.jsx("p",{className:"font-semibold",children:i.category})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Seating Capacity"}),s.jsxs("p",{className:"font-semibold",children:[i.seatingCapacity||i.seating_capacity," seats"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Fuel Type"}),s.jsx("p",{className:"font-semibold",children:i.fuelType||i.fuel_type})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Transmission"}),s.jsx("p",{className:"font-semibold",children:i.transmission})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Price per Day"}),s.jsxs("p",{className:"font-semibold",children:["$",i.pricePerDay]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Location"}),s.jsx("p",{className:"font-semibold",children:i.location})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"Description"}),s.jsx("p",{children:i.description})]}),s.jsx("button",{onClick:()=>{t()?e(`/booking/${i.id}`):e("/client-login",{state:{from:`/booking/${i.id}`,message:"You must sign in before booking a car."},replace:!0})},className:"bg-blue-600 text-white px-8 py-4 rounded-lg hover:bg-blue-700 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:t()?"Book Now":"Sign In to Book"})]})]})}):s.jsx("div",{className:"px-6 md:px-16 lg:px-24 xl:px-32 mt-16 text-center",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 max-w-md mx-auto",children:[s.jsx("div",{className:"text-red-600 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Car Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"The car you're looking for doesn't exist or has been removed."}),s.jsx("button",{onClick:()=>e("/cars"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-semibold",children:"Browse All Cars"})]})})},Rk=()=>{const n=ut(),[e,t]=V.useState(""),[i,o]=V.useState(""),[c,d]=V.useState(""),m=p=>{if(p.preventDefault(),!e||!i||!c){alert("Please fill in all required fields");return}const g=new Date(i),v=new Date(c);if(g<new Date().setHours(0,0,0,0)){alert("Pickup date cannot be in the past");return}if(v<=g){alert("Return date must be after pickup date");return}const b=new URLSearchParams({location:e,pickupDate:i,returnDate:c});n(`/cars?${b.toString()}`),window.scrollTo(0,0)};return s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-8 bg-gradient-to-br from-black via-slate-900 to-black text-center relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-5",children:[s.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-yellow-400 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-gray-300 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 bg-white rounded-full blur-3xl"})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-8 mb-4 text-white/90 text-sm font-medium",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),s.jsx("span",{children:"24/7 Concierge Support"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),s.jsx("span",{children:"Free Cancellation"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20",children:[s.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),s.jsx("span",{children:"Premium Fleet Guarantee"})]})]}),s.jsxs("div",{className:"z-10 max-w-5xl mx-auto px-4",children:[s.jsxs("h1",{className:"text-6xl md:text-8xl font-bold text-white mb-6 animate-fade-in-up hover-scale bg-gradient-to-r from-white via-yellow-200 to-white bg-clip-text text-transparent",children:["Luxury Cars On ",s.jsx("span",{className:"text-yellow-400 animate-pulse-slow drop-shadow-lg",children:"Rent"})]}),s.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-12 animate-fade-in-up animation-delay-200 transition-smooth font-light tracking-wide",children:"Experience unparalleled freedom with City Drive's exclusive collection of premium and luxury vehicles"})]}),s.jsx("form",{onSubmit:m,className:"flex flex-col md:flex-row items-center justify-center p-6 md:p-8 rounded-2xl md:rounded-full w-full max-w-5xl bg-white/95 shadow-2xl mx-auto border border-white/20 backdrop-blur-lg animate-fade-in-up animation-delay-400",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-6 w-full",children:[s.jsxs("div",{className:"flex flex-col items-start gap-2 flex-1 min-w-0",children:[s.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"📍"}),"Pickup Location"]}),s.jsxs("select",{required:!0,value:e,onChange:p=>t(p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all bg-white",children:[s.jsx("option",{value:"",children:"Select Location"}),Tk.map(p=>s.jsx("option",{value:p,children:p},p))]})]}),s.jsxs("div",{className:"flex flex-col items-start gap-2 flex-1 min-w-0",children:[s.jsxs("label",{htmlFor:"pickup-date",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"📅"}),"Pick-up Date"]}),s.jsx("input",{type:"date",id:"pickup-date",value:i,onChange:p=>o(p.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),s.jsxs("div",{className:"flex flex-col items-start gap-2 flex-1 min-w-0",children:[s.jsxs("label",{htmlFor:"return-date",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"📅"}),"Return Date"]}),s.jsx("input",{type:"date",id:"return-date",value:c,onChange:p=>d(p.target.value),min:i||new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]}),s.jsx("div",{className:"flex justify-center md:justify-end flex-1 md:flex-none",children:s.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-gray-900 rounded-full cursor-pointer shadow-lg hover:shadow-xl transition-all font-bold font-[Montserrat] transform hover:scale-105",children:[s.jsx("span",{className:"text-lg",children:"🔍"}),"Search Cars"]})})]})}),s.jsxs("div",{className:"relative z-10 mt-8",children:[s.jsx("img",{src:ie.main_car,alt:"luxury car",loading:"lazy",className:"max-h-80 md:max-h-96 mx-auto drop-shadow-2xl animate-fade-in-up animation-delay-600"}),s.jsxs("div",{className:"absolute -top-8 -left-8 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl animate-bounce-in animation-delay-800",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"50+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Car Available"})]}),s.jsxs("div",{className:"absolute -top-8 -right-8 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl animate-bounce-in animation-delay-1000",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:"5K+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Happy Customer"})]}),s.jsxs("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl animate-bounce-in animation-delay-1200",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"4.9★"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]}),s.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:s.jsx("div",{className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:s.jsx("div",{className:"w-1 h-3 bg-white/50 rounded-full mt-2 animate-pulse"})})})]})},Dk=()=>{ut();const n=[{icon:ie.car_icon,title:"Premium Fleet",description:"Choose from our extensive collection of luxury and premium vehicles for every occasion."},{icon:ie.location_icon,title:"Flexible Pickup",description:"Convenient pickup and drop-off locations across major cities with home delivery available."},{icon:ie.check_icon,title:"Best Price Guarantee",description:"We offer competitive rates with no hidden fees and the best price guarantee in the industry."},{icon:ie.users_icon,title:"24/7 Support",description:"Round-the-clock customer support to ensure your journey is smooth and worry-free."},{icon:ie.fuel_icon,title:"Full Insurance",description:"Comprehensive insurance coverage for peace of mind during your rental period."},{icon:ie.star_icon,title:"Top Rated Service",description:"Consistently rated 4.9 stars by thousands of satisfied customers worldwide."}];return s.jsx("div",{className:"py-20 px-6 md:px-16 lg:px-24 xl:px-32 bg-gradient-to-br from-gray-50 to-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"text-center mb-16",children:s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:["Why Choose ",s.jsx("span",{className:"text-blue-600",children:"City Drive"}),"?"]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((e,t)=>s.jsxs("div",{className:"group bg-white p-8 rounded-2xl shadow-lg hover-lift border border-gray-100 animate-fade-in-up",style:{animationDelay:`${t*200}ms`},children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-12 transition-all duration-500 animate-bounce-in",children:s.jsx("img",{src:e.icon,alt:e.title,className:"w-8 h-8 filter brightness-0 invert group-hover:animate-pulse"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 group-hover:text-blue-600 transition-colors duration-300",children:e.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed group-hover:text-gray-800 transition-colors duration-300",children:e.description})]},t))})]})})},Lk=()=>{const n=[{step:"01",title:"Choose Your Car",description:"Browse our extensive fleet of luxury vehicles and select the perfect car for your needs.",icon:ie.search_icon},{step:"02",title:"Book Online",description:"Complete your booking in minutes with our secure online reservation system.",icon:ie.check_icon},{step:"03",title:"Pickup & Drive",description:"Pick up your car from our convenient locations or enjoy home delivery service.",icon:ie.car_icon},{step:"04",title:"Enjoy Your Ride",description:"Experience the freedom of the road with our premium vehicles and 24/7 support.",icon:ie.star_icon}];return s.jsx("div",{className:"py-20 px-6 md:px-16 lg:px-24 xl:px-32 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:["How It ",s.jsx("span",{className:"text-blue-600",children:"Works"})]}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Renting a luxury car has never been easier. Follow these simple steps to get started."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:n.map((e,t)=>s.jsxs("div",{className:"text-center group animate-fade-in-up",style:{animationDelay:`${t*300}ms`},children:[s.jsxs("div",{className:"relative mb-8",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-500 animate-bounce-in",children:s.jsx("span",{className:"text-2xl font-bold text-white group-hover:animate-pulse",children:e.step})}),t<n.length-1&&s.jsx("div",{className:"hidden lg:block absolute top-10 left-full w-full h-0.5 bg-gradient-to-r from-blue-500 to-purple-600 transform -translate-y-1/2 animate-shimmer"})]}),s.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:bg-blue-100 group-hover:rotate-12 transition-all duration-500 hover-glow",children:s.jsx("img",{src:e.icon,alt:e.title,className:"w-8 h-8 group-hover:animate-pulse"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 group-hover:text-blue-600 transition-colors duration-300",children:e.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed group-hover:text-gray-800 transition-colors duration-300",children:e.description})]},t))})]})})},Vk=()=>{const n=ut();return s.jsx("div",{className:"py-16 px-6 md:px-16 lg:px-24 xl:px-32 bg-gradient-to-r from-blue-600 to-purple-600",children:s.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Experience the Difference?"}),s.jsx("p",{className:"text-xl text-white/90 mb-8 max-w-2xl mx-auto",children:"Start your booking journey today and discover why thousands of customers choose City Drive for their luxury car rental needs."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[s.jsxs("button",{onClick:()=>{n("/cars"),window.scrollTo(0,0)},className:"bg-white text-blue-600 px-8 py-4 rounded-full font-bold hover:bg-gray-100 transition-all shadow-lg hover:shadow-xl transform hover:scale-105 cursor-pointer flex items-center gap-3",children:[s.jsx("img",{src:ie.car_icon,alt:"",className:"w-6 h-6"}),"Start Your Booking"]}),s.jsx("button",{onClick:()=>{n("/my-bookings"),window.scrollTo(0,0)},className:"border-2 border-white text-white px-8 py-4 rounded-full font-bold hover:bg-white hover:text-blue-600 transition-all cursor-pointer",children:"View My Bookings"})]}),s.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-6 text-white/80",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),s.jsx("span",{children:"Free Cancellation"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),s.jsx("span",{children:"24/7 Support"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),s.jsx("span",{children:"Best Price Guarantee"})]})]})]})})},Dw=({title:n,subTitle:e,align:t})=>s.jsxs("div",{className:`flex flex-col justify-center items-center text-center ${t==="left"&&" md:items-start md:text-left"}`,children:[s.jsx("h1",{className:"font-semibold text-4xl md:text-[40px]",children:n}),s.jsx("p",{className:"text-sm md:text-base text-gray-500/90 mt-2 max-w-156",children:e})]}),Mk="/api/server",Lw=()=>localStorage.getItem("authToken"),ks=async(n,e={})=>{const t=`${Mk}/api${n}`,i=Lw(),o={headers:{"Content-Type":"application/json",...e.headers},...e};i&&(o.headers.Authorization=`Bearer ${i}`);try{const c=await fetch(t,o),d=await c.json();if(!c.ok)throw new Error(d.error||`HTTP error! status: ${c.status}`);return d}catch(c){throw console.error("API request failed:",c),c}},Ok={getAll:(n={})=>{const e=new URLSearchParams(n).toString();return ks(`/cars?${e}`)},getById:n=>ks(`/cars/${n}`),create:n=>ks("/cars",{method:"POST",body:JSON.stringify(n)}),update:(n,e)=>ks(`/cars/${n}`,{method:"PUT",body:JSON.stringify(e)}),delete:n=>ks(`/cars/${n}`,{method:"DELETE"}),getOwnerCars:()=>ks("/owner/cars")},Fk={subscribe:n=>ks("/newsletter/subscribe",{method:"POST",body:JSON.stringify(n)}),unsubscribe:n=>ks("/newsletter/unsubscribe",{method:"POST",body:JSON.stringify(n)})},Uk=({car:n,showOwnerControls:e=!0})=>{const[t,i]=V.useState(!1),[o,c]=V.useState(n.isAvailable),[d,m]=V.useState(null),p="$",g=ut(),v=Lw();return s.jsxs(s.Fragment,{children:[s.jsxs("div",{onClick:()=>{g(`/car-details/${n._id}`),window.scrollTo(0,0)},className:"group rounded-xl overflow-hidden shadow-lg hover-lift cursor-pointer transition-smooth",children:[s.jsxs("div",{className:"relative w-full h-60",children:[s.jsx("img",{src:n.image,alt:`${n.brand} ${n.model} car`,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),o&&s.jsx("p",{className:"absolute top-4 left-4 bg-primary/90 text-white text-xs px-2.5 py-1 rounded-full",children:"Available Now"}),s.jsx("div",{className:"absolute bottom-4 right-4 bg-black/80 backdrop-blur-sm text-white px-3 py-2 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-white/80",children:"Daily Rate"}),s.jsxs("span",{className:"font-semibold text-lg",children:[p,n.pricePerDay]}),s.jsx("span",{className:"text-sm text-white/80",children:" / day"})]})})]}),s.jsxs("div",{className:"p-4 sm:p-5",children:[s.jsx("div",{className:"flex justify-between items-start mb-2",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium",children:[n.brand," ",n.model]}),s.jsxs("p",{className:"text-muted-foreground text-sm",children:[n.category," • ",n.year]})]})}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-y-2 text-gray-600",children:[s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s.jsx("img",{src:ie.users_icon,alt:"",className:"h-4 mr-2","aria-hidden":"true"}),s.jsxs("span",{children:[n.seating_capacity," Seats"]})]}),s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s.jsx("img",{src:ie.fuel_icon,alt:"",className:"h-4 mr-2","aria-hidden":"true"}),s.jsx("span",{children:n.fuel_type})]}),s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s.jsx("img",{src:ie.car_icon,alt:"",className:"h-4 mr-2","aria-hidden":"true"}),s.jsx("span",{children:n.transmission})]}),s.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[s.jsx("img",{src:ie.location_icon,alt:"",className:"h-4 mr-2","aria-hidden":"true"}),s.jsx("span",{children:n.location})]})]}),s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:ie.tick_icon,alt:"Security deposit icon",className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Security Deposit"})]}),s.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[p,Math.min(n.pricePerDay*.5,500)]})]}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Fully refundable upon return"})]})]})]}),d&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:d}),v&&e&&s.jsx("button",{onClick:async _=>{if(_.stopPropagation(),!t){i(!0),m(null);try{await Ok.update(n._id,{isAvailable:!o}),c(!o)}catch{m("Failed to toggle availability. Please try again.")}finally{i(!1)}}},disabled:t,className:`w-full mt-3 py-2 rounded-lg font-medium transition-colors ${o?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Toggling...":o?"Hide Car":"Show Car"})]})},Bk=()=>{const n=ut();return s.jsxs("div",{className:"flex flex-col items-center py-24 px-6 md:px-16 lg:px-24 xl:px-32 bg-gradient-to-br from-gray-50 via-white to-gray-50",children:[s.jsx("div",{className:"text-center mb-16",children:s.jsx(Dw,{title:"Featured Vehicles",subTitle:"Explore our selection of premium vehicles available for your next adventure."})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:(()=>{const e=JSON.parse(localStorage.getItem("addedCars")||"[]"),t=JSON.parse(localStorage.getItem("dummyCarVisibility")||"{}"),i=JSON.parse(localStorage.getItem("deletedDummyCars")||"[]");return[...op.filter(m=>!i.includes(m._id)).map(m=>({...m,isVisible:t[m._id]!==!1})),...e].filter(m=>m.isVisible!==!1).slice(0,6).map((m,p)=>s.jsx("div",{className:"animate-fade-in-up hover-lift",style:{animationDelay:`${p*150}ms`},children:s.jsx(Uk,{car:m,showOwnerControls:!1})},m._id))})()}),s.jsx("div",{className:"text-center",children:s.jsxs("button",{onClick:()=>{n("/cars"),window.scrollTo(0,0)},className:"group flex items-center justify-center gap-3 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full hover:shadow-2xl transition-all duration-300 transform hover:scale-105 font-semibold",children:["Explore all cars",s.jsx("img",{src:ie.arrow_icon,alt:"arrow",className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300"})]})})]})},$k=()=>s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center items-center justify-between px-8 md:px-14 py-12 bg-gradient-to-r from-slate-800 via-blue-900 to-indigo-900 max-w-7xl mx-3 md:mx-auto rounded-3xl overflow-hidden shadow-2xl relative animate-fade-in-up hover-glow",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-10 right-10 w-20 h-20 bg-white rounded-full blur-xl"}),s.jsx("div",{className:"absolute bottom-10 left-10 w-16 h-16 bg-blue-400 rounded-full blur-xl"})]}),s.jsxs("div",{className:"text-white z-10 md:w-1/2",children:[s.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Do You Own a Luxury Car?"}),s.jsx("p",{className:"text-xl mb-4",children:"Monetize your vehicle effortlessly by listing it on City Drive."}),s.jsx("p",{className:"text-lg opacity-90 mb-8 max-w-lg",children:"We take care of insurance, driver verification and secure payments - so you can earn passive income, stress-free."}),s.jsx("button",{className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 transition-all text-gray-900 rounded-full text-lg font-bold shadow-lg hover:shadow-xl transform hover:scale-105",children:"List your car"})]}),s.jsx("div",{className:"z-10 md:w-1/2 mt-8 md:mt-0",children:s.jsx("img",{src:ie.banner_car_image,alt:"luxury car",className:"max-h-64 md:max-h-80 mx-auto drop-shadow-2xl transform hover:scale-105 transition-transform duration-500"})})]}),zk=()=>{const n=[{name:"Emma Rodriguez",location:"Barcelona, Spain",image:ie.testimonial_image_1,testimonial:"I've rented cars from various companies, but the experience with City Drive was exceptional. The luxury vehicles are immaculate, and the concierge service made my entire trip seamless.",rating:5,carRented:"Mercedes-Benz S-Class"},{name:"John Smith",location:"New York, USA",image:ie.testimonial_image_2,testimonial:"City Drive made my business trip unforgettable. The Tesla Model S was perfect for my needs, and the 24/7 support team was always available. Truly premium service.",rating:5,carRented:"Tesla Model S"},{name:"Ava Johnson",location:"Sydney, Australia",image:ie.testimonial_image_1,testimonial:"I highly recommend City Drive! Their fleet of luxury vehicles is unmatched, and I always feel like I'm getting the best deal with world-class service. The BMW X5 was a dream to drive.",rating:5,carRented:"BMW X5"},{name:"Marcus Chen",location:"Singapore",image:ie.testimonial_image_2,testimonial:"As a frequent traveler, I've tried many rental services. City Drive stands out with their premium fleet and exceptional customer care. The Audi A8 exceeded all expectations.",rating:5,carRented:"Audi A8"},{name:"Sophia Williams",location:"London, UK",image:ie.testimonial_image_1,testimonial:"The attention to detail at City Drive is remarkable. From the moment I booked until I returned the vehicle, every interaction was flawless. The Range Rover was perfect for my countryside tour.",rating:5,carRented:"Range Rover Sport"},{name:"David Kim",location:"Seoul, South Korea",image:ie.testimonial_image_2,testimonial:"City Drive's luxury fleet and professional service made my vacation extraordinary. The Porsche 911 was a thrill to drive, and the pickup process was incredibly smooth.",rating:5,carRented:"Porsche 911"}];return s.jsxs("div",{className:"py-28 px-6 md:px-16 lg:px-24 xl:px-44 bg-gradient-to-br from-gray-50 via-white to-gray-50",children:[s.jsx("div",{className:"text-center mb-16",children:s.jsx(Dw,{title:"What Our Customers Say",subTitle:"Discover why discerning travelers choose City Drive for their luxury vehicle experiences around the world."})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((e,t)=>s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 border border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{className:"w-16 h-16 rounded-full border-4 border-gold-200",src:e.image,alt:e.name,loading:"lazy"}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl font-bold text-gray-900",children:e.name}),s.jsx("p",{className:"text-gray-600 font-medium",children:e.location}),s.jsx("p",{className:"text-sm text-gold-600 font-semibold",children:e.carRented})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-4",children:[Array(e.rating).fill(0).map((i,o)=>s.jsx("img",{src:ie.star_icon,alt:"star-icon",className:"w-5 h-5"},o)),s.jsxs("span",{className:"ml-2 text-sm text-gray-600 font-medium",children:[e.rating,".0"]})]}),s.jsxs("p",{className:"text-gray-700 leading-relaxed font-light italic",children:['"',e.testimonial,'"']}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsx("span",{children:"Verified Customer"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{children:"Premium Member"})]})]})})]},t))})]})},Hk=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(""),[o,c]=V.useState(""),[d,m]=V.useState(!1),[p,g]=V.useState(""),[v,_]=V.useState(""),b=async O=>{if(O.preventDefault(),!n.trim()){g("Please enter your email address"),_("error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){g("Please enter a valid email address"),_("error");return}m(!0),g("");try{const D=await Fk.subscribe({email:n.trim(),firstName:t.trim(),lastName:o.trim(),preferences:{cars:!0,deals:!0,news:!1,locations:[]}});g("Thank you for subscribing! Check your email for confirmation."),_("success"),e(""),i(""),c("")}catch(D){console.error("Newsletter subscription error:",D),g(D.message||"Failed to subscribe. Please try again."),_("error")}finally{m(!1)}};return s.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-20 px-6 md:px-16 lg:px-24 xl:px-32 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 text-white relative overflow-hidden animate-fade-in-up",children:[s.jsxs("div",{className:"absolute inset-0 opacity-10",children:[s.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-blue-400 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"z-10 max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:"Never Miss a Deal!"}),s.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-12",children:"Subscribe to get the latest offers, new arrivals, and exclusive discounts"}),p&&s.jsx("div",{className:`mb-6 p-4 rounded-lg ${v==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,children:p}),s.jsxs("form",{onSubmit:b,className:"flex flex-col sm:flex-row items-center justify-center max-w-2xl w-full mx-auto gap-4",children:[s.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row gap-2",children:[s.jsx("input",{className:"flex-1 px-6 py-4 rounded-full border-2 border-white/20 bg-white/10 backdrop-blur-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all",type:"text",placeholder:"First name (optional)",value:t,onChange:O=>i(O.target.value)}),s.jsx("input",{className:"flex-1 px-6 py-4 rounded-full border-2 border-white/20 bg-white/10 backdrop-blur-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all",type:"text",placeholder:"Last name (optional)",value:o,onChange:O=>c(O.target.value)})]}),s.jsx("input",{className:"flex-1 px-6 py-4 rounded-full border-2 border-white/20 bg-white/10 backdrop-blur-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all",type:"email",placeholder:"Enter your email address",value:n,onChange:O=>e(O.target.value),required:!0}),s.jsx("button",{type:"submit",disabled:d,className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-gray-900 rounded-full font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?"Subscribing...":"Subscribe Now"})]}),s.jsx("p",{className:"text-sm text-white/60 mt-6",children:"Join 500+ subscribers. Unsubscribe anytime."})]})]})},qk=()=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50",children:[s.jsxs("div",{className:"relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/20 via-transparent to-black/20 z-10"}),s.jsx("div",{className:"animate-fade-in-up",children:s.jsx(Rk,{})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-gold-400 to-transparent"}),s.jsx("div",{className:"animate-fade-in-up animation-delay-300",children:s.jsx(Dk,{})}),s.jsx("div",{className:"animate-fade-in-up animation-delay-600",children:s.jsx(Lk,{})}),s.jsx("div",{className:"animate-fade-in-up animation-delay-900",children:s.jsx(Vk,{})}),s.jsx("div",{className:"animate-fade-in-up animation-delay-1200",children:s.jsx(Bk,{})}),s.jsx("div",{className:"animate-fade-in-up animation-delay-1500",children:s.jsx($k,{})}),s.jsx("div",{className:"animate-fade-in-up animation-delay-1800",children:s.jsx(zk,{})}),s.jsx("div",{className:"animate-fade-in-up animation-delay-2100",children:s.jsx(Hk,{})})]})]}),Wk=()=>{const n=ut(),e=en(),{isAuthenticated:t}=Qt(),[i,o]=V.useState([]),[c,d]=V.useState(!0),[m,p]=V.useState(null),[g,v]=V.useState(""),[_,b]=V.useState(""),[O,k]=V.useState(""),[D,A]=V.useState(""),[q,I]=V.useState(""),[R,K]=V.useState(""),[X,re]=V.useState("createdAt"),[E,C]=V.useState("grid"),[S,M]=V.useState(1),[L,U]=V.useState(1),[P,Ie]=V.useState(0);V.useEffect(()=>{const ce=new URLSearchParams(e.search).get("search");ce&&v(ce)},[e.search]);const Me=async()=>{try{d(!0),p(null);const Q=await Bi.getAllCars();let ce=[...Q];if(q&&R)try{const xe=await Zn.getAllBookings(),Ee=new Date(q),Be=new Date(R);ce=Q.filter($e=>!xe.filter(Tt=>Tt.carId===$e.id&&(Tt.status==="confirmed"||Tt.status==="pending")).some(Tt=>{const rs=new Date(Tt.startDate?.toDate?.()||Tt.startDate),lr=new Date(Tt.endDate?.toDate?.()||Tt.endDate);return Ee<=lr&&Be>=rs}))}catch(xe){console.warn("Could not fetch bookings for availability check:",xe)}let $=[...ce];g&&($=$.filter(xe=>xe.name?.toLowerCase().includes(g.toLowerCase())||xe.model?.toLowerCase().includes(g.toLowerCase())||xe.brand?.toLowerCase().includes(g.toLowerCase())||xe.category?.toLowerCase().includes(g.toLowerCase()))),_&&($=$.filter(xe=>xe.category===_)),O&&($=$.filter(xe=>xe.location===O)),D&&($=$.filter(xe=>{const Ee=xe.pricePerDay;switch(D){case"under-100":return Ee<100;case"100-200":return Ee>=100&&Ee<=200;case"200-300":return Ee>=200&&Ee<=300;case"over-300":return Ee>300;default:return!0}})),$.sort((xe,Ee)=>{switch(X){case"pricePerDay":return xe.pricePerDay-Ee.pricePerDay;case"year":return(Ee.year||0)-(xe.year||0);case"createdAt":default:return new Date(Ee.createdAt)-new Date(xe.createdAt)}});const Z=(S-1)*12,ye=Z+12,Se=$.slice(Z,ye);o(Se),U(Math.ceil($.length/12)),Ie($.length)}catch(Q){console.error("Error fetching cars:",Q),p(Q.message||"Failed to fetch cars")}finally{d(!1)}};V.useEffect(()=>{Me()},[g,_,O,q,R,D,X,S]),V.useEffect(()=>{const Q=()=>{Me()};return window.addEventListener("focus",Q),()=>window.removeEventListener("focus",Q)},[]);const et=[...new Set(i.map(Q=>Q.category))],Re=[...new Set(i.map(Q=>Q.location))],oe=()=>{v(""),b(""),k(""),I(""),K(""),A(""),re("createdAt"),M(1)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Available Cars"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Find your perfect car for any occasion"})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4 mb-4",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx("input",{type:"text",placeholder:"Search by brand, model, or category...",value:g,onChange:Q=>v(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsx("div",{children:s.jsxs("select",{value:_,onChange:Q=>b(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Categories"}),et.map(Q=>s.jsx("option",{value:Q,children:Q},Q))]})}),s.jsx("div",{children:s.jsxs("select",{value:O,onChange:Q=>k(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Locations"}),Re.map(Q=>s.jsx("option",{value:Q,children:Q},Q))]})}),s.jsx("div",{children:s.jsx("input",{type:"date",value:q,onChange:Q=>I(Q.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Pickup Date"})}),s.jsx("div",{children:s.jsx("input",{type:"date",value:R,onChange:Q=>K(Q.target.value),min:q||new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Return Date"})}),s.jsx("div",{children:s.jsxs("select",{value:D,onChange:Q=>A(Q.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Prices"}),s.jsx("option",{value:"under-100",children:"Under $100"}),s.jsx("option",{value:"100-200",children:"$100 - $200"}),s.jsx("option",{value:"200-300",children:"$200 - $300"}),s.jsx("option",{value:"over-300",children:"Over $300"})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[P," cars found"]}),(g||_||O||q||R||D)&&s.jsx("button",{onClick:oe,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear filters"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("select",{value:X,onChange:Q=>re(Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"createdAt",children:"Newest First"}),s.jsx("option",{value:"pricePerDay",children:"Price: Low to High"}),s.jsx("option",{value:"pricePerDay",children:"Price: High to Low"}),s.jsx("option",{value:"year",children:"Newest Year"})]}),s.jsxs("div",{className:"flex border border-gray-300 rounded-lg",children:[s.jsx("button",{onClick:()=>C("grid"),className:`px-3 py-2 text-sm ${E==="grid"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Grid"}),s.jsx("button",{onClick:()=>C("list"),className:`px-3 py-2 text-sm ${E==="list"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:"List"})]})]})]})]}),c&&s.jsx($i,{}),m&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("img",{src:ie.cautionIconColored,alt:"Error",className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Error loading cars"}),s.jsx("p",{className:"text-gray-600 mb-4",children:m}),s.jsx("button",{onClick:()=>Me(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]}),!c&&!m&&i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("img",{src:ie.car_icon,alt:"No cars",className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No cars found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or clearing filters."}),s.jsx("button",{onClick:oe,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Clear All Filters"})]}):!c&&!m&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:E==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:i.map(Q=>s.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer ${E==="list"?"flex":""}`,onClick:()=>n(`/car-details/${Q.id}`),children:[s.jsxs("div",{className:`relative ${E==="list"?"w-48 flex-shrink-0":"w-full h-48"}`,children:[s.jsx("img",{src:Q.images?.[0]||Q.image||ie.car_image1,alt:`${Q.name} ${Q.model}`,loading:"lazy",className:`w-full object-cover ${E==="list"?"h-32":"h-full"}`}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium",children:"Available"})}),s.jsxs("div",{className:"absolute bottom-3 right-3 bg-black/80 backdrop-blur-sm text-white px-3 py-2 rounded-lg",children:[s.jsxs("span",{className:"font-semibold",children:["$",Q.pricePerDay]}),s.jsx("span",{className:"text-sm text-white/80",children:" / day"})]})]}),s.jsxs("div",{className:`p-6 ${E==="list"?"flex-1":""}`,children:[s.jsx("div",{className:"flex justify-between items-start mb-3",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:[Q.name," ",Q.model]}),s.jsxs("p",{className:"text-gray-600 text-sm",children:[Q.category," • ",Q.year]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx("img",{src:ie.users_icon,alt:"",className:"h-4 mr-2"}),s.jsxs("span",{children:[Q.seatingCapacity||Q.seating_capacity," Seats"]})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx("img",{src:ie.fuel_icon,alt:"",className:"h-4 mr-2"}),s.jsx("span",{children:Q.fuelType||Q.fuel_type})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx("img",{src:ie.car_icon,alt:"",className:"h-4 mr-2"}),s.jsx("span",{children:Q.transmission})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx("img",{src:ie.location_icon,alt:"",className:"h-4 mr-2"}),s.jsx("span",{children:Q.location})]})]}),s.jsxs("button",{onClick:ce=>{ce.stopPropagation(),t()?n(`/booking/${Q.id}`):n("/login",{state:{from:`/booking/${Q.id}`,message:"You must sign in before booking a car."},replace:!0})},className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium relative group",title:`${Q.name} ${Q.model} - ${Q.category} • ${Q.seatingCapacity||Q.seating_capacity} seats • ${Q.fuelType||Q.fuel_type} • ${Q.transmission} • ${Q.location} • $${Q.pricePerDay}/day`,children:[t()?"Book Now":"Sign In to Book",s.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-semibold",children:[Q.name," ",Q.model]}),s.jsxs("div",{className:"text-xs text-gray-300 mt-1",children:[Q.seatingCapacity||Q.seating_capacity," seats • ",Q.fuelType||Q.fuel_type," • ",Q.year]}),s.jsxs("div",{className:"text-xs text-gray-300",children:[Q.location," • $",Q.pricePerDay,"/day"]})]}),s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})]},Q.id))}),L>1&&s.jsx("div",{className:"flex justify-center mt-8",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>M(Q=>Math.max(Q-1,1)),disabled:S===1,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(L,5)},(Q,ce)=>{const $=ce+1;return s.jsx("button",{onClick:()=>M($),className:`px-3 py-2 border rounded-lg ${S===$?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:$},$)}),s.jsx("button",{onClick:()=>M(Q=>Math.min(Q+1,L)),disabled:S===L,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]})]})]})},Gk=()=>{const n=ut(),{user:e}=Qt(),[t,i]=V.useState(!1),[o,c]=V.useState(null),[d,m]=V.useState([]),[p,g]=V.useState(""),[v,_]=V.useState("newest"),[b,O]=V.useState(null);V.useEffect(()=>{k()},[e]);const k=async()=>{try{i(!0),c(null),console.log("📊 Loading user bookings from Firebase...");const E=await Zn.getUserBookings(e.id);console.log(`✅ Loaded ${E.length} bookings for user ${e?.email||e?.id}`),m(E)}catch(E){console.error("❌ Error loading bookings:",E),c("Failed to load bookings. Please refresh the page or contact support.")}finally{i(!1)}},D=E=>{O(E)},A=()=>{O(null)},q=d.filter(E=>!p||E.status===p).sort((E,C)=>{switch(v){case"oldest":return new Date(E.createdAt?.toDate?.()||E.createdAt)-new Date(C.createdAt?.toDate?.()||C.createdAt);case"newest":default:return new Date(C.createdAt?.toDate?.()||C.createdAt)-new Date(E.createdAt?.toDate?.()||E.createdAt)}}),I=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),R=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E),K=E=>{switch(E){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"canceled_by_owner":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},X=E=>{switch(E){case"confirmed":return ie.check_icon;case"pending":return ie.calendar_icon_colored;case"cancelled":return ie.delete_icon;case"canceled_by_owner":return ie.cautionIconColored;default:return ie.car_icon}},re=async E=>{if(window.confirm("Are you sure you want to cancel this booking? This action cannot be undone."))try{console.log(`🗑️ User cancelling booking ${E}`),await Zn.updateBookingStatus(E,"cancelled"),await k(),console.log(`✅ Booking ${E} cancelled successfully`),alert("✅ Booking cancelled successfully!")}catch(C){console.error("❌ Error in cancellation process:",C),alert("❌ Failed to cancel booking. Please try again.")}};return t?s.jsx($i,{}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Bookings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your car rental bookings and reservations"})]}),s.jsx("div",{className:"mb-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:(()=>{const E=d.length,C=d.filter(L=>L.status==="pending").length,S=d.filter(L=>L.status==="confirmed").length,M=d.filter(L=>L.status==="confirmed").reduce((L,U)=>L+(U.totalPrice||U.price||0),0);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:E}),s.jsx("div",{className:"text-gray-600",children:"Total Bookings"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:C}),s.jsx("div",{className:"text-gray-600",children:"Pending Confirmation"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:S}),s.jsx("div",{className:"text-gray-600",children:"Confirmed"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["$",M.toFixed(2)]}),s.jsx("div",{className:"text-gray-600",children:"Total Spent"})]})]})})()}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Status"}),s.jsxs("select",{value:p,onChange:E=>g(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"}),s.jsx("option",{value:"canceled_by_owner",children:"Canceled by Owner"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort by"}),s.jsxs("select",{value:v,onChange:E=>_(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"newest",children:"Newest First"}),s.jsx("option",{value:"oldest",children:"Oldest First"})]})]})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:q.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("img",{src:ie.car_icon,alt:"No bookings",className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bookings found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't made any bookings yet."}),s.jsx("button",{onClick:()=>n("/cars"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Cars"})]}):q.map(E=>s.jsx("div",{onClick:()=>D(E),className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:E.carImage||ie.main_car,alt:E.carName||"Car",loading:"lazy",className:"w-16 h-16 object-cover rounded-lg"}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:E.carName||"Car"}),s.jsx("p",{className:"text-sm text-gray-600",children:E.carModel||""}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-500",children:[I(E.pickupDate)," - ",I(E.returnDate)]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[E.days||Math.ceil((new Date(E.returnDate)-new Date(E.pickupDate))/(1e3*60*60*24))," days"]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${K(E.status)}`,children:[s.jsx("img",{src:X(E.status),alt:E.status,className:"w-4 h-4 mr-2"}),E.status==="canceled_by_owner"?"Canceled by Owner":E.status.charAt(0).toUpperCase()+E.status.slice(1)]}),s.jsx("p",{className:`text-lg font-semibold mt-2 ${E.status==="canceled_by_owner"?"text-gray-500 line-through":"text-gray-900"}`,children:R(E.totalPrice)}),E.status==="canceled_by_owner"&&E.refundAmount&&s.jsxs("p",{className:"text-sm text-green-600 font-medium mt-1",children:["Refunded: ",R(E.refundAmount)]}),E.status!=="cancelled"&&s.jsx("button",{onClick:C=>{C.stopPropagation(),re(E.id)},className:"mt-2 px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors",children:"Cancel Booking"})]})]})},E.id))})]}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Details"}),s.jsx("button",{onClick:A,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("img",{src:ie.close_icon,alt:"Close",className:"w-6 h-6"})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Car Information"}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("img",{src:b.car?.image||ie.main_car,alt:b.car?.name||"Car",loading:"lazy",className:"w-32 h-32 object-cover rounded-lg shadow-md"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:[b.car?.brand," ",b.car?.model]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Category:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.car?.category})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Year:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.car?.year})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Fuel Type:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.car?.fuel_type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Transmission:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.car?.transmission})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Seating:"}),s.jsxs("span",{className:"ml-2 text-gray-600",children:[b.car?.seating_capacity," seats"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Daily Rate:"}),s.jsx("span",{className:"ml-2 text-blue-600 font-semibold",children:R(b.car?.pricePerDay)})]})]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Booking ID:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.id})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Pickup Date:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:I(b.startDate)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Return Date:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:I(b.endDate)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Duration:"}),s.jsxs("span",{className:"ml-2 text-gray-600",children:[b.days," days"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Pickup Location:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.location})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Insurance:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:b.insurance?"Included":"Not Included"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Total Amount:"}),s.jsx("span",{className:"ml-2 text-blue-600 font-bold text-lg",children:R(b.totalPrice)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),s.jsxs("span",{className:`ml-2 px-3 py-1 rounded-full text-sm font-medium border ${K(b.status)}`,children:[s.jsx("img",{src:X(b.status),alt:b.status,className:"w-4 h-4 mr-2 inline"}),b.status==="canceled_by_owner"?"Canceled by Owner":b.status.charAt(0).toUpperCase()+b.status.slice(1)]})]})]})]})]}),b.status==="pending"&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl",children:"⏳"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Awaiting Owner Confirmation"}),s.jsx("p",{className:"text-yellow-700 mb-3",children:"This booking request has been submitted and is currently pending approval from the car owner. The owner will review your booking details and confirm availability."}),s.jsxs("div",{className:"text-sm text-yellow-600 space-y-1",children:[s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Expected Response:"})," Within 24 hours"]}),s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Booking Date:"})," ",new Date(b.createdAt).toLocaleDateString()]})]})]})]})}),b.status==="confirmed"&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl",children:"✅"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-green-800 mb-2",children:"Booking Confirmed!"}),s.jsx("p",{className:"text-green-700 mb-3",children:"Great news! Your booking has been confirmed by the car owner. You can now proceed with your rental as planned."}),s.jsxs("div",{className:"text-sm text-green-600 space-y-1",children:[s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Confirmation Date:"})," ",new Date(b.updatedAt||b.createdAt).toLocaleDateString()]}),s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Next Steps:"})," Contact the owner for pickup details"]})]})]})]})}),b.status==="cancelled"&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl",children:"❌"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-red-800 mb-2",children:"Booking Cancelled"}),s.jsx("p",{className:"text-red-700 mb-3",children:"This booking has been cancelled. If you need to make a new booking, feel free to browse our available cars."}),s.jsx("div",{className:"text-sm text-red-600 space-y-1",children:s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Cancellation Date:"})," ",new Date(b.updatedAt||b.createdAt).toLocaleDateString()]})})]})]})}),b.status==="canceled_by_owner"&&s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-2xl",children:"💸"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-orange-800 mb-2",children:"Booking Canceled by Owner"}),s.jsx("p",{className:"text-orange-700 mb-3",children:"This booking was canceled by the car owner. Your payment has been refunded to your original payment method."}),s.jsxs("div",{className:"text-sm text-orange-600 space-y-1",children:[s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Refund Amount:"})," ",R(b.refundAmount||b.price)]}),s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Refund Status:"})," ",b.refundStatus==="processed"?"Processed":"Pending"]}),s.jsxs("p",{children:["• ",s.jsx("span",{className:"font-medium",children:"Cancellation Date:"})," ",new Date(b.canceledAt||b.updatedAt||b.createdAt).toLocaleDateString()]})]}),s.jsx("div",{className:"mt-3 p-3 bg-orange-100 rounded-lg",children:s.jsx("p",{className:"text-sm text-orange-800 font-medium",children:"💡 Need a car? Browse our available vehicles to make a new booking."})})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{onClick:A,className:"px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Close"}),s.jsx("button",{onClick:()=>{A(),n("/cars")},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Book Another Car"})]})]})})})]})})},Kk=()=>{const{id:n}=sf(),e=ut(),{isAuthenticated:t,user:i}=Qt(),[o,c]=V.useState(null),[d,m]=V.useState(!0),[p,g]=V.useState(null),[v,_]=V.useState(!1),[b,O]=V.useState(null),[k,D]=V.useState(1),[A,q]=V.useState(null),[I,R]=V.useState({pickupDate:"",returnDate:"",pickupLocation:"",firstName:"",lastName:"",email:"",countryCode:"+1",phone:"",licenseNumber:"",specialRequests:"",insurance:!1,paymentMethod:"credit_card",paymentType:"full",cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:"",billingAddress:"",billingCity:"",billingState:"",billingZipCode:"",billingCountry:"US",saveCard:!1,termsAccepted:!1});V.useEffect(()=>{if(!t()){e("/client-login");return}},[t,e]),V.useEffect(()=>{n&&K()},[n]);const K=async()=>{try{m(!0);const L=await Bi.getCarById(n);c(L)}catch(L){console.error("Error fetching car:",L),g("Failed to load car details")}finally{m(!1)}},X=L=>{const{name:U,value:P}=L.target;if(U==="cardNumber"){const Ie=P.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim();R(Me=>({...Me,[U]:Ie}));return}if(U==="cvv"){const Ie=P.replace(/\D/g,"");R(Me=>({...Me,[U]:Ie}));return}R(Ie=>({...Ie,[U]:P}))},re=()=>{if(!I.pickupDate||!I.returnDate)return 0;const L=new Date(I.pickupDate),U=new Date(I.returnDate),P=Math.abs(U-L);return Math.ceil(P/(1e3*60*60*24))},E=()=>{const L=re(),U=L*(o?.pricePerDay||0),P=I.insurance?L*15:0,Ie=U+P,Me=Ie*.08,et=Math.min(o?.pricePerDay*.5,500);return Math.round((Ie+Me+et)*100)/100},C=L=>{L.preventDefault();const P=["firstName","lastName","email","phone","pickupDate","returnDate","pickupLocation"].filter(Z=>!I[Z]);if(P.length>0){alert(`Please fill in all required fields: ${P.join(", ")}`);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)){alert("Please enter a valid email address");return}const Me=I.phone.replace(/[\s\-\(\)]/g,"");if(!/^[+]?[1-9][\d]{0,15}$/.test(Me)||Me.length<7){alert("Please enter a valid phone number");return}const Re=new Date(I.pickupDate),oe=new Date(I.returnDate),Q=new Date;if(Q.setDate(Q.getDate()+1),Q.setHours(0,0,0,0),Re<Q){alert("Pickup date must be at least 24 hours from now to allow time for owner confirmation");return}if(oe<=Re){alert("Return date must be after pickup date");return}const ce=Math.ceil(Math.abs(oe-Re)/(1e3*60*60*24));if(ce<1||ce>30){alert("Rental period must be between 1 and 30 days");return}const $={car:{_id:o?._id,brand:o?.brand,model:o?.model,name:o?.name||`${o?.brand} ${o?.model}`,image:o?.images?.[0]||o?.image||ie.main_car,pricePerDay:o?.pricePerDay,location:o?.location,category:o?.category,year:o?.year},customerInfo:{firstName:I.firstName,lastName:I.lastName,email:I.email,phone:I.countryCode+I.phone.replace(/[\s\-()]/g,""),licenseNumber:I.licenseNumber},pickupDate:I.pickupDate,returnDate:I.returnDate,pickupLocation:I.pickupLocation,returnLocation:I.pickupLocation,days:re(),insurance:I.insurance,specialRequests:I.specialRequests,totalPrice:E(),basePrice:re()*(o?.pricePerDay||0),insuranceCost:I.insurance?re()*15:0,tax:(re()*(o?.pricePerDay||0)+(I.insurance?re()*15:0))*.08,deposit:Math.min(o?.pricePerDay*.5,500)};q($),D(2)},S=async L=>{if(L.preventDefault(),!A){alert("Booking summary not found. Please go back and try again.");return}if(I.paymentMethod==="credit_card"){const Me=["cardNumber","expiryMonth","expiryYear","cvv","cardholderName"].filter(Re=>!I[Re]);if(Me.length>0){alert(`Please fill in all payment fields: ${Me.join(", ")}`);return}const et=I.cardNumber.replace(/\s/g,"");if(et.length<13||et.length>19){alert("Please enter a valid card number");return}}const U=I.paymentType==="deposit"?A.deposit:A.totalPrice,P=I.paymentType==="deposit"?"deposit_paid":"paid";try{console.log("💳 Processing payment and saving booking...");const Ie={carId:A.car._id||A.car.id,pickupDate:A.pickupDate,returnDate:A.returnDate,pickupLocation:A.pickupLocation,returnLocation:A.returnLocation,days:A.days,insurance:A.insurance,specialRequests:A.specialRequests,totalPrice:A.totalPrice,paymentMethod:Ie.paymentMethod,paymentType:Ie.paymentType,paymentAmount:U,paymentStatus:P},Me=await Zn.createBooking(Ie,i.id);console.log("✅ Booking with payment saved successfully:",Me.id),O({...Me,car:A.car,customerInfo:A.customerInfo,paymentInfo:{method:Ie.paymentMethod,type:Ie.paymentType,amount:U,cardNumber:Ie.paymentMethod==="credit_card"?"**** **** **** "+Ie.cardNumber.slice(-4):null,paidAt:new Date().toISOString()}}),_(!0)}catch(Ie){console.error("❌ Error in payment process:",Ie),alert("Failed to process payment. Please try again or contact support if the problem persists.")}},M=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L);return d?s.jsx($i,{}):p?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:p}),s.jsx("button",{onClick:()=>e("/cars"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Cars"})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Book Your Car"}),s.jsxs("p",{className:"text-gray-600",children:["Complete your booking for ",o?.name]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${k>=1?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"1"})}),s.jsx("div",{className:`flex-1 h-1 ${k>=2?"bg-blue-600":"bg-gray-300"}`}),s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${k>=2?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:s.jsx("span",{className:"text-sm font-medium",children:"2"})})]}),s.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-600",children:[s.jsx("span",{className:k>=1?"text-blue-600 font-medium":"",children:"Booking Details"}),s.jsx("span",{className:k>=2?"text-blue-600 font-medium":"",children:"Payment"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:o?.images?.[0]||o?.image||ie.main_car,alt:o?.name||`${o?.brand} ${o?.model}`||"Car",className:"w-24 h-24 object-cover rounded-lg shadow-md"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?.name}),s.jsx("p",{className:"text-gray-600",children:o?.model}),s.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:[M(o?.pricePerDay),"/day"]})]})]})}),k===1&&s.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx("span",{className:"mr-2",children:"📅"}),"Pickup Date *"]}),s.jsx("input",{type:"date",name:"pickupDate",value:I.pickupDate,onChange:X,min:(()=>{const L=new Date;return L.setDate(L.getDate()+1),L.toISOString().split("T")[0]})(),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx("span",{className:"mr-2",children:"📅"}),"Return Date *"]}),s.jsx("input",{type:"date",name:"returnDate",value:I.returnDate,onChange:X,min:I.pickupDate||(()=>{const L=new Date;return L.setDate(L.getDate()+1),L.toISOString().split("T")[0]})(),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx("span",{className:"mr-2",children:"📍"}),"Pickup Location *"]}),s.jsx("input",{type:"text",name:"pickupLocation",value:I.pickupLocation,onChange:X,placeholder:"Enter pickup location",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),s.jsx("input",{type:"text",name:"firstName",value:I.firstName,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),s.jsx("input",{type:"text",name:"lastName",value:I.lastName,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",name:"email",value:I.email,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),s.jsxs("div",{className:"flex",children:[s.jsxs("select",{name:"countryCode",value:I.countryCode,onChange:X,className:"px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"+1",children:"+1"}),s.jsx("option",{value:"+44",children:"+44"}),s.jsx("option",{value:"+91",children:"+91"})]}),s.jsx("input",{type:"tel",name:"phone",value:I.phone,onChange:X,className:"flex-1 px-3 py-2 border-t border-r border-b border-gray-300 rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Driver's License Number"}),s.jsx("input",{type:"text",name:"licenseNumber",value:I.licenseNumber,onChange:X,placeholder:"Enter license number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"insurance",checked:I.insurance,onChange:L=>R(U=>({...U,insurance:L.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Add insurance ($15/day)"})]})}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests"}),s.jsx("textarea",{name:"specialRequests",value:I.specialRequests,onChange:X,rows:3,placeholder:"Any special requests or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"termsAccepted",checked:I.termsAccepted,onChange:L=>R(U=>({...U,termsAccepted:L.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",required:!0}),s.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["I agree to the ",s.jsx("a",{href:"#",className:"text-blue-600 hover:underline",children:"Terms and Conditions"})]})]})}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Booking Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Car Rental (",re()," days):"]}),s.jsx("span",{className:"font-medium",children:M(re()*(o?.pricePerDay||0))})]}),I.insurance&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Insurance (",re()," days):"]}),s.jsx("span",{className:"font-medium",children:M(re()*15)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax (8%):"}),s.jsx("span",{className:"font-medium",children:M((re()*(o?.pricePerDay||0)+(I.insurance?re()*15:0))*.08)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Security Deposit:"}),s.jsx("span",{className:"font-medium",children:M(Math.min(o?.pricePerDay*.5,500))})]}),s.jsx("div",{className:"border-t pt-2 mt-2",children:s.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{children:M(E())})]})})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[s.jsx("button",{type:"button",onClick:()=>e("/cars"),className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!I.termsAccepted,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Continue to Payment"})]})]}),k===2&&A&&s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Car Rental (",A.days," days):"]}),s.jsx("span",{className:"font-medium",children:M(A.basePrice)})]}),A.insurance&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Insurance (",A.days," days):"]}),s.jsx("span",{className:"font-medium",children:M(A.insuranceCost)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax (8%):"}),s.jsx("span",{className:"font-medium",children:M(A.tax)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Security Deposit:"}),s.jsx("span",{className:"font-medium",children:M(A.deposit)})]}),s.jsx("div",{className:"border-t pt-2 mt-2",children:s.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{children:M(A.totalPrice)})]})})]})]}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Options"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"paymentType",value:"full",checked:I.paymentType==="full",onChange:X,className:"text-blue-600 focus:ring-blue-500"}),s.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["Pay Full Amount (",M(A.totalPrice),")"]})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"paymentType",value:"deposit",checked:I.paymentType==="deposit",onChange:X,className:"text-blue-600 focus:ring-blue-500"}),s.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["Pay Security Deposit (",M(A.deposit),") - Balance due at pickup"]})]})]})]}),s.jsxs("div",{className:"border-t pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"credit_card",checked:I.paymentMethod==="credit_card",onChange:X,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"💳 Credit/Debit Card"})]}),s.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"paypal",checked:I.paymentMethod==="paypal",onChange:X,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"🅿️ PayPal"})]}),s.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"stripe",checked:I.paymentMethod==="stripe",onChange:X,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"🔒 Stripe"})]}),s.jsxs("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_transfer",checked:I.paymentMethod==="bank_transfer",onChange:X,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"🏦 Bank Transfer"})]})]})]}),I.paymentMethod==="credit_card"&&s.jsxs("div",{className:"border-t pt-6 space-y-6",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Card Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number *"}),s.jsx("input",{type:"text",name:"cardNumber",value:I.cardNumber,onChange:X,placeholder:"1234 5678 9012 3456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Month *"}),s.jsxs("select",{name:"expiryMonth",value:I.expiryMonth,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Month"}),Array.from({length:12},(L,U)=>s.jsx("option",{value:String(U+1).padStart(2,"0"),children:String(U+1).padStart(2,"0")},U+1))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Year *"}),s.jsxs("select",{name:"expiryYear",value:I.expiryYear,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(L,U)=>s.jsx("option",{value:String(new Date().getFullYear()+U),children:new Date().getFullYear()+U},U))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV *"}),s.jsx("input",{type:"text",name:"cvv",value:I.cvv,onChange:X,placeholder:"123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:4,required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name *"}),s.jsx("input",{type:"text",name:"cardholderName",value:I.cardholderName,onChange:X,placeholder:"John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Billing Address"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),s.jsx("input",{type:"text",name:"billingAddress",value:I.billingAddress,onChange:X,placeholder:"123 Main St",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),s.jsx("input",{type:"text",name:"billingCity",value:I.billingCity,onChange:X,placeholder:"New York",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),s.jsx("input",{type:"text",name:"billingState",value:I.billingState,onChange:X,placeholder:"NY",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code"}),s.jsx("input",{type:"text",name:"billingZipCode",value:I.billingZipCode,onChange:X,placeholder:"10001",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),s.jsxs("select",{name:"billingCountry",value:I.billingCountry,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"US",children:"United States"}),s.jsx("option",{value:"CA",children:"Canada"}),s.jsx("option",{value:"UK",children:"United Kingdom"})]})]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"saveCard",checked:I.saveCard,onChange:L=>R(U=>({...U,saveCard:L.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Save card for future bookings"})]})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Payment Summary"}),s.jsxs("div",{className:"text-lg font-bold text-blue-600",children:["Amount to Pay: ",M(I.paymentType==="deposit"?A.deposit:A.totalPrice)]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.paymentType==="deposit"?`Balance of ${M(A.totalPrice-A.deposit)} due at pickup`:"Full payment processed now"})]})}),s.jsxs("div",{className:"flex justify-between space-x-4 pt-6",children:[s.jsx("button",{type:"button",onClick:()=>D(1),className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"← Back to Details"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/cars"),className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"💳 Complete Payment"})]})]})]})]})]}),v&&b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-2xl",children:"✅"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Booking Submitted Successfully!"}),s.jsx("p",{className:"text-gray-600",children:"Your booking request has been sent to the car owner for approval."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Car Details"}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsx("img",{src:b.car?.images?.[0]||b.car?.image||ie.main_car,alt:b.car?.name||"Car",className:"w-20 h-20 object-cover rounded-lg shadow-md"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xl font-bold text-gray-900",children:[b.car?.brand," ",b.car?.model]}),s.jsxs("p",{className:"text-gray-600",children:[b.car?.category," • ",b.car?.year]}),s.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:[M(b.car?.pricePerDay),"/day"]})]})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pickup Date"}),s.jsx("p",{className:"font-medium",children:new Date(b.pickupDate).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Return Date"}),s.jsx("p",{className:"font-medium",children:new Date(b.returnDate).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Duration"}),s.jsxs("p",{className:"font-medium",children:[b.days," days"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pickup Location"}),s.jsx("p",{className:"font-medium",children:b.pickupLocation})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Insurance"}),s.jsx("p",{className:"font-medium",children:b.insurance?"Included":"Not Included"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),s.jsx("p",{className:"font-bold text-lg text-blue-600",children:M(b.price)})]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Payment Method"}),s.jsx("p",{className:"font-medium capitalize",children:b.paymentInfo?.method?.replace("_"," ")||"Credit Card"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Payment Type"}),s.jsx("p",{className:"font-medium",children:b.paymentStatus==="deposit_paid"?"Security Deposit":"Full Payment"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Amount Paid"}),s.jsx("p",{className:"font-bold text-lg text-green-600",children:M(b.paymentInfo?.amount||b.price)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Payment Status"}),s.jsx("p",{className:"font-medium",children:s.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:b.paymentStatus==="deposit_paid"?"Deposit Paid":"Paid"})})]}),b.paymentInfo?.cardNumber&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Card Used"}),s.jsx("p",{className:"font-medium",children:b.paymentInfo.cardNumber})]}),b.paymentStatus==="deposit_paid"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Balance Due"}),s.jsx("p",{className:"font-medium text-orange-600",children:M(b.price-(b.paymentInfo?.amount||0))})]})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("span",{className:"text-xl",children:"⏳"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Awaiting Owner Confirmation"}),s.jsx("p",{className:"text-yellow-700 mb-3",children:"Your booking request has been submitted and is currently pending approval from the car owner. You will receive a notification once the owner reviews and confirms your booking."}),s.jsxs("div",{className:"text-sm text-yellow-600",children:[s.jsxs("p",{children:["• Booking Status: ",s.jsx("span",{className:"font-medium",children:"Pending Confirmation"})]}),s.jsx("p",{children:"• Expected Response: Within 24 hours"}),s.jsx("p",{children:'• You can check the status in your "My Bookings" section'})]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("button",{onClick:()=>e("/my-bookings"),className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"View My Bookings"}),s.jsx("button",{onClick:()=>e("/cars"),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Book Another Car"}),s.jsx("button",{onClick:()=>e("/"),className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Back to Home"})]})]})})})]})})},Qk=()=>{const n=ut(),e=en(),{login:t,register:i,isAuthenticated:o,user:c,loading:d}=Qt(),[m,p]=V.useState(!1),[g,v]=V.useState({name:"",email:"",password:"",confirmPassword:""}),[_,b]=V.useState(""),[O,k]=V.useState(!1);V.useEffect(()=>{if(!d&&o()&&c){const R=e.state?.from?.pathname||D(c.role);n(R,{replace:!0})}},[o,c,d,n,e]);const D=R=>R==="owner"?"/owner":"/",A=R=>{const{name:K,value:X}=R.target;v(re=>({...re,[K]:X})),b("")},q=async R=>{R.preventDefault(),k(!0),b("");try{if(m){if(g.password!==g.confirmPassword){b("Passwords do not match");return}if(g.password.length<6){b("Password must be at least 6 characters long");return}const K=await i({name:g.name,email:g.email,password:g.password});K.success?n("/home"):b(K.error)}else{const K=await t(g.email,g.password);if(K.success){const X=e.state?.from?.pathname||D(K.user.role);n(X)}else b(K.error)}}catch{b("An unexpected error occurred. Please try again.")}finally{k(!1)}},I=()=>{p(!m),b(""),v({name:"",email:"",password:"",confirmPassword:""})};return d?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ie.logo,alt:"Logo",className:"mx-auto h-12 w-auto"}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:m?"Create your account":"Sign in to your account"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:m?"Join us to start booking amazing cars":"Welcome back! Please sign in to continue"}),e.state?.message&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:e.state.message})})]}),s.jsxs("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl",children:[s.jsxs("form",{className:"space-y-6",onSubmit:q,children:[_&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:_}),m&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:g.name,onChange:A,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:g.email,onChange:A,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:m?"new-password":"current-password",required:!0,value:g.password,onChange:A,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:m?"Create a password":"Enter your password"})]}),m&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:g.confirmPassword,onChange:A,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Confirm your password"})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:O,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:O?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),m?"Creating Account...":"Signing In..."]}):m?"Create Account":"Sign In"})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:I,className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:m?"Already have an account? Sign in":"Don't have an account? Sign up"})})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Test Accounts (for development):"}),s.jsxs("div",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Owner:"})," asadtft456@gmail.com / asadtft654@gmail.com"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Client:"})," client123@example.com / clientpass123"]})]})]}),s.jsx("div",{className:"text-center text-sm text-gray-600",children:s.jsx("p",{children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})})},Yk=()=>{const n=ut(),e=en(),{login:t,register:i,isAuthenticated:o,user:c,loading:d}=Qt(),[m,p]=V.useState(!1),[g,v]=V.useState({name:"",email:"",password:"",confirmPassword:""}),[_,b]=V.useState(""),[O,k]=V.useState(!1);V.useEffect(()=>{if(!d&&o()&&c){const I=e.state?.from?.pathname||"/";n(I,{replace:!0})}},[o,c,d,n,e]);const D=I=>{const{name:R,value:K}=I.target;v(X=>({...X,[R]:K})),b("")},A=async I=>{I.preventDefault(),k(!0),b("");try{if(m){if(g.password!==g.confirmPassword){b("Passwords do not match");return}if(g.password.length<6){b("Password must be at least 6 characters long");return}const R=await i({name:g.name,email:g.email,password:g.password});R.success?n("/"):b(R.error)}else{const R=await t(g.email,g.password);if(R.success){const K=e.state?.from?.pathname||"/";n(K)}else b(R.error)}}catch{b("An unexpected error occurred. Please try again.")}finally{k(!1)}},q=()=>{p(!m),b(""),v({name:"",email:"",password:"",confirmPassword:""})};return d?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ie.logo,alt:"Logo",className:"mx-auto h-12 w-auto"}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:m?"Create your client account":"Sign in as Client"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:m?"Join us to start booking amazing cars":"Welcome back! Please sign in to continue"}),e.state?.message&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:e.state.message})})]}),s.jsxs("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl",children:[s.jsxs("form",{className:"space-y-6",onSubmit:A,children:[_&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:_}),m&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:g.name,onChange:D,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:g.email,onChange:D,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:m?"new-password":"current-password",required:!0,value:g.password,onChange:D,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:m?"Create a password":"Enter your password"})]}),m&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:g.confirmPassword,onChange:D,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Confirm your password"})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:O,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:O?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),m?"Creating Account...":"Signing In..."]}):m?"Create Account":"Sign In"})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{onClick:q,className:"text-sm text-blue-600 hover:text-blue-500 font-medium",children:m?"Already have an account? Sign in":"Don't have an account? Sign up"})})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Demo Account:"}),s.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," client@example.com"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Password:"})," client123"]}),s.jsx("p",{className:"mt-2 text-blue-600",children:"Register a new account or use the demo account to test."})]})]}),s.jsx("div",{className:"text-center text-sm text-gray-600",children:s.jsx("p",{children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})})},Jk=()=>{const n=ut(),e=en(),{login:t,isAuthenticated:i,user:o,loading:c}=Qt(),[d,m]=V.useState({email:"",password:""}),[p,g]=V.useState(""),[v,_]=V.useState(!1);V.useEffect(()=>{if(!c&&i()&&o){const k=e.state?.from?.pathname||"/owner";n(k,{replace:!0})}},[i,o,c,n,e]);const b=k=>{const{name:D,value:A}=k.target;m(q=>({...q,[D]:A})),g("")},O=async k=>{k.preventDefault(),_(!0),g("");try{const D=await t(d.email,d.password);if(D.success){const A=e.state?.from?.pathname||"/owner";n(A)}else g(D.error)}catch{g("An unexpected error occurred. Please try again.")}finally{_(!1)}};return c?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ie.logo,alt:"Logo",className:"mx-auto h-12 w-auto"}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Sign in as Owner"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Welcome back! Please sign in to manage your cars"}),e.state?.message&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:e.state.message})})]}),s.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-2xl",children:s.jsxs("form",{className:"space-y-6",onSubmit:O,children:[p&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:p}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:d.email,onChange:b,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:d.password,onChange:b,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:z-10 sm:text-sm",placeholder:"Enter your password"})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:v,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing In..."]}):"Sign In"})})]})}),s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-purple-800 mb-2",children:"Demo Owner Account:"}),s.jsxs("div",{className:"text-xs text-purple-700 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," owner@example.com"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Password:"})," owner123"]}),s.jsx("p",{className:"mt-2 text-purple-600",children:"Contact admin to get owner access."})]})]}),s.jsx("div",{className:"text-center text-sm text-gray-600",children:s.jsx("p",{children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})})},Xk=()=>{const n=ut(),{user:e,refreshUserData:t}=Qt(),[i,o]=V.useState(!1),[c,d]=V.useState({firstName:e?.name?.split(" ")[0]||"John",lastName:e?.name?.split(" ")[1]||"Doe",email:e?.email||"john.doe@example.com",phone:"+1 234 567 8900",address:"123 Main St, New York, NY 10001",dateOfBirth:"1990-01-01",licenseNumber:"DL123456789",licenseExpiry:"2025-12-31"}),[m,p]=V.useState({...c}),g=(b,O)=>{p(k=>({...k,[b]:O}))},v=()=>{if(d({...m}),o(!1),localStorage.setItem("userProfile",JSON.stringify(m)),e){const b={...e,name:`${m.firstName} ${m.lastName}`,email:m.email};localStorage.setItem("userData",JSON.stringify(b)),t(),console.log("🔄 Profile updated - AuthContext user data synchronized and refreshed")}alert("Profile updated successfully! Changes will be reflected throughout the application.")},_=()=>{p({...c}),o(!1)};return V.useEffect(()=>{const b=localStorage.getItem("userProfile");if(b){const O=JSON.parse(b);d(O),p(O)}else if(e){const O={firstName:e.name?.split(" ")[0]||"John",lastName:e.name?.split(" ")[1]||"Doe",email:e.email||"john.doe@example.com",phone:"+1 234 567 8900",address:"123 Main St, New York, NY 10001",dateOfBirth:"1990-01-01",licenseNumber:"DL123456789",licenseExpiry:"2025-12-31"};d(O),p(O)}},[e]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})})}),s.jsx("div",{className:"py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account information"})]}),!i&&s.jsx("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit Profile"})]}),s.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[s.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[c.firstName[0],c.lastName[0]]})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[c.firstName," ",c.lastName]}),s.jsx("p",{className:"text-gray-600",children:c.email}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e?.role==="owner"?"Owner Account":"Member since 2024"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),i?s.jsx("input",{type:"text",value:m.firstName,onChange:b=>g("firstName",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:c.firstName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),i?s.jsx("input",{type:"text",value:m.lastName,onChange:b=>g("lastName",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:c.lastName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),i?s.jsx("input",{type:"email",value:m.email,onChange:b=>g("email",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:c.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),i?s.jsx("input",{type:"tel",value:m.phone,onChange:b=>g("phone",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:c.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),i?s.jsx("input",{type:"date",value:m.dateOfBirth,onChange:b=>g("dateOfBirth",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:new Date(c.dateOfBirth).toLocaleDateString()})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),i?s.jsx("input",{type:"text",value:m.address,onChange:b=>g("address",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your address"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:c.address})]})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6 mt-8",children:"Driver's License"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Number"}),i?s.jsx("input",{type:"text",value:m.licenseNumber,onChange:b=>g("licenseNumber",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:c.licenseNumber})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Expiry Date"}),i?s.jsx("input",{type:"date",value:m.licenseExpiry,onChange:b=>g("licenseExpiry",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("p",{className:"text-gray-900 py-3 px-4 bg-gray-50 rounded-lg",children:new Date(c.licenseExpiry).toLocaleDateString()})]})]}),i&&s.jsxs("div",{className:"flex gap-4 mt-8",children:[s.jsx("button",{onClick:v,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Save Changes"}),s.jsx("button",{onClick:_,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mt-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Preferences"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Preferred Car Types"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["SUV","Sedan","Hatchback","Convertible"].map(b=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"mr-2 text-blue-600",defaultChecked:b==="SUV"}),s.jsx("span",{className:"text-sm text-gray-700",children:b})]},b))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Communication Preferences"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"mr-3 text-blue-600",defaultChecked:!0}),s.jsx("span",{className:"text-sm text-gray-700",children:"Email booking confirmations"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"mr-3 text-blue-600",defaultChecked:!0}),s.jsx("span",{className:"text-sm text-gray-700",children:"SMS booking reminders"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"mr-3 text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Promotional offers and discounts"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"mr-3 text-blue-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Newsletter and updates"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mt-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Bookings"}),s.jsx("div",{className:"space-y-4",children:[{id:"BK001",car:"BMW X5",date:"2024-01-15",status:"Completed",amount:"$285"},{id:"BK002",car:"Toyota Corolla",date:"2024-01-10",status:"Completed",amount:"$130"},{id:"BK003",car:"Jeep Wrangler",date:"2024-01-05",status:"Cancelled",amount:"$200"}].map(b=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-blue-600",children:"🚗"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:b.car}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Booking #",b.id," • ",b.date]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:b.amount}),s.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${b.status==="Completed"?"bg-green-100 text-green-800":b.status==="Cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:b.status})]})]},b.id))}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View All Bookings"})})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mt-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Change Password"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Update your account password for better security"})]}),s.jsx("button",{className:"px-4 py-2 text-blue-600 hover:text-blue-800 font-medium",children:"Change"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive booking confirmations and important updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Data Export"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Download your booking history and personal data"})]}),s.jsx("button",{className:"px-4 py-2 text-blue-600 hover:text-blue-800 font-medium",children:"Export"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-red-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-900",children:"Delete Account"}),s.jsx("p",{className:"text-sm text-red-600",children:"Permanently delete your account and all associated data"})]}),s.jsx("button",{className:"px-4 py-2 text-red-600 hover:text-red-800 font-medium",children:"Delete"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mt-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Support & Help"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"📞 Contact Support"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Need help with your account or bookings?"}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Contact Us"})]}),s.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"📚 Help Center"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Find answers to common questions"}),s.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:"Browse FAQ"})]}),s.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"💬 Live Chat"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Chat with our support team"}),s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Start Chat"})]}),s.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"📱 App Feedback"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Help us improve your experience"}),s.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Give Feedback"})]})]})]})]})})]})},Zk=()=>{const n=ut(),{user:e}=Qt(),[t,i]=V.useState([]),[o,c]=V.useState([]),[d,m]=V.useState(0),[p,g]=V.useState(!0),[v,_]=V.useState(null);V.useEffect(()=>{const R=async()=>{try{g(!0),_(null),console.log("📊 Loading dashboard data for owner...");const[K,X,re]=await Promise.all([Zn.getAllBookings(),Bi.getOwnerCars(e.id),Yu.getTotalRevenue(e.id)]),E=K.filter(C=>X.some(S=>S.id===C.carId));console.log(`✅ Owner loaded ${E.length} bookings, ${X.length} cars, $${re} revenue`),i(E),c(X),m(re)}catch(K){console.error("❌ Error loading dashboard data:",K),_("Failed to load dashboard data. Please refresh the page or contact support.")}finally{g(!1)}};e?.id&&R()},[e]);const b=()=>t.filter(R=>R.status==="pending").length,O=()=>t.filter(R=>R.status==="confirmed").length;o.slice(0,4);const k=async R=>{try{await Zn.updateBookingStatus(R,"confirmed",e.id),alert("Booking accepted successfully! Revenue has been added to your dashboard."),window.location.reload()}catch(K){console.error("Error accepting booking:",K),alert("Failed to accept booking. Please try again.")}},D=async R=>{try{await Zn.updateBookingStatus(R,"cancelled",e.id),alert("Booking rejected."),window.location.reload()}catch(K){console.error("Error rejecting booking:",K),alert("Failed to reject booking. Please try again.")}},A=[{title:"Total Cars",value:o.length,icon:ie.carIcon,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50"},{title:"Total Bookings",value:t.length,icon:ie.listIcon,color:"from-green-500 to-green-600",bgColor:"bg-green-50"},{title:"Pending Bookings",value:b(),icon:ie.calendar_icon_colored,color:"from-yellow-500 to-yellow-600",bgColor:"bg-yellow-50"},{title:"Confirmed Bookings",value:O(),icon:ie.check_icon,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50"}],q=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),I=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(R);return p?s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg"}),s.jsx("div",{className:"flex-1 p-8 flex items-center justify-center",children:s.jsx($i,{})})]}):v?s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg"}),s.jsx("div",{className:"flex-1 p-8 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Error"}),s.jsx("p",{children:v}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"Retry"})]})})]}):s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:dummyUserData.image,alt:"Profile",className:"w-12 h-12 rounded-full"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:dummyUserData.name}),s.jsx("p",{className:"text-sm text-gray-500",children:dummyUserData.email})]})]})}),s.jsx("nav",{className:"p-4",children:s.jsx("ul",{className:"space-y-2",children:kk.map((R,K)=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>n(R.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${R.path==="/owner"?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("img",{src:R.path==="/owner"?R.coloredIcon:R.icon,alt:R.name,className:"w-5 h-5"}),R.name]})},K))})})]}),s.jsx("div",{className:"flex-1 p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's what's happening with your cars."})]}),s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-8 text-white mb-8 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Total Revenue"}),s.jsx("p",{className:"text-green-100",children:"All-time earnings from confirmed bookings"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-4xl font-bold",children:I(d)}),s.jsx("div",{className:"text-green-100 text-sm",children:"+12% from last month"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:A.map((R,K)=>s.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl ${R.bgColor} flex items-center justify-center mb-4`,children:s.jsx("img",{src:R.icon,alt:R.title,className:"w-6 h-6"})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-sm font-medium",children:R.title}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:R.value})]}),s.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${R.color}`})]})]},K))}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Recent Bookings"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Latest booking activities"})]}),s.jsx("div",{className:"divide-y divide-gray-200",children:(()=>{const R=t.slice(-5).reverse();return R.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"No bookings yet"}):R.map((K,X)=>{const re=o.find(E=>E.id===K.carId)||{};return s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:re.images?.[0]||re.imageURL||re.image||ie.main_car,alt:re.brand||re.name||"Car",className:"w-16 h-16 rounded-lg object-cover"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900",children:[re.brand||re.name||"Car"," ",re.model||""]}),s.jsxs("p",{className:"text-gray-600 text-sm",children:[q(K.pickupDate)," - ",q(K.returnDate)]}),s.jsx("p",{className:"text-gray-500 text-sm",children:re.location||"Location not specified"}),s.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Customer: ",K.customerName||"N/A"]})]})]}),s.jsxs("div",{className:"text-right flex flex-col items-end gap-2",children:[s.jsx("div",{className:"font-bold text-gray-900",children:I(K.totalPrice)}),s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium ${K.status==="confirmed"?"bg-green-100 text-green-800":K.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:K.status.charAt(0).toUpperCase()+K.status.slice(1)}),K.status==="pending"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>k(K.id),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors",children:"Accept"}),s.jsx("button",{onClick:()=>D(K.id),className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",children:"Reject"})]})]})]})},K.id||X)})})()}),s.jsx("div",{className:"p-6 bg-gray-50",children:s.jsx("button",{onClick:()=>n("/owner/manage-bookings"),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"View All Bookings"})})]})]})})]})},eS=()=>{const{id:n}=sf(),e=ut(),[t,i]=V.useState(null),[o,c]=V.useState({}),[d,m]=V.useState(!1);V.useEffect(()=>{if(n){const _=op.find(b=>b._id===n);_&&(i(_),c({..._}))}},[n]);const p=(_,b)=>{c(O=>({...O,[_]:b}))},g=async()=>{m(!0);try{console.log("Saving car:",o),alert("Car details updated successfully!"),e("/owner")}catch{alert("Error updating car details. Please try again.")}finally{m(!1)}},v=()=>{e("/owner")};return t?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Car Details"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Update information for ",t.brand," ",t.model]})]}),s.jsxs("button",{onClick:v,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsx("div",{className:"p-8 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("img",{src:t.image,alt:`${t.brand} ${t.model}`,className:"w-64 h-48 object-cover rounded-xl shadow-lg"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Car Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),s.jsx("input",{type:"text",value:o.brand||"",onChange:_=>p("brand",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),s.jsx("input",{type:"text",value:o.model||"",onChange:_=>p("model",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),s.jsx("input",{type:"number",value:o.year||"",onChange:_=>p("year",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{value:o.category||"",onChange:_=>p("category",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Category"}),s.jsx("option",{value:"SUV",children:"SUV"}),s.jsx("option",{value:"Sedan",children:"Sedan"}),s.jsx("option",{value:"Hatchback",children:"Hatchback"}),s.jsx("option",{value:"Coupe",children:"Coupe"}),s.jsx("option",{value:"Convertible",children:"Convertible"}),s.jsx("option",{value:"Wagon",children:"Wagon"}),s.jsx("option",{value:"Pickup",children:"Pickup"})]})]})]})]})]})}),s.jsxs("div",{className:"p-8 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Pricing & Location"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per Day ($)"}),s.jsx("input",{type:"number",value:o.pricePerDay||"",onChange:_=>p("pricePerDay",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),s.jsxs("select",{value:o.location||"",onChange:_=>p("location",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Location"}),s.jsx("option",{value:"New York",children:"New York"}),s.jsx("option",{value:"Los Angeles",children:"Los Angeles"}),s.jsx("option",{value:"Chicago",children:"Chicago"}),s.jsx("option",{value:"Houston",children:"Houston"}),s.jsx("option",{value:"Miami",children:"Miami"}),s.jsx("option",{value:"Seattle",children:"Seattle"}),s.jsx("option",{value:"Boston",children:"Boston"}),s.jsx("option",{value:"San Francisco",children:"San Francisco"})]})]})]})]}),s.jsxs("div",{className:"p-8 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Technical Specifications"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seating Capacity"}),s.jsx("input",{type:"number",value:o.seating_capacity||"",onChange:_=>p("seating_capacity",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"20"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),s.jsxs("select",{value:o.fuel_type||"",onChange:_=>p("fuel_type",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Fuel Type"}),s.jsx("option",{value:"Petrol",children:"Petrol"}),s.jsx("option",{value:"Diesel",children:"Diesel"}),s.jsx("option",{value:"Hybrid",children:"Hybrid"}),s.jsx("option",{value:"Electric",children:"Electric"}),s.jsx("option",{value:"CNG",children:"CNG"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transmission"}),s.jsxs("select",{value:o.transmission||"",onChange:_=>p("transmission",_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select Transmission"}),s.jsx("option",{value:"Manual",children:"Manual"}),s.jsx("option",{value:"Automatic",children:"Automatic"}),s.jsx("option",{value:"Semi-Automatic",children:"Semi-Automatic"}),s.jsx("option",{value:"CVT",children:"CVT"})]})]})]})]}),s.jsxs("div",{className:"p-8 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Description"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car Description"}),s.jsx("textarea",{value:o.description||"",onChange:_=>p("description",_.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter a detailed description of the car..."})]})]}),s.jsxs("div",{className:"p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Availability"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isAvailable",checked:o.isAvaliable||!1,onChange:_=>p("isAvaliable",_.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isAvailable",className:"ml-2 block text-sm text-gray-900",children:"Car is available for booking"})]})]}),s.jsxs("div",{className:"px-8 pb-8 flex gap-4",children:[s.jsx("button",{onClick:g,disabled:d,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving...":"Save Changes"}),s.jsx("button",{onClick:v,className:"flex-1 bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"Cancel"})]})]})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading car details..."})]})})},tS=()=>{const n=ut(),{user:e}=Qt(),[t,i]=V.useState({brand:"",model:"",year:"",category:"",seating_capacity:"",fuel_type:"",transmission:"",pricePerDay:"",location:"",description:"",image:null,isVisible:!0}),[o,c]=V.useState(null),d=g=>{const{name:v,value:_}=g.target;i(b=>({...b,[v]:_}))},m=g=>{const v=g.target.files[0];if(v){i(b=>({...b,image:v}));const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsDataURL(v)}},p=async g=>{if(g.preventDefault(),!e){alert("Please sign in to add a car");return}try{const v={name:t.brand,model:t.model,brand:t.brand,year:parseInt(t.year),category:t.category,seatingCapacity:parseInt(t.seating_capacity),fuelType:t.fuel_type,transmission:t.transmission,pricePerDay:parseFloat(t.pricePerDay),location:t.location,description:t.description,images:o?[o]:["/src/assets/car_image1.png"],features:["Air Conditioning","GPS","Bluetooth"]};await Bi.addCar(v,e.id),console.log("Car added successfully to Firebase"),alert("Car added successfully! It will now appear in your Manage Cars section."),i({brand:"",model:"",year:"",category:"",seating_capacity:"",fuel_type:"",transmission:"",pricePerDay:"",location:"",description:"",image:null,isVisible:!0}),c(null),n("/owner/manage-cars")}catch(v){console.error("Error adding car:",v),alert("Failed to add car. Please try again.")}};return s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:ie.user_profile,alt:"Profile",className:"w-12 h-12 rounded-full"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e?.name||"Owner"}),s.jsx("p",{className:"text-sm text-gray-500",children:e?.email||""})]})]})}),s.jsx("nav",{className:"p-4",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.dashboardIcon,alt:"Dashboard",className:"w-5 h-5"}),"Dashboard"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/add-car"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 border-r-4 border-blue-600",children:[s.jsx("img",{src:ie.addIconColored,alt:"Add Car",className:"w-5 h-5"}),"Add car"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-cars"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.carIcon,alt:"Manage Cars",className:"w-5 h-5"}),"Manage Cars"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-bookings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.listIcon,alt:"Manage Bookings",className:"w-5 h-5"}),"Manage Bookings"]})})]})})]}),s.jsx("div",{className:"flex-1 p-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add New Car"}),s.jsx("p",{className:"text-gray-600",children:"Fill in the details to add a new car to your fleet."})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Car Image"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"hidden",id:"car-image"}),s.jsx("label",{htmlFor:"car-image",className:"cursor-pointer",children:o?s.jsx("img",{src:o,alt:"Preview",className:"max-h-48 mx-auto rounded-lg"}):s.jsxs("div",{className:"text-gray-500",children:[s.jsx("img",{src:ie.upload_icon,alt:"Upload",className:"w-12 h-12 mx-auto mb-2"}),s.jsx("p",{children:"Click to upload car image"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),s.jsx("input",{type:"text",name:"brand",value:t.brand,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Model"}),s.jsx("input",{type:"text",name:"model",value:t.model,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),s.jsx("input",{type:"number",name:"year",value:t.year,onChange:d,min:"2000",max:new Date().getFullYear()+1,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsxs("select",{name:"category",value:t.category,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select Category"}),s.jsx("option",{value:"SUV",children:"SUV"}),s.jsx("option",{value:"Sedan",children:"Sedan"}),s.jsx("option",{value:"Hatchback",children:"Hatchback"}),s.jsx("option",{value:"Coupe",children:"Coupe"}),s.jsx("option",{value:"Convertible",children:"Convertible"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seating Capacity"}),s.jsx("input",{type:"number",name:"seating_capacity",value:t.seating_capacity,onChange:d,min:"1",max:"9",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuel Type"}),s.jsxs("select",{name:"fuel_type",value:t.fuel_type,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select Fuel Type"}),s.jsx("option",{value:"Petrol",children:"Petrol"}),s.jsx("option",{value:"Diesel",children:"Diesel"}),s.jsx("option",{value:"Hybrid",children:"Hybrid"}),s.jsx("option",{value:"Electric",children:"Electric"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transmission"}),s.jsxs("select",{name:"transmission",value:t.transmission,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select Transmission"}),s.jsx("option",{value:"Manual",children:"Manual"}),s.jsx("option",{value:"Automatic",children:"Automatic"}),s.jsx("option",{value:"Semi-Automatic",children:"Semi-Automatic"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per Day ($)"}),s.jsx("input",{type:"number",name:"pricePerDay",value:t.pricePerDay,onChange:d,min:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),s.jsxs("select",{name:"location",value:t.location,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select Location"}),s.jsx("option",{value:"New York",children:"New York"}),s.jsx("option",{value:"Los Angeles",children:"Los Angeles"}),s.jsx("option",{value:"Chicago",children:"Chicago"}),s.jsx("option",{value:"Houston",children:"Houston"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{name:"description",value:t.description,onChange:d,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the car features, condition, etc.",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>n("/owner"),className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Car"})]})]})})]})})]})},nS=()=>{const n=ut(),e=()=>{const I=JSON.parse(localStorage.getItem("addedCars")||"[]"),R=JSON.parse(localStorage.getItem("dummyCarVisibility")||"{}"),K=JSON.parse(localStorage.getItem("dummyCarUpdates")||"{}"),X=JSON.parse(localStorage.getItem("deletedDummyCars")||"[]"),re=op.filter(C=>!X.includes(C._id)).map(C=>({...C,...K[C._id],isVisible:R[C._id]!==!1})),E=I.map(C=>({...C,isVisible:C.isVisible!==!1}));return[...re,...E]},[t,i]=V.useState(e),[o,c]=V.useState(""),[d,m]=V.useState(""),[p,g]=V.useState(null),[v,_]=V.useState({pricePerDay:"",location:"",seating_capacity:"",fuel_type:""});V.useEffect(()=>{i(e())},[]),t.filter(I=>{const R=I.brand.toLowerCase().includes(o.toLowerCase())||I.model.toLowerCase().includes(o.toLowerCase()),K=!d||I.location===d;return R&&K});const b=I=>{if(window.confirm("Are you sure you want to delete this car?")){i(t.filter(X=>X._id!==I));const R=JSON.parse(localStorage.getItem("addedCars")||"[]"),K=R.filter(X=>X._id!==I);if(K.length!==R.length)localStorage.setItem("addedCars",JSON.stringify(K));else{const X=JSON.parse(localStorage.getItem("deletedDummyCars")||"[]");X.includes(I)||(X.push(I),localStorage.setItem("deletedDummyCars",JSON.stringify(X)))}alert("Car deleted successfully!")}},O=I=>{try{const R=t.map(re=>re._id===I?{...re,isVisible:!re.isVisible}:re);i(R);const K=JSON.parse(localStorage.getItem("addedCars")||"[]"),X=K.findIndex(re=>re._id===I);if(X!==-1)K[X].isVisible=!K[X].isVisible,localStorage.setItem("addedCars",JSON.stringify(K)),alert(`Car is now ${K[X].isVisible?"visible":"hidden"} to customers!`);else{const re=JSON.parse(localStorage.getItem("dummyCarVisibility")||"{}"),E=re[I]!==!1;re[I]=!E,localStorage.setItem("dummyCarVisibility",JSON.stringify(re)),alert(`Car is now ${re[I]?"visible":"hidden"} to customers!`)}}catch(R){console.error("Error toggling car visibility:",R),alert("Failed to update car visibility. Please try again.")}},k=I=>{g(I._id),_({pricePerDay:I.pricePerDay,location:I.location,seating_capacity:I.seating_capacity,fuel_type:I.fuel_type})},D=()=>{g(null),_({pricePerDay:"",location:"",seating_capacity:"",fuel_type:""})},A=async I=>{try{const R={...v,pricePerDay:parseFloat(v.pricePerDay)||0,seating_capacity:parseInt(v.seating_capacity)||0};console.log("Saving car data locally:",R);const K=t.map(E=>E._id===I?{...E,...R}:E);i(K);const X=JSON.parse(localStorage.getItem("addedCars")||"[]"),re=X.findIndex(E=>E._id===I);if(re!==-1)X[re]={...X[re],...R},localStorage.setItem("addedCars",JSON.stringify(X));else{const E=JSON.parse(localStorage.getItem("dummyCarUpdates")||"{}");E[I]=R,localStorage.setItem("dummyCarUpdates",JSON.stringify(E))}g(null),_({pricePerDay:"",location:"",seating_capacity:"",fuel_type:""}),alert("Car details updated successfully!")}catch(R){console.error("Error updating car locally:",R),alert("Failed to update car details. Please try again.")}},q=(I,R)=>{_(K=>({...K,[I]:R}))};return s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:ie.user_profile,alt:"Profile",className:"w-12 h-12 rounded-full"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"GreatStack"}),s.jsx("p",{className:"text-sm text-gray-500",children:"admin@example.com"})]})]})}),s.jsx("nav",{className:"p-4",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.dashboardIcon,alt:"Dashboard",className:"w-5 h-5"}),"Dashboard"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/add-car"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.addIcon,alt:"Add Car",className:"w-5 h-5"}),"Add car"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-cars"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 border-r-4 border-blue-600",children:[s.jsx("img",{src:ie.carIconColored,alt:"Manage Cars",className:"w-5 h-5"}),"Manage Cars"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-bookings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.listIcon,alt:"Manage Bookings",className:"w-5 h-5"}),"Manage Bookings"]})})]})})]}),s.jsx("div",{className:"flex-1 p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center justify-end mb-4",children:s.jsxs("button",{onClick:()=>n("/owner/add-car"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx("img",{src:ie.addIcon,alt:"Add",className:"w-5 h-5"}),"Add New Car"]})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Manage Cars"}),s.jsx("p",{className:"text-gray-600",children:"Manage your car fleet and availability."})]}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Search by brand or model...",value:o,onChange:I=>c(I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsx("div",{className:"md:w-48",children:s.jsxs("select",{value:d,onChange:I=>m(I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Locations"}),s.jsx("option",{value:"New York",children:"New York"}),s.jsx("option",{value:"Los Angeles",children:"Los Angeles"}),s.jsx("option",{value:"Chicago",children:"Chicago"}),s.jsx("option",{value:"Houston",children:"Houston"})]})})]})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mt-8",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Manage Featured Cars"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Edit properties of cars displayed in the featured section"})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(I=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:I.image,alt:`${I.brand} ${I.model}`,className:"w-20 h-20 object-cover rounded-lg"}),s.jsx("div",{className:`absolute -top-2 -right-2 w-5 h-5 rounded-full flex items-center justify-center text-xs ${I.isVisible!==!1?"bg-green-500":"bg-red-500"}`,children:s.jsx("span",{className:"text-white font-bold",children:I.isVisible!==!1?"✓":"✗"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:p===I._id?s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Brand"}),s.jsx("input",{type:"text",value:v.brand||I.brand,onChange:R=>q("brand",R.target.value),className:"w-full border px-2 py-1 rounded text-sm",placeholder:"Brand"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Model"}),s.jsx("input",{type:"text",value:v.model||I.model,onChange:R=>q("model",R.target.value),className:"w-full border px-2 py-1 rounded text-sm",placeholder:"Model"})]})]}):`${I.brand} ${I.model}`}),p===I._id?s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),s.jsx("input",{type:"number",value:v.year||I.year,onChange:R=>q("year",R.target.value),className:"border px-2 py-1 rounded text-sm w-24",placeholder:"Year"})]}):s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.year})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Price/Day"}),p===I._id?s.jsx("input",{type:"number",value:v.pricePerDay||I.pricePerDay,onChange:R=>q("pricePerDay",R.target.value),className:"w-full border px-2 py-1 rounded text-sm",placeholder:"Price"}):s.jsxs("p",{className:"text-sm font-medium",children:["$",I.pricePerDay]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),p===I._id?s.jsxs("select",{value:v.location||I.location,onChange:R=>q("location",R.target.value),className:"w-full border px-2 py-1 rounded text-sm",children:[s.jsx("option",{value:"",children:"Select Location"}),s.jsx("option",{value:"New York",children:"New York"}),s.jsx("option",{value:"Los Angeles",children:"Los Angeles"}),s.jsx("option",{value:"Chicago",children:"Chicago"}),s.jsx("option",{value:"Houston",children:"Houston"})]}):s.jsx("p",{className:"text-sm",children:I.location})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Seats"}),p===I._id?s.jsx("input",{type:"number",value:v.seating_capacity||I.seating_capacity,onChange:R=>q("seating_capacity",R.target.value),className:"w-full border px-2 py-1 rounded text-sm",placeholder:"Seats"}):s.jsxs("p",{className:"text-sm",children:[I.seating_capacity," seats"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fuel Type"}),p===I._id?s.jsxs("select",{value:v.fuel_type||I.fuel_type,onChange:R=>q("fuel_type",R.target.value),className:"w-full border px-2 py-1 rounded text-sm",children:[s.jsx("option",{value:"",children:"Select Fuel"}),s.jsx("option",{value:"Petrol",children:"Petrol"}),s.jsx("option",{value:"Diesel",children:"Diesel"}),s.jsx("option",{value:"Hybrid",children:"Hybrid"}),s.jsx("option",{value:"Electric",children:"Electric"})]}):s.jsx("p",{className:"text-sm",children:I.fuel_type})]})]}),s.jsx("div",{className:"flex gap-2",children:p===I._id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>A(I._id),className:"flex-1 bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700 transition-colors",children:"Save"}),s.jsx("button",{onClick:D,className:"flex-1 bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors",children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>k(I),className:"flex-1 bg-blue-600 text-white px-2 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"Edit"}),s.jsx("button",{onClick:()=>O(I._id),className:`flex-1 py-2 px-2 rounded text-sm font-medium transition-all duration-200 transform hover:scale-105 ${I.isVisible!==!1?"bg-red-500 text-white hover:bg-red-600":"bg-green-500 text-white hover:bg-green-600"}`,title:I.isVisible!==!1?"Hide from customers":"Show to customers",children:I.isVisible!==!1?"Hide":"Show"}),s.jsx("button",{onClick:()=>b(I._id),className:"bg-red-600 text-white py-2 px-2 rounded text-sm font-medium hover:bg-red-700 transition-colors",title:"Delete car",children:"🗑️"})]})})]},I._id))})})]})]})})]})},rS=()=>{const n=ut(),{user:e}=Qt(),[t,i]=V.useState([]),[o,c]=V.useState([]),[d,m]=V.useState(""),[p,g]=V.useState(""),[v,_]=V.useState(!0),[b,O]=V.useState(null);V.useEffect(()=>{const R=async()=>{try{_(!0),O(null),console.log("📊 Loading bookings and cars for owner dashboard...");const[K,X]=await Promise.all([Zn.getAllBookings(),Bi.getOwnerCars(e.id)]),re=K.filter(E=>X.some(C=>C.id===E.carId));console.log(`✅ Owner loaded ${re.length} bookings for ${X.length} cars`),i(re),c(X)}catch(K){console.error("❌ Error loading data:",K),O("Failed to load bookings. Please refresh the page or contact support.")}finally{_(!1)}};e?.id&&R()},[e]);const k=t.filter(R=>{const K=!d||R.status===d,X=o.find(E=>E.id===R.carId),re=!p||X?.name?.toLowerCase().includes(p.toLowerCase())||X?.brand?.toLowerCase().includes(p.toLowerCase())||X?.model?.toLowerCase().includes(p.toLowerCase())||R.id?.toLowerCase().includes(p.toLowerCase());return K&&re}),D=async(R,K)=>{try{console.log(`🔄 Owner updating booking ${R} to status: ${K}`);const X=t.find(C=>C.id===R);if(await Zn.updateBookingStatus(R,K,e.id),K==="cancelled"&&X?.status==="confirmed")console.log(`💸 Processing owner cancellation refund for booking ${R}`),alert("✅ Booking cancelled successfully! Refund has been processed.");else if(K==="confirmed")alert("✅ Booking confirmed successfully! Revenue has been added to your dashboard.");else{const C=K.charAt(0).toUpperCase()+K.slice(1);alert(`✅ Booking ${C} successfully!`)}const E=(await Zn.getAllBookings()).filter(C=>o.some(S=>S.id===C.carId));i(E),console.log(`✅ Owner successfully updated booking ${R} to ${K}`)}catch(X){console.error("❌ Error in owner status update:",X),alert("❌ Failed to update booking status. Please try again or contact support.");try{const E=(await Zn.getAllBookings()).filter(C=>o.some(S=>S.id===C.carId));i(E)}catch(re){console.error("❌ Error reloading bookings after failed update:",re)}}},A=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),q=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(R),I=R=>{switch(R){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"canceled_by_owner":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return v?s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg"}),s.jsx("div",{className:"flex-1 p-8 flex items-center justify-center",children:s.jsx("div",{children:"Loading..."})})]}):b?s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg"}),s.jsx("div",{className:"flex-1 p-8 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Error"}),s.jsx("p",{children:b}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"Retry"})]})})]}):s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:ie.user_profile,alt:"Profile",className:"w-12 h-12 rounded-full"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"GreatStack"}),s.jsx("p",{className:"text-sm text-gray-500",children:"admin@example.com"})]})]})}),s.jsx("nav",{className:"p-4",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.dashboardIcon,alt:"Dashboard",className:"w-5 h-5"}),"Dashboard"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/add-car"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.addIcon,alt:"Add Car",className:"w-5 h-5"}),"Add car"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-cars"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.carIcon,alt:"Manage Cars",className:"w-5 h-5"}),"Manage Cars"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-bookings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 border-r-4 border-blue-600",children:[s.jsx("img",{src:ie.listIconColored,alt:"Manage Bookings",className:"w-5 h-5"}),"Manage Bookings"]})})]})})]}),s.jsx("div",{className:"flex-1 p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Client Booking Requests"}),s.jsx("p",{className:"text-gray-600",children:"Review and manage incoming car rental booking requests from customers."}),t.filter(R=>R.status==="pending").length>0&&s.jsxs("div",{className:"mt-3 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:[s.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),t.filter(R=>R.status==="pending").length," pending requests"]})]}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Refresh"})]})}),t.filter(R=>R.status==="pending").length>0&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-yellow-600 text-lg",children:"⚡"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Pending Booking Requests"}),s.jsxs("p",{className:"text-yellow-700 text-sm",children:["You have ",t.filter(R=>R.status==="pending").length," booking requests waiting for your approval"]})]})]}),s.jsx("button",{onClick:()=>m("pending"),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm font-medium",children:"View Pending"})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Search by car brand, model, or customer email...",value:p,onChange:R=>g(R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),s.jsx("div",{className:"md:w-48",children:s.jsxs("select",{value:d,onChange:R=>m(R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"pending",children:"⏳ Pending Requests"}),s.jsx("option",{value:"confirmed",children:"✅ Confirmed"}),s.jsx("option",{value:"cancelled",children:"❌ Cancelled"})]})})]})}),s.jsx("div",{className:"space-y-6",children:k.length===0?s.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl",children:[s.jsx("img",{src:ie.listIcon,alt:"No bookings",className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No bookings found"}),s.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria."})]}):k.map(R=>{const K=o.find(X=>X.id===R.carId)||{};return s.jsx("div",{className:`bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow ${R.status==="pending"?"ring-2 ring-yellow-300 bg-yellow-50/30":""}`,children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"lg:w-48",children:[s.jsx("img",{src:K.images?.[0]||K.imageURL||K.image||ie.main_car,alt:`${K.brand||K.name||"Car"} ${K.model||""}`,loading:"lazy",className:"w-full h-32 object-cover rounded-xl"}),R.status==="pending"&&s.jsx("div",{className:"mt-2 text-center",children:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-yellow-400 rounded-full mr-1 animate-pulse"}),"Awaiting Confirmation"]})}),R.status==="confirmed"&&s.jsx("div",{className:"mt-2 text-center",children:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-1"}),"Confirmed"]})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:[K.brand||K.name||"Car"," ",K.model||""]}),s.jsx("p",{className:"text-gray-600",children:K.location||"Location not specified"})]}),s.jsx("div",{className:"mt-2 md:mt-0",children:s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${I(R.status)}`,children:R.status==="canceled_by_owner"?"Canceled by Owner":R.status.charAt(0).toUpperCase()+R.status.slice(1)})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pickup Date"}),s.jsx("p",{className:"font-medium",children:A(R.pickupDate)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Return Date"}),s.jsx("p",{className:"font-medium",children:A(R.returnDate)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),s.jsx("p",{className:"font-bold text-blue-600",children:q(R.totalPrice)})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Customer Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:R.customerName||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Email:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:R.customerEmail||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Phone:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:R.customerPhone||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"License:"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Not provided"})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Booking ID:"})," ",R.id,s.jsx("span",{className:"ml-4 font-medium",children:"Created:"})," ",new Date(R.createdAt?.toDate?.()||R.createdAt).toLocaleDateString()]}),s.jsxs("div",{className:"flex gap-2",children:[R.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>D(R.id,"confirmed"),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:"✅ Approve Request"}),s.jsx("button",{onClick:()=>D(R.id,"cancelled"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"❌ Reject Request"})]}),R.status==="confirmed"&&s.jsx("button",{onClick:()=>D(R.id,"cancelled"),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Cancel Booking"}),R.status==="cancelled"&&s.jsx("span",{className:"px-4 py-2 bg-gray-200 text-gray-600 rounded-lg text-sm font-medium",children:"Request Cancelled"})]})]})]})]})},R.id)})}),s.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:(()=>{t.length;const R=t.filter(E=>E.status==="confirmed").length,K=t.filter(E=>E.status==="pending").length,X=t.filter(E=>E.status==="cancelled").length,re=t.filter(E=>E.status==="confirmed").reduce((E,C)=>E+(C.totalPrice||0),0);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:R}),s.jsx("div",{className:"text-gray-600",children:"Total Confirmed Bookings"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["$",re.toFixed(2)]}),s.jsx("div",{className:"text-gray-600",children:"Total Revenue"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:K}),s.jsx("div",{className:"text-gray-600",children:"Pending Approval"})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:X}),s.jsx("div",{className:"text-gray-600",children:"Cancelled"})]})]})})()})]})})]})},sS=()=>{const n=ut(),{user:e}=Qt(),[t,i]=V.useState([]),[o,c]=V.useState(!0),[d,m]=V.useState(null),[p,g]=V.useState(0),[v,_]=V.useState("all");V.useEffect(()=>{const D=async()=>{try{c(!0),m(null),console.log("📊 Loading revenue data for owner...");const[A,q]=await Promise.all([Yu.getOwnerRevenue(e.id),Yu.getTotalRevenue(e.id)]);console.log(`✅ Owner loaded ${A.length} revenue records, total: $${q}`),i(A),g(q)}catch(A){console.error("❌ Error loading revenue data:",A),m("Failed to load revenue data. Please refresh the page or contact support.")}finally{c(!1)}};e?.id&&D()},[e]);const b=D=>new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),O=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(D),k=t.filter(D=>{if(v==="all")return!0;const A=new Date(D.createdAt?.toDate?.()||D.createdAt),q=new Date;switch(v){case"today":return A.toDateString()===q.toDateString();case"week":const I=new Date(q.getTime()-10080*60*1e3);return A>=I;case"month":const R=new Date(q.getFullYear(),q.getMonth()-1,q.getDate());return A>=R;case"year":const K=new Date(q.getFullYear()-1,q.getMonth(),q.getDate());return A>=K;default:return!0}});return o?s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg"}),s.jsx("div",{className:"flex-1 p-8 flex items-center justify-center",children:s.jsx($i,{})})]}):d?s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsx("div",{className:"w-64 bg-white shadow-lg"}),s.jsx("div",{className:"flex-1 p-8 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Error"}),s.jsx("p",{children:d}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded",children:"Retry"})]})})]}):s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-64 bg-white shadow-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:ie.user_profile,alt:"Profile",className:"w-12 h-12 rounded-full"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"GreatStack"}),s.jsx("p",{className:"text-sm text-gray-500",children:"admin@example.com"})]})]})}),s.jsx("nav",{className:"p-4",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.dashboardIcon,alt:"Dashboard",className:"w-5 h-5"}),"Dashboard"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/add-car"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.addIcon,alt:"Add Car",className:"w-5 h-5"}),"Add car"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-cars"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.carIcon,alt:"Manage Cars",className:"w-5 h-5"}),"Manage Cars"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/manage-bookings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-50",children:[s.jsx("img",{src:ie.listIcon,alt:"Manage Bookings",className:"w-5 h-5"}),"Manage Bookings"]})}),s.jsx("li",{children:s.jsxs("button",{onClick:()=>n("/owner/revenue"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-blue-50 text-blue-600 border-r-4 border-blue-600",children:[s.jsx("img",{src:ie.listIconColored,alt:"Revenue",className:"w-5 h-5"}),"Revenue"]})})]})})]}),s.jsx("div",{className:"flex-1 p-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Revenue Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Track your earnings and financial performance"})]}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Refresh"})]})}),s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-8 text-white mb-8 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Total Revenue"}),s.jsx("p",{className:"text-green-100",children:"All-time earnings from confirmed bookings"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-4xl font-bold",children:O(p)}),s.jsx("div",{className:"text-green-100 text-sm",children:"+12% from last month"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:s.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Filter by Period"}),s.jsxs("select",{value:v,onChange:D=>_(D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"This Week"}),s.jsx("option",{value:"month",children:"This Month"}),s.jsx("option",{value:"year",children:"This Year"})]})]})})}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Revenue History"}),s.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Detailed breakdown of all earnings"})]}),s.jsx("div",{className:"divide-y divide-gray-200",children:k.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("img",{src:ie.listIcon,alt:"No revenue",className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No revenue records found"}),s.jsx("p",{className:"text-gray-600",children:"Revenue will appear here once bookings are confirmed."})]}):k.map(D=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-xl",children:"💰"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900",children:["Revenue from Booking #",D.bookingId?.substring(0,8)||"N/A"]}),s.jsx("p",{className:"text-gray-600 text-sm",children:b(D.createdAt?.toDate?.()||D.createdAt)}),s.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Car ID: ",D.carId?.substring(0,8)||"N/A"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:O(D.amount)}),s.jsx("div",{className:"text-sm text-gray-500",children:"Confirmed booking"})]})]})},D.id))}),k.length>0&&s.jsx("div",{className:"p-6 bg-gray-50",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",k.length," of ",t.length," revenue records"]}),s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["Filtered Total: ",O(k.reduce((D,A)=>D+A.amount,0))]})]})})]})]})})]})},iS=()=>{const{user:n}=Qt(),[e,t]=V.useState("profile"),[i,o]=V.useState({name:n?.name||"",email:n?.email||"",phone:"",businessName:"",businessAddress:"",businessPhone:"",businessEmail:""}),[c,d]=V.useState({siteName:"Test Client Car Rental",siteDescription:"Premium car rental services",contactEmail:"info@testclient.com",contactPhone:"+1 (555) 123-4567",businessHours:"Mon-Fri: 9AM-6PM, Sat-Sun: 10AM-4PM",maintenanceMode:!1,allowBookings:!0,currency:"USD",timezone:"America/New_York"}),[m,p]=V.useState({emailNotifications:!0,smsNotifications:!1,bookingConfirmations:!0,paymentReminders:!0,maintenanceAlerts:!0}),g=async k=>{k.preventDefault();try{const D=bn(ct,"userSettings",n.id);await wl(D,{profile:i,updatedAt:new Date},{merge:!0}),alert("Profile updated successfully!")}catch(D){console.error("Error updating profile:",D),alert("Failed to update profile. Please try again.")}},v=async k=>{k.preventDefault();try{const D=bn(ct,"userSettings",n.id);await wl(D,{website:c,updatedAt:new Date},{merge:!0}),alert("Website settings updated successfully!")}catch(D){console.error("Error updating website settings:",D),alert("Failed to update website settings. Please try again.")}},_=async k=>{k.preventDefault();try{const D=bn(ct,"userSettings",n.id);await wl(D,{notifications:m,updatedAt:new Date},{merge:!0}),alert("Notification settings updated successfully!")}catch(D){console.error("Error updating notification settings:",D),alert("Failed to update notification settings. Please try again.")}},b=(k,D,A)=>{k==="profile"?o(q=>({...q,[D]:A})):k==="website"?d(q=>({...q,[D]:A})):k==="notifications"&&p(q=>({...q,[D]:A}))};V.useEffect(()=>{(async()=>{if(n?.id)try{const D=bn(ct,"userSettings",n.id),A=await _d(D);if(A.exists()){const q=A.data();q.profile&&o(I=>({...I,...q.profile})),q.website&&d(I=>({...I,...q.website})),q.notifications&&p(I=>({...I,...q.notifications}))}}catch(D){console.error("Error loading user settings:",D)}})()},[n]);const O=[{id:"profile",name:"Profile",icon:ie.user_profile},{id:"website",name:"Website",icon:ie.edit_icon},{id:"notifications",name:"Notifications",icon:ie.check_icon}];return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your account and website settings"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex",children:O.map(k=>s.jsxs("button",{onClick:()=>t(k.id),className:`flex items-center px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e===k.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx("img",{src:k.icon,alt:"",className:"w-5 h-5 mr-2"}),k.name]},k.id))})}),s.jsxs("div",{className:"p-6",children:[e==="profile"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Information"}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",value:i.name,onChange:k=>b("profile","name",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:i.email,onChange:k=>b("profile","email",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:i.phone,onChange:k=>b("profile","phone",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),s.jsx("input",{type:"text",value:i.businessName,onChange:k=>b("profile","businessName",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Address"}),s.jsx("textarea",{value:i.businessAddress,onChange:k=>b("profile","businessAddress",k.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Phone"}),s.jsx("input",{type:"tel",value:i.businessPhone,onChange:k=>b("profile","businessPhone",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Email"}),s.jsx("input",{type:"email",value:i.businessEmail,onChange:k=>b("profile","businessEmail",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Profile"})})]})]}),e==="website"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Website Settings"}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),s.jsx("input",{type:"text",value:c.siteName,onChange:k=>b("website","siteName",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),s.jsx("input",{type:"email",value:c.contactEmail,onChange:k=>b("website","contactEmail",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),s.jsx("input",{type:"tel",value:c.contactPhone,onChange:k=>b("website","contactPhone",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),s.jsxs("select",{value:c.currency,onChange:k=>b("website","currency",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"EUR",children:"EUR (€)"}),s.jsx("option",{value:"GBP",children:"GBP (£)"}),s.jsx("option",{value:"CAD",children:"CAD (C$)"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),s.jsx("textarea",{value:c.siteDescription,onChange:k=>b("website","siteDescription",k.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Hours"}),s.jsx("input",{type:"text",value:c.businessHours,onChange:k=>b("website","businessHours",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"maintenanceMode",checked:c.maintenanceMode,onChange:k=>b("website","maintenanceMode",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"maintenanceMode",className:"ml-2 text-sm text-gray-700",children:"Enable Maintenance Mode"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"allowBookings",checked:c.allowBookings,onChange:k=>b("website","allowBookings",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"allowBookings",className:"ml-2 text-sm text-gray-700",children:"Allow New Bookings"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Website Settings"})})]})]}),e==="notifications"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Notification Settings"}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]}),s.jsx("input",{type:"checkbox",checked:m.emailNotifications,onChange:k=>b("notifications","emailNotifications",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via SMS"})]}),s.jsx("input",{type:"checkbox",checked:m.smsNotifications,onChange:k=>b("notifications","smsNotifications",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Booking Confirmations"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when bookings are confirmed"})]}),s.jsx("input",{type:"checkbox",checked:m.bookingConfirmations,onChange:k=>b("notifications","bookingConfirmations",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Payment Reminders"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payment reminder notifications"})]}),s.jsx("input",{type:"checkbox",checked:m.paymentReminders,onChange:k=>b("notifications","paymentReminders",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Maintenance Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get alerts about system maintenance"})]}),s.jsx("input",{type:"checkbox",checked:m.maintenanceAlerts,onChange:k=>b("notifications","maintenanceAlerts",k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Notification Settings"})})]})]})]})]})]})})},aS=()=>{const{user:n}=Qt(),[e,t]=V.useState({name:n?`${n.firstName||""} ${n.lastName||""}`.trim():"",email:n?.email||"",subject:"",message:""}),[i,o]=V.useState(!1),[c,d]=V.useState(null),m=v=>{const{name:_,value:b}=v.target;t(O=>({...O,[_]:b}))},p=async v=>{v.preventDefault(),o(!0);try{await new Promise(_=>setTimeout(_,2e3)),d({type:"success",message:"Thank you for contacting us! We'll get back to you within 24 hours."}),t({name:n?`${n.firstName||""} ${n.lastName||""}`.trim():"",email:n?.email||"",subject:"",message:""})}catch{d({type:"error",message:"Failed to send message. Please try again."})}finally{o(!1)}},g=()=>{d(null)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[c&&s.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:s.jsxs("div",{className:`p-4 rounded-lg shadow-lg border-l-4 flex items-center gap-3 ${c.type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:[s.jsx("span",{className:"text-xl",children:c.type==="success"?"✅":"❌"}),s.jsx("span",{className:"flex-1 text-sm",children:c.message}),s.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600",children:"×"})]})}),s.jsx("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-cyan-500 text-white py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Contact Us"}),s.jsx("p",{className:"text-xl opacity-90 max-w-3xl mx-auto",children:"Get in touch with our luxury car rental experts. We're here to make your journey exceptional."})]})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"text-5xl mb-4",children:"📞"}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Phone Support"}),s.jsx("p",{className:"text-indigo-600 font-semibold text-lg mb-2",children:"+1 (555) 123-4567"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"24/7 Customer Service"}),s.jsx("p",{className:"text-gray-600",children:"Available for immediate assistance"})]}),s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"text-5xl mb-4",children:"📧"}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Email Support"}),s.jsx("p",{className:"text-indigo-600 font-semibold text-lg mb-2",children:"support@citydrive.com"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"Response within 2 hours"}),s.jsx("p",{className:"text-gray-600",children:"Detailed inquiries and booking assistance"})]}),s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"text-5xl mb-4",children:"📍"}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Visit Our Office"}),s.jsx("p",{className:"text-indigo-600 font-semibold text-lg mb-2",children:"123 Luxury Lane"}),s.jsx("p",{className:"text-gray-600 mb-1",children:"New York, NY 10001"}),s.jsx("p",{className:"text-gray-600",children:"Mon-Fri: 9AM-6PM, Sat: 10AM-4PM"})]})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4 text-center",children:"Send us a Message"}),s.jsx("p",{className:"text-gray-600 mb-8 text-center",children:"Have questions about our services? Need help with a booking? We're here to help!"}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:m,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:m,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter your email"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subject",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Subject"}),s.jsxs("select",{id:"subject",name:"subject",value:e.subject,onChange:m,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select a subject"}),s.jsx("option",{value:"booking",children:"Booking Inquiry"}),s.jsx("option",{value:"pricing",children:"Pricing Questions"}),s.jsx("option",{value:"support",children:"Technical Support"}),s.jsx("option",{value:"feedback",children:"Feedback"}),s.jsx("option",{value:"partnership",children:"Partnership Opportunities"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"message",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Message"}),s.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:m,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-vertical",placeholder:"Tell us how we can help you..."})]}),s.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold text-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"📤"}),"Send Message"]})}),s.jsxs("div",{className:"text-center text-sm text-gray-500 flex items-center justify-center gap-2",children:[s.jsx("span",{children:"🔒"}),s.jsx("span",{children:"Your information is secure and will never be shared"})]})]})]})})]}),s.jsxs("div",{className:"mt-20 text-center",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),s.jsx("p",{className:"text-xl text-gray-600 mb-12",children:"Find quick answers to common questions about our services"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"🚗"}),"What types of vehicles do you offer?"]}),s.jsx("p",{className:"text-gray-600",children:"We offer a premium fleet including luxury sedans, SUVs, sports cars, and electric vehicles from top brands like BMW, Mercedes, Porsche, and Tesla."})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"💰"}),"What are your rental rates?"]}),s.jsx("p",{className:"text-gray-600",children:"Our rates start from $89/day for economy vehicles and go up to $450/day for luxury and sports cars. All rates include insurance and GPS."})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"📅"}),"What's your minimum rental period?"]}),s.jsx("p",{className:"text-gray-600",children:"Our minimum rental period is 24 hours, but we offer flexible terms for longer rentals with discounted daily rates."})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"🛡️"}),"Is insurance included?"]}),s.jsx("p",{className:"text-gray-600",children:"Yes, all our rentals include comprehensive insurance coverage with zero deductible options available for additional peace of mind."})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"📍"}),"Where can I pick up my rental car?"]}),s.jsx("p",{className:"text-gray-600",children:"We offer pickup from major airports, downtown locations, and can arrange delivery to your hotel or residence in most metropolitan areas."})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"🔄"}),"Can I modify or cancel my booking?"]}),s.jsx("p",{className:"text-gray-600",children:"You can modify your booking up to 24 hours before pickup at no charge. Cancellations made within 24 hours may incur a fee."})]})]})]})]})]})},oS=()=>{const n=[{number:"5000+",label:"Happy Customers"},{number:"1000+",label:"Luxury Vehicles"},{number:"50+",label:"Locations Worldwide"},{number:"24/7",label:"Customer Support"}],e=[{name:"Sarah Johnson",role:"CEO & Founder",image:"👩‍💼",bio:"With over 15 years in luxury automotive services, Sarah leads our vision for exceptional car rental experiences."},{name:"Michael Chen",role:"Head of Operations",image:"👨‍💼",bio:"Michael ensures every vehicle meets our premium standards and every customer receives world-class service."},{name:"Emma Rodriguez",role:"Customer Experience Director",image:"👩‍💻",bio:"Emma and her team are dedicated to making every rental experience memorable and stress-free."}],t=[{icon:"🏆",title:"Excellence",description:"We maintain the highest standards in vehicle quality, service, and customer satisfaction."},{icon:"🤝",title:"Trust",description:"Building lasting relationships through transparency, reliability, and honest communication."},{icon:"🚀",title:"Innovation",description:"Continuously improving our services with the latest technology and industry best practices."},{icon:"🌍",title:"Sustainability",description:"Committed to eco-friendly practices and reducing our environmental impact."}];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"About City Drive"}),s.jsx("p",{className:"text-xl md:text-2xl opacity-90 max-w-4xl mx-auto",children:"Redefining luxury car rental with premium vehicles, exceptional service, and unforgettable experiences since 2010."})]})})}),s.jsx("div",{className:"bg-white py-16",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:n.map((i,o)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl md:text-5xl font-bold text-indigo-600 mb-2",children:i.number}),s.jsx("div",{className:"text-lg text-gray-600 font-medium",children:i.label})]},o))})})}),s.jsx("div",{className:"py-20 bg-gray-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Our Story"}),s.jsxs("div",{className:"space-y-4 text-lg text-gray-600",children:[s.jsx("p",{children:"Founded in 2010, City Drive began with a simple mission: to provide luxury car rental experiences that exceed expectations. What started as a small operation in downtown New York has grown into a global network of premium vehicle rentals."}),s.jsx("p",{children:"We believe that every journey should be extraordinary. Whether you're planning a special occasion, conducting business travel, or simply want to experience the thrill of driving a luxury vehicle, we're here to make it happen."}),s.jsx("p",{children:"Our commitment to excellence drives everything we do. From our meticulously maintained fleet of high-end vehicles to our dedicated customer service team, we strive to deliver unparalleled experiences that create lasting memories."})]})]}),s.jsx("div",{className:"relative",children:s.jsx("div",{className:"aspect-w-16 aspect-h-12 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl flex items-center justify-center",children:s.jsx("div",{className:"text-8xl",children:"🏢"})})})]})})}),s.jsx("div",{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Our Values"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"The principles that guide our business and shape every customer interaction."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((i,o)=>s.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-xl hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-5xl mb-4",children:i.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:i.title}),s.jsx("p",{className:"text-gray-600",children:i.description})]},o))})]})}),s.jsx("div",{className:"py-20 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Meet Our Team"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"The passionate professionals dedicated to making your luxury car rental experience exceptional."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((i,o)=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center hover:shadow-xl transition-shadow",children:[s.jsx("div",{className:"text-6xl mb-4",children:i.image}),s.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:i.name}),s.jsx("p",{className:"text-indigo-600 font-medium mb-4",children:i.role}),s.jsx("p",{className:"text-gray-600",children:i.bio})]},o))})]})}),s.jsx("div",{className:"py-20 bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Our Mission"}),s.jsx("p",{className:"text-xl md:text-2xl opacity-90 max-w-4xl mx-auto mb-8",children:"To revolutionize the car rental industry by providing unparalleled luxury experiences, exceptional customer service, and innovative solutions that make every journey memorable."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[s.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Customer First"}),s.jsx("p",{className:"opacity-90",children:"Every decision we make prioritizes our customers' needs and satisfaction."})]}),s.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6",children:[s.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Quality Excellence"}),s.jsx("p",{className:"opacity-90",children:"We maintain the highest standards in everything we do, from vehicles to service."})]}),s.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-6",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🌟"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Innovation"}),s.jsx("p",{className:"opacity-90",children:"We embrace new technologies and ideas to enhance your rental experience."})]})]})]})}),s.jsx("div",{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Ready to Experience Luxury?"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Join thousands of satisfied customers who trust City Drive for their luxury car rental needs."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("button",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200",children:"Browse Our Fleet"}),s.jsx("button",{className:"border-2 border-indigo-600 text-indigo-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-indigo-50 transition-all duration-200",children:"Contact Us"})]})]})})]})},lS=()=>s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Terms of Service"}),s.jsx("p",{className:"text-xl opacity-90 max-w-3xl mx-auto",children:"Please read these terms carefully before using our services"})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[s.jsx("nav",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[s.jsx("a",{href:"#acceptance",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Acceptance"}),s.jsx("a",{href:"#services",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Services"}),s.jsx("a",{href:"#accounts",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Accounts"}),s.jsx("a",{href:"#liability",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Liability"}),s.jsx("a",{href:"#contact",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Contact"})]})}),s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{id:"acceptance",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"1. Acceptance of Terms"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"By accessing and using City Drive's services, you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service."})]}),s.jsxs("section",{id:"services",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"2. Description of Service"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"City Drive provides luxury car rental services through our website and mobile applications. Our services include:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6",children:[s.jsx("li",{children:"Online vehicle reservation and booking"}),s.jsx("li",{children:"Vehicle pickup and delivery services"}),s.jsx("li",{children:"Customer support and assistance"}),s.jsx("li",{children:"Insurance and protection services"}),s.jsx("li",{children:"Additional driver services"})]})]}),s.jsxs("section",{id:"accounts",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"3. User Accounts"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Account Creation"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"To use certain features of our service, you must register for an account. You agree to:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Provide accurate and complete information"}),s.jsx("li",{children:"Maintain the confidentiality of your account credentials"}),s.jsx("li",{children:"Be responsible for all activities under your account"}),s.jsx("li",{children:"Notify us immediately of any unauthorized use"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Account Termination"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We reserve the right to terminate or suspend your account at our discretion, with or without notice, for any violation of these terms."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"4. Rental Terms"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Vehicle Usage"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"All vehicles must be used in accordance with applicable laws and our rental policies. You agree to:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Operate vehicles safely and responsibly"}),s.jsx("li",{children:"Not use vehicles for illegal purposes"}),s.jsx("li",{children:"Not modify or alter vehicle equipment"}),s.jsx("li",{children:"Return vehicles in the same condition"}),s.jsx("li",{children:"Report any accidents or damages immediately"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Payment Terms"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"All rentals require valid payment method authorization. Payments are processed according to our pricing structure and include applicable taxes and fees."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"5. Insurance and Liability"}),s.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 mb-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Important Insurance Information"}),s.jsx("p",{className:"text-blue-800",children:"While we provide comprehensive insurance coverage, you remain responsible for damages caused by negligent operation, violation of rental terms, or illegal use of the vehicle."})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Insurance Coverage"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Our rental packages include:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Collision damage waiver (CDW)"}),s.jsx("li",{children:"Theft protection"}),s.jsx("li",{children:"Third-party liability coverage"}),s.jsx("li",{children:"Personal accident insurance"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Damage Responsibility"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"You are responsible for:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6",children:[s.jsx("li",{children:"Loss or damage due to negligence"}),s.jsx("li",{children:"Interior damage from smoking or pets"}),s.jsx("li",{children:"Damage from off-road use"}),s.jsx("li",{children:"Loss of vehicle keys or documents"}),s.jsx("li",{children:"Fines for traffic violations"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"6. Cancellation and Refund Policy"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Cancellation Terms"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Free cancellation up to 24 hours before pickup"}),s.jsx("li",{children:"50% refund for cancellations within 24 hours"}),s.jsx("li",{children:"No refund for no-shows or early returns"}),s.jsx("li",{children:"Special terms may apply for long-term rentals"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Refund Processing"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Refunds are processed within 5-7 business days to the original payment method. Processing times may vary by financial institution."})]}),s.jsxs("section",{id:"liability",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"7. Limitation of Liability"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"City Drive's liability is limited to the extent permitted by law. We are not liable for:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6",children:[s.jsx("li",{children:"Indirect, incidental, or consequential damages"}),s.jsx("li",{children:"Loss of profits or business interruption"}),s.jsx("li",{children:"Data loss or corruption"}),s.jsx("li",{children:"Third-party claims or disputes"}),s.jsx("li",{children:"Force majeure events beyond our control"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"8. Privacy and Data Protection"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your privacy is important to us. Please review our Privacy Policy for detailed information about how we collect, use, and protect your personal information."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"9. Governing Law"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"These terms are governed by and construed in accordance with the laws of the jurisdiction in which the rental agreement is executed, without regard to conflict of law principles."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"10. Changes to Terms"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"We reserve the right to modify these terms at any time. Changes will be effective immediately upon posting on our website. Your continued use of our services constitutes acceptance of the modified terms."})]}),s.jsxs("section",{id:"contact",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"11. Contact Information"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"If you have any questions about these Terms of Service, please contact us:"}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Customer Support"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("strong",{className:"text-gray-900",children:"Email:"}),s.jsx("p",{className:"text-gray-700",children:"support@citydrive.com"})]}),s.jsxs("div",{children:[s.jsx("strong",{className:"text-gray-900",children:"Phone:"}),s.jsx("p",{className:"text-gray-700",children:"+1 (555) 123-4567"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("strong",{className:"text-gray-900",children:"Address:"}),s.jsx("p",{className:"text-gray-700",children:"123 Luxury Lane, New York, NY 10001"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("strong",{className:"text-gray-900",children:"Hours:"}),s.jsx("p",{className:"text-gray-700",children:"Mon-Fri: 9AM-6PM EST"})]})]})]})]})]}),s.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 text-center text-sm text-gray-500",children:"Last updated: January 15, 2024"})]})})]}),cS=()=>s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-cyan-600 text-white",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Privacy Policy"}),s.jsx("p",{className:"text-xl opacity-90 max-w-3xl mx-auto",children:"How we collect, use, and protect your personal information"})]})})}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 md:p-12",children:[s.jsx("nav",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[s.jsx("a",{href:"#collection",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Data Collection"}),s.jsx("a",{href:"#usage",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Data Usage"}),s.jsx("a",{href:"#sharing",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Data Sharing"}),s.jsx("a",{href:"#rights",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Your Rights"}),s.jsx("a",{href:"#contact",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Contact"})]})}),s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Introduction"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"At City Drive, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our car rental services."}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"This policy applies to all users of our website, mobile applications, and related services. By using our services, you agree to the collection and use of information in accordance with this policy."})]}),s.jsxs("section",{id:"collection",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Information We Collect"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Personal Information"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We collect personal information that you provide directly to us, including:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Name, email address, and phone number"}),s.jsx("li",{children:"Driver's license and identification details"}),s.jsx("li",{children:"Billing and payment information"}),s.jsx("li",{children:"Emergency contact information"}),s.jsx("li",{children:"Vehicle preferences and rental history"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Automatically Collected Information"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We automatically collect certain information when you use our services:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"IP address and location data"}),s.jsx("li",{children:"Browser type and version"}),s.jsx("li",{children:"Device information and screen resolution"}),s.jsx("li",{children:"Usage patterns and preferences"}),s.jsx("li",{children:"Cookies and tracking technologies"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Booking and Transaction Data"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"When you make a reservation or complete a transaction:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6",children:[s.jsx("li",{children:"Rental dates, locations, and vehicle details"}),s.jsx("li",{children:"Payment method and transaction history"}),s.jsx("li",{children:"Communication records and support tickets"}),s.jsx("li",{children:"Vehicle damage reports and insurance claims"})]})]}),s.jsxs("section",{id:"usage",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"How We Use Your Information"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Service Provision"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Process and complete your rental reservations"}),s.jsx("li",{children:"Verify your identity and eligibility to rent"}),s.jsx("li",{children:"Communicate about your bookings and services"}),s.jsx("li",{children:"Provide customer support and assistance"}),s.jsx("li",{children:"Process payments and manage billing"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Service Improvement"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Analyze usage patterns and improve our services"}),s.jsx("li",{children:"Develop new features and functionality"}),s.jsx("li",{children:"Conduct research and statistical analysis"}),s.jsx("li",{children:"Monitor service performance and reliability"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Legal and Security"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6",children:[s.jsx("li",{children:"Prevent fraud and unauthorized access"}),s.jsx("li",{children:"Comply with legal obligations and regulations"}),s.jsx("li",{children:"Protect our rights and the rights of others"}),s.jsx("li",{children:"Investigate and resolve disputes or issues"})]})]}),s.jsxs("section",{id:"sharing",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Information Sharing and Disclosure"}),s.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 mb-6",children:[s.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Important Notice"}),s.jsx("p",{className:"text-blue-800",children:"We do not sell, trade, or rent your personal information to third parties for marketing purposes. Your data is used solely to provide and improve our services."})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Service Providers"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We may share your information with trusted third-party service providers who assist us in:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Payment processing and financial services"}),s.jsx("li",{children:"Vehicle maintenance and inspection"}),s.jsx("li",{children:"Insurance and claims processing"}),s.jsx("li",{children:"Customer support and communication"}),s.jsx("li",{children:"Website hosting and technical support"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Legal Requirements"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We may disclose your information when required by law or to:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsx("li",{children:"Comply with legal obligations or court orders"}),s.jsx("li",{children:"Protect against fraud or illegal activity"}),s.jsx("li",{children:"Safeguard the rights and safety of our users"}),s.jsx("li",{children:"Investigate security breaches or violations"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Business Transfers"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"In the event of a merger, acquisition, or sale of assets, your information may be transferred to the new entity, subject to the same privacy protections outlined in this policy."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Data Security"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"We implement comprehensive security measures to protect your personal information:"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse border border-gray-300 mb-6",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-indigo-600 text-white",children:[s.jsx("th",{className:"border border-gray-300 px-4 py-3 text-left",children:"Security Measure"}),s.jsx("th",{className:"border border-gray-300 px-4 py-3 text-left",children:"Description"})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium",children:"Encryption"}),s.jsx("td",{className:"border border-gray-300 px-4 py-3",children:"All data transmitted and stored using industry-standard encryption"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium",children:"Access Controls"}),s.jsx("td",{className:"border border-gray-300 px-4 py-3",children:"Strict access controls and authentication requirements"})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium",children:"Regular Audits"}),s.jsx("td",{className:"border border-gray-300 px-4 py-3",children:"Regular security audits and vulnerability assessments"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium",children:"Employee Training"}),s.jsx("td",{className:"border border-gray-300 px-4 py-3",children:"Ongoing security awareness training for all staff"})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 px-4 py-3 font-medium",children:"Incident Response"}),s.jsx("td",{className:"border border-gray-300 px-4 py-3",children:"Established procedures for responding to security incidents"})]})]})]})})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Data Retention"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We retain your personal information for as long as necessary to:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-4",children:[s.jsx("li",{children:"Provide our services and fulfill your requests"}),s.jsx("li",{children:"Comply with legal and regulatory requirements"}),s.jsx("li",{children:"Resolve disputes and enforce our agreements"}),s.jsx("li",{children:"Maintain accurate business and financial records"})]}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Booking and transaction data is typically retained for 7 years for tax and legal compliance purposes. Account data is retained until you request deletion, subject to legal requirements."})]}),s.jsxs("section",{id:"rights",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Your Privacy Rights"}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"You have the following rights regarding your personal information:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border-l-4 border-indigo-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Access"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Request a copy of the personal information we hold about you"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border-l-4 border-indigo-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Correction"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Request correction of inaccurate or incomplete information"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border-l-4 border-indigo-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Deletion"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Request deletion of your personal information, subject to legal requirements"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border-l-4 border-indigo-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Portability"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Request transfer of your data in a structured, machine-readable format"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border-l-4 border-indigo-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Restriction"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Request limitation of how we process your information"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border-l-4 border-indigo-600",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Objection"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Object to processing based on legitimate interests or direct marketing"})]})]})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"How to Exercise Your Rights"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"To exercise any of these rights, please contact us using the information provided below. We will respond to your request within 30 days and may require verification of your identity."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Cookies and Tracking"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Cookie Usage"}),s.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"We use cookies and similar technologies to enhance your experience:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2 ml-6 mb-6",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Essential Cookies:"})," Required for website functionality"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Analytics Cookies:"})," Help us understand user behavior and improve services"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Preference Cookies:"})," Remember your settings and preferences"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Marketing Cookies:"})," Used for targeted advertising (with your consent)"]})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Cookie Management"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"You can control cookie settings through your browser preferences. However, disabling certain cookies may affect website functionality."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"International Data Transfers"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Your information may be transferred to and processed in countries other than your own. We ensure that such transfers comply with applicable data protection laws and implement appropriate safeguards."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Children's Privacy"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Our services are not intended for children under 18 years of age. We do not knowingly collect personal information from children under 18. If we become aware that we have collected such information, we will take steps to delete it."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Changes to This Policy"}),s.jsx("p",{className:"text-gray-700 leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on our website and updating the "Last updated" date. Your continued use of our services after such changes constitutes acceptance of the updated policy.'})]}),s.jsxs("section",{id:"contact",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6 border-b-2 border-indigo-600 pb-2",children:"Contact Us"}),s.jsxs("div",{className:"bg-indigo-600 text-white p-8 rounded-lg",children:[s.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Privacy Inquiries"}),s.jsx("p",{className:"mb-6 opacity-90",children:"If you have any questions about this Privacy Policy or our data practices, please contact our Data Protection Officer:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("strong",{className:"block mb-1",children:"Email"}),s.jsx("span",{className:"opacity-90",children:"privacy@citydrive.com"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("strong",{className:"block mb-1",children:"Phone"}),s.jsx("span",{className:"opacity-90",children:"+1 (555) 123-4567"})]}),s.jsxs("div",{className:"text-center md:col-span-2",children:[s.jsx("strong",{className:"block mb-1",children:"Address"}),s.jsx("span",{className:"opacity-90",children:"123 Luxury Lane, New York, NY 10001"})]})]})]})]})]}),s.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 text-center text-sm text-gray-500",children:"Last updated: January 15, 2024"})]})})]}),uS=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center px-4",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"text-8xl mb-4",children:"🚗"}),s.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-2",children:"404"}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Sorry, the page you're looking for doesn't exist or has been moved."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(_e,{to:"/",className:"inline-block w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"🏠 Go Home"}),s.jsx(_e,{to:"/cars",className:"inline-block w-full bg-white text-indigo-600 py-3 px-6 rounded-lg font-semibold border-2 border-indigo-600 hover:bg-indigo-50 transition-all duration-200",children:"🚗 Browse Cars"}),s.jsx(_e,{to:"/contact",className:"inline-block w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg font-semibold hover:bg-gray-200 transition-all duration-200",children:"📞 Contact Support"})]}),s.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Quick Links:"}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:[s.jsx(_e,{to:"/about",className:"text-indigo-600 hover:text-indigo-800",children:"About"}),s.jsx(_e,{to:"/contact",className:"text-indigo-600 hover:text-indigo-800",children:"Contact"}),s.jsx(_e,{to:"/terms",className:"text-indigo-600 hover:text-indigo-800",children:"Terms"}),s.jsx(_e,{to:"/privacy",className:"text-indigo-600 hover:text-indigo-800",children:"Privacy"})]})]})]})}),dS=()=>s.jsxs("div",{className:"px-6 md:px-16 lg:px-24 xl:px-32 mt-16 text-sm text-white bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-400 border-t border-transparent shadow-inner font-[Montserrat]",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 py-8",children:[s.jsxs("div",{children:[s.jsx("img",{src:ie.logo,alt:"City Drive logo",className:"h-8 md:h-9 mb-4"}),s.jsx("p",{className:"max-w-80 text-gray-100 leading-relaxed",children:"Premium City Drive service with a wide selection of luxury and everyday vehicles for all your driving needs."}),s.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[s.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity",children:s.jsx("img",{src:ie.facebook_logo,className:"w-5 h-5",alt:"Facebook"})}),s.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity",children:s.jsx("img",{src:ie.instagram_logo,className:"w-5 h-5",alt:"Instagram"})}),s.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity",children:s.jsx("img",{src:ie.twitter_logo,className:"w-5 h-5",alt:"Twitter"})}),s.jsx("a",{href:"#",className:"hover:opacity-80 transition-opacity",children:s.jsx("img",{src:ie.gmail_logo,className:"w-5 h-5",alt:"Email"})})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white uppercase mb-4",children:"Quick Links"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(_e,{to:"/",className:"text-gray-100 hover:text-white transition-colors",children:"Home"})}),s.jsx("li",{children:s.jsx(_e,{to:"/cars",className:"text-gray-100 hover:text-white transition-colors",children:"Browse Cars"})}),s.jsx("li",{children:s.jsx(_e,{to:"/my-bookings",className:"text-gray-100 hover:text-white transition-colors",children:"My Bookings"})}),s.jsx("li",{children:s.jsx(_e,{to:"/about",className:"text-gray-100 hover:text-white transition-colors",children:"About Us"})})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white uppercase mb-4",children:"Services"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(_e,{to:"/cars",className:"text-gray-100 hover:text-white transition-colors",children:"Car Rental"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-gray-100 hover:text-white transition-colors",children:"Luxury Fleet"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-gray-100 hover:text-white transition-colors",children:"Airport Transfer"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-gray-100 hover:text-white transition-colors",children:"Chauffeur Service"})})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white uppercase mb-4",children:"Support"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(_e,{to:"/contact",className:"text-gray-100 hover:text-white transition-colors",children:"Contact Us"})}),s.jsx("li",{children:s.jsx(_e,{to:"/contact",className:"text-gray-100 hover:text-white transition-colors",children:"Help Center"})}),s.jsx("li",{children:s.jsx(_e,{to:"/terms",className:"text-gray-100 hover:text-white transition-colors",children:"Terms of Service"})}),s.jsx("li",{children:s.jsx(_e,{to:"/privacy",className:"text-gray-100 hover:text-white transition-colors",children:"Privacy Policy"})})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 items-center justify-between py-5",children:[s.jsxs("p",{children:["© ",new Date().getFullYear()," City Drive. All rights reserved."]}),s.jsxs("ul",{className:"flex items-center gap-4",children:[s.jsxs("li",{children:[s.jsx(_e,{to:"/privacy",className:"hover:text-blue-600 transition-colors",children:"Privacy"}),s.jsx("span",{children:" | "})]}),s.jsxs("li",{children:[s.jsx(_e,{to:"/terms",className:"hover:text-blue-600 transition-colors",children:"Terms"}),s.jsx("span",{children:" | "})]}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-blue-600 transition-colors",children:"Sitemap"})})]})]})]}),hx=({children:n,requireAuth:e=!0,allowedRoles:t=[],redirectTo:i="/login"})=>{const{isAuthenticated:o,user:c,loading:d,hasRole:m}=Qt(),p=en();if(d)return s.jsx($i,{});if(e&&!o())return s.jsx(im,{to:i,state:{from:p},replace:!0});if(!e&&o()){const g=c?.role==="owner"?"/dashboard":"/home";return s.jsx(im,{to:g,replace:!0})}if(e&&t.length>0&&!t.includes(c?.role)){const v=c?.role==="owner"?"/dashboard":"/";return s.jsx(im,{to:v,replace:!0})}return n},hS=()=>{const n=en().pathname.startsWith("/owner");return s.jsxs(s.Fragment,{children:[s.jsx(Sk,{}),s.jsxs(O1,{children:[s.jsx(lt,{path:"/",element:s.jsx(qk,{})}),s.jsx(lt,{path:"/car-details/:id",element:s.jsx(Pk,{})}),s.jsx(lt,{path:"/cars",element:s.jsx(Wk,{})}),s.jsx(lt,{path:"/booking/:id",element:s.jsx(Kk,{})}),s.jsx(lt,{path:"/login",element:s.jsx(Qk,{})}),s.jsx(lt,{path:"/client-login",element:s.jsx(Yk,{})}),s.jsx(lt,{path:"/owner-login",element:s.jsx(Jk,{})}),s.jsx(lt,{path:"/profile",element:s.jsx(Xk,{})}),s.jsx(lt,{path:"/settings",element:s.jsx(hx,{children:s.jsx(iS,{})})}),s.jsx(lt,{path:"/my-bookings",element:s.jsx(hx,{children:s.jsx(Gk,{})})}),s.jsx(lt,{path:"/contact",element:s.jsx(aS,{})}),s.jsx(lt,{path:"/about",element:s.jsx(oS,{})}),s.jsx(lt,{path:"/terms",element:s.jsx(lS,{})}),s.jsx(lt,{path:"/privacy",element:s.jsx(cS,{})}),s.jsx(lt,{path:"/owner",element:s.jsx(Zk,{})}),s.jsx(lt,{path:"/owner/edit-car/:id",element:s.jsx(eS,{})}),s.jsx(lt,{path:"/owner/add-car",element:s.jsx(tS,{})}),s.jsx(lt,{path:"/owner/manage-cars",element:s.jsx(nS,{})}),s.jsx(lt,{path:"/owner/manage-bookings",element:s.jsx(rS,{})}),s.jsx(lt,{path:"/owner/revenue",element:s.jsx(sS,{})}),s.jsx(lt,{path:"*",element:s.jsx(uS,{})})]}),!n&&s.jsx(dS,{})]})},mS=()=>s.jsx(YT,{children:s.jsx(hS,{})});var mx={},fS="@vercel/speed-insights",pS="1.2.0",gS=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function yS(){return typeof window<"u"}function xS(){try{const n="production"}catch{}return"production"}function Vw(){return xS()==="development"}function vS(n){return n.scriptSrc?n.scriptSrc:Vw()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function wS(n={}){var e;if(!yS()||n.route===null)return null;gS();const t=vS(n);if(document.head.querySelector(`script[src*="${t}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const i=document.createElement("script");return i.src=t,i.defer=!0,i.dataset.sdkn=fS+(n.framework?`/${n.framework}`:""),i.dataset.sdkv=pS,n.sampleRate&&(i.dataset.sampleRate=n.sampleRate.toString()),n.route&&(i.dataset.route=n.route),n.endpoint?i.dataset.endpoint=n.endpoint:n.basePath&&(i.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(i.dataset.dsn=n.dsn),Vw()&&n.debug===!1&&(i.dataset.debug="false"),i.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(i),{setRoute:o=>{i.dataset.route=o??void 0}}}function bS(){if(!(typeof process>"u"||typeof mx>"u"))return mx.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function _S(n){V.useEffect(()=>{var t;n.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=V.useRef(null);return V.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const t=wS({framework:n.framework??"react",basePath:n.basePath??bS(),...n});t&&(e.current=t.setRoute)}},[n.route]),null}Kb.createRoot(document.getElementById("root")).render(s.jsxs(o_,{children:[s.jsx(mS,{}),s.jsx(_S,{})]}));
